



<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="my notes">
      
      
      
      
        <meta name="lang:clipboard.copy" content="复制">
      
        <meta name="lang:clipboard.copied" content="已复制">
      
        <meta name="lang:search.language" content="ja">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="没有找到符合条件的结果">
      
        <meta name="lang:search.result.one" content="找到 1 个符合条件的结果">
      
        <meta name="lang:search.result.other" content="# 个符合条件的结果">
      
        <meta name="lang:search.tokenizer" content="[\uff0c\u3002]+">
      
      <link rel="shortcut icon" href="../..">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-4.6.0">
    
    
      
        <title>1.2 k8s部署之kubeadm高可用 - 我的笔记</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.1b62728e.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-palette.a8b3c06d.css">
      
      
        
        
        <meta name="theme-color" content="#3f51b5">
      
    
    
      <script src="../../assets/javascripts/modernizr.268332fc.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#kuberneteshttps-" tabindex="1" class="md-skip">
        跳转至
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="我的笔记" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              我的笔记
            </span>
            <span class="md-header-nav__topic">
              
                1.2 k8s部署之kubeadm高可用
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            键入以开始搜索
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://gitee.com/ljzsdut/ljzsdut" title="前往 Github 仓库" class="md-source" data-md-source="">
  
  <div class="md-source__repository">
    mynotes
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../.." title="我的笔记" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    我的笔记
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://gitee.com/ljzsdut/ljzsdut" title="前往 Github 仓库" class="md-source" data-md-source="">
  
  <div class="md-source__repository">
    mynotes
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" checked>
    
    <label class="md-nav__link" for="nav-2">
      Kubernetes
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Kubernetes
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../0-k8s%E9%83%A8%E7%BD%B2%E4%B9%8B%E6%A6%82%E8%BF%B0%E5%85%A5%E9%97%A8/" title="0 k8s部署之概述入门" class="md-nav__link">
      0 k8s部署之概述入门
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../1.1-k8s%E9%83%A8%E7%BD%B2%E4%B9%8Bkubeadm/" title="1.1 k8s部署之kubeadm" class="md-nav__link">
      1.1 k8s部署之kubeadm
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        1.2 k8s部署之kubeadm高可用
      </label>
    
    <a href="./" title="1.2 k8s部署之kubeadm高可用" class="md-nav__link md-nav__link--active">
      1.2 k8s部署之kubeadm高可用
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">目录</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#etcd" class="md-nav__link">
    一、etcd集群及相关的数字证书
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kubernetes" class="md-nav__link">
    二、Kubernetes集群及相关的数字证书
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kube-aggregator" class="md-nav__link">
    三、kube-aggregator(代理)及相关的数字证书
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#service_account_key" class="md-nav__link">
    四、Service Account key
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    五、相关的数字证书
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    六、小结
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../1.3-k8s%E9%83%A8%E7%BD%B2%E4%B9%8BDashboard/" title="1.3 k8s部署之Dashboard" class="md-nav__link">
      1.3 k8s部署之Dashboard
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../1.4-k8s%E9%83%A8%E7%BD%B2%E4%B9%8Bmetric-server/" title="1.4 k8s部署之metric server" class="md-nav__link">
      1.4 k8s部署之metric server
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../1.5-k8s%E9%83%A8%E7%BD%B2%E4%B9%8B%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%AB%98%E5%8F%AF%E7%94%A8/" title="1.5 k8s部署之二进制高可用" class="md-nav__link">
      1.5 k8s部署之二进制高可用
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../1.6-%E9%83%A8%E7%BD%B2heketi%2Bglusterfs%E5%AE%9E%E7%8E%B0%E5%AD%98%E5%82%A8%E7%B1%BB/" title="1.6 部署heketi+glusterfs实现存储类" class="md-nav__link">
      1.6 部署heketi+glusterfs实现存储类
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../1.7-k8s%E9%83%A8%E7%BD%B2%E4%B9%8Brke%E9%9B%86%E7%BE%A4%E9%83%A8%E7%BD%B2%2B%E7%BB%B4%E6%8A%A4%E6%96%87%E6%A1%A3/" title="1.7 k8s部署之rke集群部署+维护文档" class="md-nav__link">
      1.7 k8s部署之rke集群部署+维护文档
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../2.1-k8s%E8%B5%84%E6%BA%90%E5%AF%B9%E8%B1%A1%E4%B9%8B%E6%A6%82%E8%BF%B0/" title="2.1 k8s资源对象之概述" class="md-nav__link">
      2.1 k8s资源对象之概述
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../2.2-k8s%E8%B5%84%E6%BA%90%E5%AF%B9%E8%B1%A1%E4%B9%8BPod/" title="2.2-k8s资源对象之Pod" class="md-nav__link">
      2.2-k8s资源对象之Pod
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../2.3-k8s%E6%8E%A7%E5%88%B6%E5%99%A8%E8%B5%84%E6%BA%90%E5%AF%B9%E8%B1%A1%E4%B9%8B%E6%A6%82%E8%BF%B0/" title="2.3 k8s控制器资源对象之概述" class="md-nav__link">
      2.3 k8s控制器资源对象之概述
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../2.4-k8s%E6%8E%A7%E5%88%B6%E5%99%A8%E8%B5%84%E6%BA%90%E5%AF%B9%E8%B1%A1%E4%B9%8BRS%26Deployment/" title="2.4 k8s控制器资源对象之RS&Deployment" class="md-nav__link">
      2.4 k8s控制器资源对象之RS&Deployment
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../2.5-k8s%E6%8E%A7%E5%88%B6%E5%99%A8%E8%B5%84%E6%BA%90%E5%AF%B9%E8%B1%A1%E4%B9%8BDaemonSet/" title="2.5 k8s控制器资源对象之DaemonSet" class="md-nav__link">
      2.5 k8s控制器资源对象之DaemonSet
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../2.6-k8s%E6%8E%A7%E5%88%B6%E5%99%A8%E8%B5%84%E6%BA%90%E5%AF%B9%E8%B1%A1%E4%B9%8Bjob%26Cronjob/" title="2.6 k8s控制器资源对象之job&Cronjob" class="md-nav__link">
      2.6 k8s控制器资源对象之job&Cronjob
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../2.7-k8s%E6%8E%A7%E5%88%B6%E5%99%A8%E8%B5%84%E6%BA%90%E5%AF%B9%E8%B1%A1%E4%B9%8BStatefulSet/" title="2.7 k8s控制器资源对象之StatefulSet" class="md-nav__link">
      2.7 k8s控制器资源对象之StatefulSet
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../2.8-k8s%E6%8E%A7%E5%88%B6%E5%99%A8%E8%B5%84%E6%BA%90%E5%AF%B9%E8%B1%A1%E4%B9%8BHPA/" title="2.8 k8s控制器资源对象之HPA" class="md-nav__link">
      2.8 k8s控制器资源对象之HPA
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../3.1-k8s%E6%9C%8D%E5%8A%A1%E5%8F%91%E7%8E%B0%E4%B9%8BService/" title="3.1 k8s服务发现之Service" class="md-nav__link">
      3.1 k8s服务发现之Service
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../3.2-k8s%E6%9C%8D%E5%8A%A1%E5%8F%91%E7%8E%B0%E4%B9%8BIngress/" title="3.2 k8s服务发现之Ingress" class="md-nav__link">
      3.2 k8s服务发现之Ingress
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../4.1-k8s%E5%AD%98%E5%82%A8%E4%B9%8BVolume/" title="4.1 k8s存储之Volume" class="md-nav__link">
      4.1 k8s存储之Volume
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../4.2-k8s%E5%AD%98%E5%82%A8%E4%B9%8BPV%26PVC/" title="4.2 k8s存储之PV&PVC" class="md-nav__link">
      4.2 k8s存储之PV&PVC
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../4.3-k8s%E5%AD%98%E5%82%A8%E4%B9%8BStorageClass/" title="4.3 k8s存储之StorageClass" class="md-nav__link">
      4.3 k8s存储之StorageClass
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../4.4-k8s%E5%AD%98%E5%82%A8%E4%B9%8B%E6%9C%AC%E5%9C%B0%E6%8C%81%E4%B9%85%E5%8C%96%E5%AD%98%E5%82%A8Local%20PV/" title="4.4 k8s存储之本地持久化存储Local PV" class="md-nav__link">
      4.4 k8s存储之本地持久化存储Local PV
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../5.1-k8s%E9%85%8D%E7%BD%AE%E4%B8%AD%E5%BF%83%E4%B9%8BConfigMap/" title="5.1 k8s配置中心之ConfigMap" class="md-nav__link">
      5.1 k8s配置中心之ConfigMap
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../5.2-k8s%E9%85%8D%E7%BD%AE%E4%B8%AD%E5%BF%83%E4%B9%8BSecret/" title="5.2 k8s配置中心之Secret" class="md-nav__link">
      5.2 k8s配置中心之Secret
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../6.1-k8s%E8%AE%A4%E8%AF%81%26%E6%8E%88%E6%9D%83%26%E5%87%86%E5%85%A5%E6%8E%A7%E5%88%B6/" title="6.1 k8s认证&授权&准入控制" class="md-nav__link">
      6.1 k8s认证&授权&准入控制
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../7.1-k8s%E7%BD%91%E7%BB%9C%E6%8F%92%E4%BB%B6%E4%B9%8Bflannel%26canal/" title="7.1 k8s网络插件之flannel&canal" class="md-nav__link">
      7.1 k8s网络插件之flannel&canal
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../8.1-k8s%E8%B0%83%E5%BA%A6%E7%AD%96%E7%95%A5%E4%B9%8BScheduler/" title="8.1 k8s调度策略之Scheduler" class="md-nav__link">
      8.1 k8s调度策略之Scheduler
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../9.1-k8s%E8%B5%84%E6%BA%90%E9%99%90%E5%88%B6/" title="9.1 k8s资源限制" class="md-nav__link">
      9.1 k8s资源限制
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../9.2-k8s%E8%B5%84%E6%BA%90%E5%AF%B9%E8%B1%A1LimitRange%E4%B8%8E%E5%90%8D%E7%A7%B0%E7%A9%BA%E9%97%B4%E7%9A%84%E9%85%8D%E9%A2%9DResourceQuota/" title="9.2 k8s资源对象LimitRange与名称空间的配额ResourceQuota" class="md-nav__link">
      9.2 k8s资源对象LimitRange与名称空间的配额ResourceQuota
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../11.2-k8s%E4%B9%8BEFK%E6%97%A5%E5%BF%97%E7%B3%BB%E7%BB%9F/" title="11.2 k8s之EFK日志系统" class="md-nav__link">
      11.2 k8s之EFK日志系统
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../12-cordon%26drain%26uncordon/" title="12 cordon&drain&uncordon" class="md-nav__link">
      12 cordon&drain&uncordon
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../12-k8s%E7%9A%84CICD/" title="12 k8s的CICD" class="md-nav__link">
      12 k8s的CICD
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../13-k8s%E4%B9%8BPodPreset/" title="13 k8s之PodPreset" class="md-nav__link">
      13 k8s之PodPreset
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../14-k8s%E5%A6%82%E4%BD%95%E5%BC%95%E5%85%A5%E5%A4%96%E9%83%A8%E6%9C%8D%E5%8A%A1/" title="14 k8s如何引入外部服务" class="md-nav__link">
      14 k8s如何引入外部服务
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../CoreDNS/" title="CoreDNS文档" class="md-nav__link">
      CoreDNS文档
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../K8S_Runtime%E4%B9%8BCRI%26OCI%26contained%26dockershim%E7%9A%84%E7%90%86%E8%A7%A3/" title="k8s运行时" class="md-nav__link">
      k8s运行时
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../K8s%E4%B8%AD%E7%9A%84external-traffic-policy%E6%98%AF%E4%BB%80%E4%B9%88/" title="K8s中的external-traffic-policy是什么？" class="md-nav__link">
      K8s中的external-traffic-policy是什么？
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Kustomize/" title="Kustomize" class="md-nav__link">
      Kustomize
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ServiceAccount%E5%92%8C%E5%85%B6secrets%E4%BD%9C%E7%94%A8%E5%92%8C%E5%9C%BA%E6%99%AF/" title="ServiceAccount和其secrets作用和场景" class="md-nav__link">
      ServiceAccount和其secrets作用和场景
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../k8s%E8%AE%BE%E7%BD%AEnode%E8%8A%82%E7%82%B9ROLES%E5%B1%9E%E6%80%A7/" title="k8s设置node节点ROLES属性" class="md-nav__link">
      k8s设置node节点ROLES属性
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../kubectl%E7%9A%84%E6%A0%87%E7%AD%BE%E9%80%89%E6%8B%A9%E5%99%A8/" title="kubectl 的标签选择器" class="md-nav__link">
      kubectl 的标签选择器
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tls-bootstrapping/" title="Tls bootstrapping" class="md-nav__link">
      Tls bootstrapping
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-43" type="checkbox" id="nav-2-43">
    
    <label class="md-nav__link" for="nav-2-43">
      Calico网络
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-43">
        Calico网络
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../Calico%E7%BD%91%E7%BB%9C/1-Calico%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1%E5%8E%9F%E7%90%86%E6%8F%AD%E7%A7%98/" title="1 Calico网络通信原理揭秘" class="md-nav__link">
      1 Calico网络通信原理揭秘
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Calico%E7%BD%91%E7%BB%9C/2-Calico%E7%BD%91%E7%BB%9C%E5%AE%9E%E7%8E%B0/" title="2 Calico网络实现" class="md-nav__link">
      2 Calico网络实现
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Calico%E7%BD%91%E7%BB%9C/3-Calico-IPIP%E6%A8%A1%E5%BC%8F%E6%B7%B1%E5%85%A5%E5%88%86%E6%9E%90/" title="3 Calico IPIP模式深入分析" class="md-nav__link">
      3 Calico IPIP模式深入分析
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Calico%E7%BD%91%E7%BB%9C/flannel%E7%BD%91%E7%BB%9C%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86/" title="Flannel网络实现原理" class="md-nav__link">
      Flannel网络实现原理
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Calico%E7%BD%91%E7%BB%9C/k8s-service%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86/" title="K8s service实现原理" class="md-nav__link">
      K8s service实现原理
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-44" type="checkbox" id="nav-2-44">
    
    <label class="md-nav__link" for="nav-2-44">
      Helm
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-44">
        Helm
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../helm/00-Helm2%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8/" title="00 Helm2基础使用" class="md-nav__link">
      00 Helm2基础使用
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../helm/00-Helm3%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8/" title="00 Helm3基础使用" class="md-nav__link">
      00 Helm3基础使用
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../helm/01-%E8%87%AA%E5%AE%9A%E4%B9%89chart%E5%85%A5%E9%97%A8/" title="01 自定义chart入门" class="md-nav__link">
      01 自定义chart入门
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../helm/02-helm%E6%A8%A1%E6%9D%BF%E4%B9%8B%E5%86%85%E7%BD%AE%E5%AF%B9%E8%B1%A1%E5%92%8CValue%E5%AF%B9%E8%B1%A1/" title="02 helm模板之内置对象和Value对象" class="md-nav__link">
      02 helm模板之内置对象和Value对象
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../helm/03-helm%E6%A8%A1%E6%9D%BF%E4%B9%8B%E5%87%BD%E6%95%B0%E5%92%8C%E7%AE%A1%E9%81%93/" title="03 helm模板之函数和管道" class="md-nav__link">
      03 helm模板之函数和管道
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../helm/04-helm%E6%A8%A1%E6%9D%BF%E4%B9%8B%E6%8E%A7%E5%88%B6%E6%B5%81%E7%A8%8B%E5%92%8C%E5%8F%98%E9%87%8F/" title="04 helm模板之控制流程和变量" class="md-nav__link">
      04 helm模板之控制流程和变量
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../helm/05-helm%E6%A8%A1%E6%9D%BF%E4%B9%8B%E5%91%BD%E5%90%8D%E6%A8%A1%E6%9D%BF/" title="05 helm模板之命名模板" class="md-nav__link">
      05 helm模板之命名模板
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../helm/06-helm%E6%A8%A1%E6%9D%BF%E4%B9%8B%E5%85%B6%E4%BB%96%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9/" title="06 helm模板之其他注意事项" class="md-nav__link">
      06 helm模板之其他注意事项
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../helm/07-helm%E4%B9%8Bhooks/" title="07 helm之hooks" class="md-nav__link">
      07 helm之hooks
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../helm/08-%E5%A6%82%E4%BD%95%E5%9C%A8HelmChart%E4%B8%AD%E5%85%BC%E5%AE%B9%E4%B8%8D%E5%90%8CKubernetes%E7%89%88%E6%9C%AC/" title="08 如何在HelmChart中兼容不同Kubernetes版本" class="md-nav__link">
      08 如何在HelmChart中兼容不同Kubernetes版本
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-45" type="checkbox" id="nav-2-45">
    
    <label class="md-nav__link" for="nav-2-45">
      运维实战
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-45">
        运维实战
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../%E8%BF%90%E7%BB%B4%E5%AE%9E%E6%88%98/%E9%9B%86%E7%BE%A4node%E7%9A%84load%E8%BF%87%E9%AB%98%E6%8E%92%E6%9F%A5/" title="集群node的load过高排查" class="md-nav__link">
      集群node的load过高排查
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-46" type="checkbox" id="nav-2-46">
    
    <label class="md-nav__link" for="nav-2-46">
      Harbor
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-46">
        Harbor
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../Harbor/harbor%E9%95%9C%E5%83%8F%E4%BB%93%E5%BA%93%E9%83%A8%E7%BD%B2/" title="Harbor镜像仓库部署" class="md-nav__link">
      Harbor镜像仓库部署
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-47" type="checkbox" id="nav-2-47">
    
    <label class="md-nav__link" for="nav-2-47">
      Istio
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-47">
        Istio
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../Istio/00-istio%E5%85%A5%E9%97%A8/" title="00 istio入门" class="md-nav__link">
      00 istio入门
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Istio/00-%E6%9D%82%E8%AE%B0/" title="00 杂记" class="md-nav__link">
      00 杂记
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Istio/01-istio-CRD/" title="01 istio CRD" class="md-nav__link">
      01 istio CRD
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Istio/02-virtualService/" title="02 virtualService" class="md-nav__link">
      02 virtualService
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Prometheus
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Prometheus
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Prometheus/001-Prometheus%E5%85%A5%E9%97%A8%E6%A6%82%E8%BF%B0/" title="001 Prometheus入门概述" class="md-nav__link">
      001 Prometheus入门概述
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Prometheus/002-Prometheus2.5-Grafana5.4%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%83%A8%E7%BD%B2/" title="002 Prometheus2.5 Grafana5.4二进制部署" class="md-nav__link">
      002 Prometheus2.5 Grafana5.4二进制部署
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Prometheus/002-Prometheus%E7%9A%84%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B/" title="002 Prometheus的数据模型" class="md-nav__link">
      002 Prometheus的数据模型
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Prometheus/003-PromQL%E8%AF%A6%E8%A7%A3/" title="003 PromQL详解" class="md-nav__link">
      003 PromQL详解
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Prometheus/004-prometheus%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%A6%E8%A7%A3/" title="004 prometheus配置文件详解" class="md-nav__link">
      004 prometheus配置文件详解
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Prometheus/005-altermanager%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%A6%E8%A7%A3/" title="005 altermanager配置文件详解" class="md-nav__link">
      005 altermanager配置文件详解
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Prometheus/006-Prometheus%E7%9A%84%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/" title="006 Prometheus的数据存储" class="md-nav__link">
      006 Prometheus的数据存储
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Prometheus/007-Prometheus%E9%9B%86%E7%BE%A4/" title="007 Prometheus集群" class="md-nav__link">
      007 Prometheus集群
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Prometheus/grafana/" title="Grafana" class="md-nav__link">
      Grafana
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Prometheus/telegraph%E5%92%8Cgrafana%E5%90%88%E9%9B%86/" title="Telegraph和grafana合集" class="md-nav__link">
      Telegraph和grafana合集
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-11" type="checkbox" id="nav-3-11">
    
    <label class="md-nav__link" for="nav-3-11">
      Prometheus operator
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-11">
        Prometheus operator
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Prometheus/Prometheus-operator/00-Prometheus-operater-%E7%9B%91%E6%8E%A7%E4%BD%93%E7%B3%BB%E5%8E%9F%E7%90%86%E6%A2%B3%E7%90%86%E6%96%87%E6%A1%A3/" title="00 Prometheus operater 监控体系原理梳理文档" class="md-nav__link">
      00 Prometheus operater 监控体系原理梳理文档
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Prometheus/Prometheus-operator/01-alert-rules%E6%95%B4%E7%90%86/" title="01 alert rules整理" class="md-nav__link">
      01 alert rules整理
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Prometheus/Prometheus-operator/03-golang%E5%BC%80%E5%8F%91%E9%92%89%E9%92%89web-server%28%E4%BA%86%E8%A7%A3%E9%92%89%E9%92%89%E9%80%9A%E7%9F%A5%E7%9A%84%E5%8E%9F%E7%90%86%29/" title="使用Webhook扩展Alertmanager" class="md-nav__link">
      使用Webhook扩展Alertmanager
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Prometheus/Prometheus-operator/04-Prometheus%20Operator%20%E7%9B%91%E6%8E%A7%E5%A4%96%E7%BD%AEETCD%E9%9B%86%E7%BE%A4/" title="[Prometheus Operator 监控外置ETCD集群](https://i4t.com/4583.html)" class="md-nav__link">
      [Prometheus Operator 监控外置ETCD集群](https://i4t.com/4583.html)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Prometheus/Prometheus-operator/%E5%8F%82%E8%80%83%E6%96%87%E6%A1%A3/" title="参考文档" class="md-nav__link">
      参考文档
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-11-6" type="checkbox" id="nav-3-11-6">
    
    <label class="md-nav__link" for="nav-3-11-6">
      Deploy
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-3-11-6">
        Deploy
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Prometheus/Prometheus-operator/deploy/" title="Index" class="md-nav__link">
      Index
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-11-6-2" type="checkbox" id="nav-3-11-6-2">
    
    <label class="md-nav__link" for="nav-3-11-6-2">
      Prometheus operator
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-3-11-6-2">
        Prometheus operator
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Prometheus/Prometheus-operator/deploy/prometheus-operator/" title="prometheus-operator" class="md-nav__link">
      prometheus-operator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Prometheus/Prometheus-operator/deploy/prometheus-operator/CONTRIBUTING/" title="Contributing Guidelines" class="md-nav__link">
      Contributing Guidelines
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-11-6-2-3" type="checkbox" id="nav-3-11-6-2-3">
    
    <label class="md-nav__link" for="nav-3-11-6-2-3">
      Charts
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-3-11-6-2-3">
        Charts
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-11-6-2-3-1" type="checkbox" id="nav-3-11-6-2-3-1">
    
    <label class="md-nav__link" for="nav-3-11-6-2-3-1">
      Grafana
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="6">
      <label class="md-nav__title" for="nav-3-11-6-2-3-1">
        Grafana
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Prometheus/Prometheus-operator/deploy/prometheus-operator/charts/grafana/" title="Grafana Helm Chart" class="md-nav__link">
      Grafana Helm Chart
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-11-6-2-3-2" type="checkbox" id="nav-3-11-6-2-3-2">
    
    <label class="md-nav__link" for="nav-3-11-6-2-3-2">
      Kube state metrics
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="6">
      <label class="md-nav__title" for="nav-3-11-6-2-3-2">
        Kube state metrics
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Prometheus/Prometheus-operator/deploy/prometheus-operator/charts/kube-state-metrics/" title="kube-state-metrics Helm Chart" class="md-nav__link">
      kube-state-metrics Helm Chart
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-11-6-2-3-3" type="checkbox" id="nav-3-11-6-2-3-3">
    
    <label class="md-nav__link" for="nav-3-11-6-2-3-3">
      Prometheus node exporter
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="6">
      <label class="md-nav__title" for="nav-3-11-6-2-3-3">
        Prometheus node exporter
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Prometheus/Prometheus-operator/deploy/prometheus-operator/charts/prometheus-node-exporter/" title="Prometheus Node Exporter" class="md-nav__link">
      Prometheus Node Exporter
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-11-7" type="checkbox" id="nav-3-11-7">
    
    <label class="md-nav__link" for="nav-3-11-7">
      监控项配置
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-3-11-7">
        监控项配置
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-11-7-1" type="checkbox" id="nav-3-11-7-1">
    
    <label class="md-nav__link" for="nav-3-11-7-1">
      Blackbox exporter
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-3-11-7-1">
        Blackbox exporter
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Prometheus/Prometheus-operator/%E7%9B%91%E6%8E%A7%E9%A1%B9%E9%85%8D%E7%BD%AE/blackbox-exporter/blackbox-exporter%E7%9B%91%E6%8E%A7%E6%96%87%E6%A1%A3/" title="Blackbox exporter监控文档" class="md-nav__link">
      Blackbox exporter监控文档
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-11-7-2" type="checkbox" id="nav-3-11-7-2">
    
    <label class="md-nav__link" for="nav-3-11-7-2">
      Etcd monitor rancher
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-3-11-7-2">
        Etcd monitor rancher
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Prometheus/Prometheus-operator/%E7%9B%91%E6%8E%A7%E9%A1%B9%E9%85%8D%E7%BD%AE/etcd-monitor-rancher/etcd%E7%9B%91%E6%8E%A7/" title="Etcd监控" class="md-nav__link">
      Etcd监控
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-12" type="checkbox" id="nav-3-12">
    
    <label class="md-nav__link" for="nav-3-12">
      Kube prometheus stack
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-12">
        Kube prometheus stack
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Prometheus/kube-prometheus-stack/kube-prometheus-stack/" title="Kube prometheus stack" class="md-nav__link">
      Kube prometheus stack
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-12-2" type="checkbox" id="nav-3-12-2">
    
    <label class="md-nav__link" for="nav-3-12-2">
      Kube prometheus stack
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-3-12-2">
        Kube prometheus stack
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Prometheus/kube-prometheus-stack/kube-prometheus-stack/" title="kube-prometheus-stack" class="md-nav__link">
      kube-prometheus-stack
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Prometheus/kube-prometheus-stack/kube-prometheus-stack/CONTRIBUTING/" title="Contributing Guidelines" class="md-nav__link">
      Contributing Guidelines
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-12-2-3" type="checkbox" id="nav-3-12-2-3">
    
    <label class="md-nav__link" for="nav-3-12-2-3">
      Charts
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-3-12-2-3">
        Charts
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-12-2-3-1" type="checkbox" id="nav-3-12-2-3-1">
    
    <label class="md-nav__link" for="nav-3-12-2-3-1">
      Grafana
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-3-12-2-3-1">
        Grafana
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Prometheus/kube-prometheus-stack/kube-prometheus-stack/charts/grafana/" title="Grafana Helm Chart" class="md-nav__link">
      Grafana Helm Chart
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-12-2-3-2" type="checkbox" id="nav-3-12-2-3-2">
    
    <label class="md-nav__link" for="nav-3-12-2-3-2">
      Kube state metrics
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-3-12-2-3-2">
        Kube state metrics
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Prometheus/kube-prometheus-stack/kube-prometheus-stack/charts/kube-state-metrics/" title="kube-state-metrics Helm Chart" class="md-nav__link">
      kube-state-metrics Helm Chart
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-12-2-3-3" type="checkbox" id="nav-3-12-2-3-3">
    
    <label class="md-nav__link" for="nav-3-12-2-3-3">
      Prometheus node exporter
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-3-12-2-3-3">
        Prometheus node exporter
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Prometheus/kube-prometheus-stack/kube-prometheus-stack/charts/prometheus-node-exporter/" title="Prometheus Node Exporter" class="md-nav__link">
      Prometheus Node Exporter
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-12-3" type="checkbox" id="nav-3-12-3">
    
    <label class="md-nav__link" for="nav-3-12-3">
      Prometheus blackbox exporter
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-3-12-3">
        Prometheus blackbox exporter
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Prometheus/kube-prometheus-stack/prometheus-blackbox-exporter/" title="Prometheus Blackbox Exporter" class="md-nav__link">
      Prometheus Blackbox Exporter
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Traefik
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Traefik
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Traefik/0-traefik%E5%9F%BA%E7%A1%80%28%E5%9F%BA%E4%BA%8Efile-provider%29/" title="0-traefik基础(基于file-provider)" class="md-nav__link">
      0-traefik基础(基于file-provider)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Traefik/1-KubernetesCRD-provider%E4%BD%BF%E7%94%A8/" title="1 KubernetesCRD provider使用" class="md-nav__link">
      1 KubernetesCRD provider使用
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Traefik/2-traefik%E4%BD%BF%E7%94%A8%E6%96%B9%E5%BC%8F/" title="2 traefik使用方式" class="md-nav__link">
      2 traefik使用方式
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Traefik/3-Cert-manager%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%8A%A8%E8%AF%81%E4%B9%A6%E7%94%B3%E8%AF%B7/" title="3 Cert manager实现自动证书申请" class="md-nav__link">
      3 Cert manager实现自动证书申请
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Docker
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Docker
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Docker/docker/" title="Docker入门" class="md-nav__link">
      Docker入门
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      ElasticSearch
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        ElasticSearch
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../ElasticSearch/01-ES%E5%85%A5%E9%97%A8%E4%BB%8B%E7%BB%8D/" title="01 ES入门介绍" class="md-nav__link">
      01 ES入门介绍
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ElasticSearch/02-es%E6%90%9C%E7%B4%A2%E8%AF%AD%E6%B3%95/" title="02 es搜索语法" class="md-nav__link">
      02 es搜索语法
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ElasticSearch/02-%E6%90%9C%E7%B4%A2api/" title="02 搜索api" class="md-nav__link">
      02 搜索api
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ElasticSearch/03-shard%E4%B8%8Ereplicas/" title="03 shard与replicas" class="md-nav__link">
      03 shard与replicas
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ElasticSearch/04-%E7%B4%A2%E5%BC%95%E5%85%83%E6%95%B0%E6%8D%AE/" title="04 索引元数据" class="md-nav__link">
      04 索引元数据
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ElasticSearch/05-document%E8%B7%AF%E7%94%B1%E5%8E%9F%E7%90%86/" title="05 document路由原理" class="md-nav__link">
      05 document路由原理
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ElasticSearch/06-%E8%87%AA%E5%AE%9A%E4%B9%89%E5%88%86%E8%AF%8D%E5%99%A8/" title="06 自定义分词器" class="md-nav__link">
      06 自定义分词器
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ElasticSearch/07-%E9%87%8D%E5%BB%BA%E7%B4%A2%E5%BC%95/" title="07 重建索引" class="md-nav__link">
      07 重建索引
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      OpenStack
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        OpenStack
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/cinder/" title="Cinder" class="md-nav__link">
      Cinder
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/nova/" title="Nova" class="md-nav__link">
      Nova
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-3" type="checkbox" id="nav-7-3">
    
    <label class="md-nav__link" for="nav-7-3">
      01 openstack部署
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-7-3">
        01 openstack部署
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/01-openstack%E9%83%A8%E7%BD%B2/00-packstack%E9%83%A8%E7%BD%B2OpenStack/" title="00 packstack部署OpenStack" class="md-nav__link">
      00 packstack部署OpenStack
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/01-openstack%E9%83%A8%E7%BD%B2/01-openstack%E5%85%A5%E9%97%A8-horizon%E4%BD%BF%E7%94%A8/" title="01 openstack入门 horizon使用" class="md-nav__link">
      01 openstack入门 horizon使用
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/01-openstack%E9%83%A8%E7%BD%B2/OpenStack-rocky%E6%89%8B%E5%8A%A8%E9%83%A8%E7%BD%B2/" title="OpenStack rocky手动部署" class="md-nav__link">
      OpenStack rocky手动部署
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/01-openstack%E9%83%A8%E7%BD%B2/devstack/" title="Devstack" class="md-nav__link">
      Devstack
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-4" type="checkbox" id="nav-7-4">
    
    <label class="md-nav__link" for="nav-7-4">
      网络
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-7-4">
        网络
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-4-1" type="checkbox" id="nav-7-4-1">
    
    <label class="md-nav__link" for="nav-7-4-1">
      Dvr分析 抓包分析
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-7-4-1">
        Dvr分析 抓包分析
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/dvr%E5%88%86%E6%9E%90-%E6%8A%93%E5%8C%85%E5%88%86%E6%9E%90/01-floatingIP%E4%B8%8E%E5%A4%96%E7%BD%91%E4%BA%92%E8%AE%BF%E6%8A%93%E5%8C%85%E5%88%86%E6%9E%90/" title="01 floatingIP与外网互访抓包分析" class="md-nav__link">
      01 floatingIP与外网互访抓包分析
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/dvr%E5%88%86%E6%9E%90-%E6%8A%93%E5%8C%85%E5%88%86%E6%9E%90/02-%E6%97%A0floatingIP%E8%AE%BF%E9%97%AE%E5%A4%96%E7%BD%91%28vm%E8%AE%BF%E9%97%AEservice%20data%E7%BD%91%29%E6%8A%93%E5%8C%85%E5%88%86%E6%9E%90/" title="02 无floatingIP访问外网(vm访问service data网)抓包分析" class="md-nav__link">
      02 无floatingIP访问外网(vm访问service data网)抓包分析
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/dvr%E5%88%86%E6%9E%90-%E6%8A%93%E5%8C%85%E5%88%86%E6%9E%90/03-%E5%90%8C%E8%8A%82%E7%82%B9%E4%B8%9C%E8%A5%BF%E5%90%91%E8%B7%A8%E5%AD%90%E7%BD%91/" title="03 同节点东西向跨子网" class="md-nav__link">
      03 同节点东西向跨子网
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/dvr%E5%88%86%E6%9E%90-%E6%8A%93%E5%8C%85%E5%88%86%E6%9E%90/04-%E4%B8%8D%E5%90%8C%E8%8A%82%E7%82%B9%E4%B8%9C%E8%A5%BF%E5%90%91%E8%B7%A8%E5%AD%90%E7%BD%91/" title="04 不同节点东西向跨子网" class="md-nav__link">
      04 不同节点东西向跨子网
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/dvr%E5%88%86%E6%9E%90-%E6%8A%93%E5%8C%85%E5%88%86%E6%9E%90/05-%E5%90%8C%E5%AD%90%E7%BD%91%E4%B8%9C%E8%A5%BF%E5%90%91/" title="05 同子网东西向" class="md-nav__link">
      05 同子网东西向
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-4-2" type="checkbox" id="nav-7-4-2">
    
    <label class="md-nav__link" for="nav-7-4-2">
      openstack understand Neutron
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-7-4-2">
        openstack understand Neutron
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/" title="Index" class="md-nav__link">
      Index
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/SUMMARY/" title="Summary" class="md-nav__link">
      Summary
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-4-2-3" type="checkbox" id="nav-7-4-2-3">
    
    <label class="md-nav__link" for="nav-7-4-2-3">
       book
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-7-4-2-3">
         book
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-4-2-3-1" type="checkbox" id="nav-7-4-2-3-1">
    
    <label class="md-nav__link" for="nav-7-4-2-3-1">
      Compute node
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-7-4-2-3-1">
        Compute node
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/_book/compute_node/" title="计算节点" class="md-nav__link">
      计算节点
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-4-2-3-2" type="checkbox" id="nav-7-4-2-3-2">
    
    <label class="md-nav__link" for="nav-7-4-2-3-2">
      Vxlan mode
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-7-4-2-3-2">
        Vxlan mode
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-4-2-3-2-1" type="checkbox" id="nav-7-4-2-3-2-1">
    
    <label class="md-nav__link" for="nav-7-4-2-3-2-1">
      Compute node
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="6">
      <label class="md-nav__title" for="nav-7-4-2-3-2-1">
        Compute node
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/_book/vxlan_mode/compute_node/br-ex/" title="br-ex" class="md-nav__link">
      br-ex
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-4-2-4" type="checkbox" id="nav-7-4-2-4">
    
    <label class="md-nav__link" for="nav-7-4-2-4">
      Appendix install
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-7-4-2-4">
        Appendix install
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/appendix_install/" title="附：安装配置" class="md-nav__link">
      附：安装配置
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-4-2-5" type="checkbox" id="nav-7-4-2-5">
    
    <label class="md-nav__link" for="nav-7-4-2-5">
      Compute node
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-7-4-2-5">
        Compute node
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/compute_node/" title="计算节点" class="md-nav__link">
      计算节点
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-4-2-6" type="checkbox" id="nav-7-4-2-6">
    
    <label class="md-nav__link" for="nav-7-4-2-6">
      Concept
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-7-4-2-6">
        Concept
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/concept/" title="基本概念" class="md-nav__link">
      基本概念
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-4-2-7" type="checkbox" id="nav-7-4-2-7">
    
    <label class="md-nav__link" for="nav-7-4-2-7">
      Dvr
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-7-4-2-7">
        Dvr
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/dvr/" title="分布式路由" class="md-nav__link">
      分布式路由
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/dvr/compute_node/" title="Compute node" class="md-nav__link">
      Compute node
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/dvr/config/" title="Config" class="md-nav__link">
      Config
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/dvr/implementation/" title="Implementation" class="md-nav__link">
      Implementation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/dvr/network_node/" title="Network node" class="md-nav__link">
      Network node
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/dvr/scenario/" title="Scenario" class="md-nav__link">
      Scenario
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/dvr/workflow/" title="Workflow" class="md-nav__link">
      Workflow
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-4-2-8" type="checkbox" id="nav-7-4-2-8">
    
    <label class="md-nav__link" for="nav-7-4-2-8">
      Fwaas
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-7-4-2-8">
        Fwaas
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/fwaas/" title="防火墙即服务" class="md-nav__link">
      防火墙即服务
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/fwaas/arch/" title="Arch" class="md-nav__link">
      Arch
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/fwaas/other/" title="Other" class="md-nav__link">
      Other
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/fwaas/scenario/" title="Scenario" class="md-nav__link">
      Scenario
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-4-2-9" type="checkbox" id="nav-7-4-2-9">
    
    <label class="md-nav__link" for="nav-7-4-2-9">
      Gre mode
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-7-4-2-9">
        Gre mode
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/gre_mode/" title="GRE 模式" class="md-nav__link">
      GRE 模式
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/gre_mode/compute_node/" title="Compute node" class="md-nav__link">
      Compute node
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/gre_mode/network_node/" title="Network node" class="md-nav__link">
      Network node
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-4-2-10" type="checkbox" id="nav-7-4-2-10">
    
    <label class="md-nav__link" for="nav-7-4-2-10">
      Intro
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-7-4-2-10">
        Intro
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/intro/" title="概述" class="md-nav__link">
      概述
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-4-2-11" type="checkbox" id="nav-7-4-2-11">
    
    <label class="md-nav__link" for="nav-7-4-2-11">
      Lbaas
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-7-4-2-11">
        Lbaas
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/lbaas/" title="负载均衡即服务" class="md-nav__link">
      负载均衡即服务
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/lbaas/arch/" title="Arch" class="md-nav__link">
      Arch
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/lbaas/other/" title="Other" class="md-nav__link">
      Other
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/lbaas/scenario/" title="Scenario" class="md-nav__link">
      Scenario
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-4-2-12" type="checkbox" id="nav-7-4-2-12">
    
    <label class="md-nav__link" for="nav-7-4-2-12">
      Namespace
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-7-4-2-12">
        Namespace
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/namespace/" title="网络名字空间" class="md-nav__link">
      网络名字空间
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/namespace/dhcp/" title="Dhcp" class="md-nav__link">
      Dhcp
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/namespace/router/" title="Router" class="md-nav__link">
      Router
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-4-2-13" type="checkbox" id="nav-7-4-2-13">
    
    <label class="md-nav__link" for="nav-7-4-2-13">
      Node modules
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-7-4-2-13">
        Node modules
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-4-2-13-1" type="checkbox" id="nav-7-4-2-13-1">
    
    <label class="md-nav__link" for="nav-7-4-2-13-1">
      Boolbase
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-7-4-2-13-1">
        Boolbase
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/node_modules/boolbase/" title="Index" class="md-nav__link">
      Index
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-4-2-13-2" type="checkbox" id="nav-7-4-2-13-2">
    
    <label class="md-nav__link" for="nav-7-4-2-13-2">
      Cheerio
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-7-4-2-13-2">
        Cheerio
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/node_modules/cheerio/History/" title="History" class="md-nav__link">
      History
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/node_modules/cheerio/Readme/" title="Readme" class="md-nav__link">
      Readme
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-4-2-13-3" type="checkbox" id="nav-7-4-2-13-3">
    
    <label class="md-nav__link" for="nav-7-4-2-13-3">
      Css select
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-7-4-2-13-3">
        Css select
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/node_modules/css-select/" title="css-select [![NPM version](http://img.shields.io/npm/v/css-select.svg)](https://npmjs.org/package/css-select) [![Build Status](https://travis-ci.org/fb55/css-select.svg?branch=master)](http://travis-ci.org/fb55/css-select) [![Downloads](https://img.shields.io/npm/dm/css-select.svg)](https://npmjs.org/package/css-select) [![Coverage](https://coveralls.io/repos/fb55/css-select/badge.svg?branch=master)](https://coveralls.io/r/fb55/css-select)" class="md-nav__link">
      css-select [![NPM version](http://img.shields.io/npm/v/css-select.svg)](https://npmjs.org/package/css-select) [![Build Status](https://travis-ci.org/fb55/css-select.svg?branch=master)](http://travis-ci.org/fb55/css-select) [![Downloads](https://img.shields.io/npm/dm/css-select.svg)](https://npmjs.org/package/css-select) [![Coverage](https://coveralls.io/repos/fb55/css-select/badge.svg?branch=master)](https://coveralls.io/r/fb55/css-select)
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-4-2-13-4" type="checkbox" id="nav-7-4-2-13-4">
    
    <label class="md-nav__link" for="nav-7-4-2-13-4">
      Css what
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-7-4-2-13-4">
        Css what
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/node_modules/css-what/readme/" title="css-what [![Build Status](https://secure.travis-ci.org/fb55/css-what.svg?branch=master)](http://travis-ci.org/fb55/css-what)" class="md-nav__link">
      css-what [![Build Status](https://secure.travis-ci.org/fb55/css-what.svg?branch=master)](http://travis-ci.org/fb55/css-what)
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-4-2-13-5" type="checkbox" id="nav-7-4-2-13-5">
    
    <label class="md-nav__link" for="nav-7-4-2-13-5">
      Domelementtype
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-7-4-2-13-5">
        Domelementtype
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/node_modules/domelementtype/readme/" title="Readme" class="md-nav__link">
      Readme
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-4-2-13-6" type="checkbox" id="nav-7-4-2-13-6">
    
    <label class="md-nav__link" for="nav-7-4-2-13-6">
      Domhandler
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-7-4-2-13-6">
        Domhandler
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/node_modules/domhandler/readme/" title="domhandler [![Build Status](https://travis-ci.org/fb55/domhandler.svg?branch=master)](https://travis-ci.org/fb55/domhandler)" class="md-nav__link">
      domhandler [![Build Status](https://travis-ci.org/fb55/domhandler.svg?branch=master)](https://travis-ci.org/fb55/domhandler)
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-4-2-13-7" type="checkbox" id="nav-7-4-2-13-7">
    
    <label class="md-nav__link" for="nav-7-4-2-13-7">
      Domutils
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-7-4-2-13-7">
        Domutils
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/node_modules/domutils/readme/" title="Readme" class="md-nav__link">
      Readme
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-4-2-13-8" type="checkbox" id="nav-7-4-2-13-8">
    
    <label class="md-nav__link" for="nav-7-4-2-13-8">
      Entities
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-7-4-2-13-8">
        Entities
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/node_modules/entities/readme/" title="entities [![NPM version](http://img.shields.io/npm/v/entities.svg)](https://npmjs.org/package/entities) [![Downloads](https://img.shields.io/npm/dm/entities.svg)](https://npmjs.org/package/entities) [![Build Status](http://img.shields.io/travis/fb55/entities.svg)](http://travis-ci.org/fb55/entities) [![Coverage](http://img.shields.io/coveralls/fb55/entities.svg)](https://coveralls.io/r/fb55/entities)" class="md-nav__link">
      entities [![NPM version](http://img.shields.io/npm/v/entities.svg)](https://npmjs.org/package/entities)  [![Downloads](https://img.shields.io/npm/dm/entities.svg)](https://npmjs.org/package/entities) [![Build Status](http://img.shields.io/travis/fb55/entities.svg)](http://travis-ci.org/fb55/entities) [![Coverage](http://img.shields.io/coveralls/fb55/entities.svg)](https://coveralls.io/r/fb55/entities)
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-4-2-13-9" type="checkbox" id="nav-7-4-2-13-9">
    
    <label class="md-nav__link" for="nav-7-4-2-13-9">
      Gitbook plugin back to top button
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-7-4-2-13-9">
        Gitbook plugin back to top button
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/node_modules/gitbook-plugin-back-to-top-button/" title="Gitbook Back to Top Button Plugin [![npm version](https://badge.fury.io/js/gitbook-plugin-back-to-top-button.svg)](https://badge.fury.io/js/gitbook-plugin-back-to-top-button)" class="md-nav__link">
      Gitbook Back to Top Button Plugin [![npm version](https://badge.fury.io/js/gitbook-plugin-back-to-top-button.svg)](https://badge.fury.io/js/gitbook-plugin-back-to-top-button)
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-4-2-13-10" type="checkbox" id="nav-7-4-2-13-10">
    
    <label class="md-nav__link" for="nav-7-4-2-13-10">
      Gitbook plugin chapter fold
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-7-4-2-13-10">
        Gitbook plugin chapter fold
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/node_modules/gitbook-plugin-chapter-fold/" title="Index" class="md-nav__link">
      Index
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-4-2-13-11" type="checkbox" id="nav-7-4-2-13-11">
    
    <label class="md-nav__link" for="nav-7-4-2-13-11">
      Gitbook plugin code
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-7-4-2-13-11">
        Gitbook plugin code
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/node_modules/gitbook-plugin-code/" title="Code plugin for GitBook" class="md-nav__link">
      Code plugin for GitBook
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-4-2-13-12" type="checkbox" id="nav-7-4-2-13-12">
    
    <label class="md-nav__link" for="nav-7-4-2-13-12">
      Gitbook plugin copy code button
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-7-4-2-13-12">
        Gitbook plugin copy code button
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/node_modules/gitbook-plugin-copy-code-button/" title="Copy Code to Clipboard on GitBook" class="md-nav__link">
      Copy Code to Clipboard on GitBook
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-4-2-13-13" type="checkbox" id="nav-7-4-2-13-13">
    
    <label class="md-nav__link" for="nav-7-4-2-13-13">
      Gitbook plugin expandable chapters
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-7-4-2-13-13">
        Gitbook plugin expandable chapters
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/node_modules/gitbook-plugin-expandable-chapters/" title="Index" class="md-nav__link">
      Index
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-4-2-13-14" type="checkbox" id="nav-7-4-2-13-14">
    
    <label class="md-nav__link" for="nav-7-4-2-13-14">
      Gitbook plugin highlight
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-7-4-2-13-14">
        Gitbook plugin highlight
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/node_modules/gitbook-plugin-highlight/" title="Code highlighting in GitBook" class="md-nav__link">
      Code highlighting in GitBook
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-4-2-13-15" type="checkbox" id="nav-7-4-2-13-15">
    
    <label class="md-nav__link" for="nav-7-4-2-13-15">
      Gitbook plugin page toc button
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-7-4-2-13-15">
        Gitbook plugin page toc button
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/node_modules/gitbook-plugin-page-toc-button/" title="Gitbook Page TOC Button Plugin [![npm version](https://badge.fury.io/js/gitbook-plugin-page-toc-button.svg)](https://badge.fury.io/js/gitbook-plugin-page-toc-button)" class="md-nav__link">
      Gitbook Page TOC Button Plugin [![npm version](https://badge.fury.io/js/gitbook-plugin-page-toc-button.svg)](https://badge.fury.io/js/gitbook-plugin-page-toc-button)
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-4-2-13-16" type="checkbox" id="nav-7-4-2-13-16">
    
    <label class="md-nav__link" for="nav-7-4-2-13-16">
      Gitbook plugin popup
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-7-4-2-13-16">
        Gitbook plugin popup
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/node_modules/gitbook-plugin-popup/" title="Gitbook-plugin-popup" class="md-nav__link">
      Gitbook-plugin-popup
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-4-2-13-17" type="checkbox" id="nav-7-4-2-13-17">
    
    <label class="md-nav__link" for="nav-7-4-2-13-17">
      Gitbook plugin prism
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-7-4-2-13-17">
        Gitbook plugin prism
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/node_modules/gitbook-plugin-prism/" title="Index" class="md-nav__link">
      Index
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-4-2-13-18" type="checkbox" id="nav-7-4-2-13-18">
    
    <label class="md-nav__link" for="nav-7-4-2-13-18">
      Gitbook plugin search pro
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-7-4-2-13-18">
        Gitbook plugin search pro
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/node_modules/gitbook-plugin-search-pro/" title="Index" class="md-nav__link">
      Index
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-4-2-13-19" type="checkbox" id="nav-7-4-2-13-19">
    
    <label class="md-nav__link" for="nav-7-4-2-13-19">
      Highlight.js
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-7-4-2-13-19">
        Highlight.js
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/node_modules/highlight.js/" title="Highlight.js" class="md-nav__link">
      Highlight.js
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-4-2-13-20" type="checkbox" id="nav-7-4-2-13-20">
    
    <label class="md-nav__link" for="nav-7-4-2-13-20">
      Html entities
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-7-4-2-13-20">
        Html entities
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/node_modules/html-entities/" title="Index" class="md-nav__link">
      Index
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-4-2-13-21" type="checkbox" id="nav-7-4-2-13-21">
    
    <label class="md-nav__link" for="nav-7-4-2-13-21">
      Htmlparser2
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-7-4-2-13-21">
        Htmlparser2
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/node_modules/htmlparser2/" title="htmlparser2" class="md-nav__link">
      htmlparser2
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-4-2-13-22" type="checkbox" id="nav-7-4-2-13-22">
    
    <label class="md-nav__link" for="nav-7-4-2-13-22">
      Inherits
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-7-4-2-13-22">
        Inherits
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/node_modules/inherits/" title="Index" class="md-nav__link">
      Index
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-4-2-13-23" type="checkbox" id="nav-7-4-2-13-23">
    
    <label class="md-nav__link" for="nav-7-4-2-13-23">
      Lodash.assignin
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-7-4-2-13-23">
        Lodash.assignin
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/node_modules/lodash.assignin/" title="lodash.assignin v4.2.0" class="md-nav__link">
      lodash.assignin v4.2.0
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-4-2-13-24" type="checkbox" id="nav-7-4-2-13-24">
    
    <label class="md-nav__link" for="nav-7-4-2-13-24">
      Lodash.bind
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-7-4-2-13-24">
        Lodash.bind
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/node_modules/lodash.bind/" title="lodash.bind v4.2.1" class="md-nav__link">
      lodash.bind v4.2.1
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-4-2-13-25" type="checkbox" id="nav-7-4-2-13-25">
    
    <label class="md-nav__link" for="nav-7-4-2-13-25">
      Lodash.defaults
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-7-4-2-13-25">
        Lodash.defaults
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/node_modules/lodash.defaults/" title="lodash.defaults v4.2.0" class="md-nav__link">
      lodash.defaults v4.2.0
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-4-2-13-26" type="checkbox" id="nav-7-4-2-13-26">
    
    <label class="md-nav__link" for="nav-7-4-2-13-26">
      Lodash.filter
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-7-4-2-13-26">
        Lodash.filter
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/node_modules/lodash.filter/" title="lodash.filter v4.6.0" class="md-nav__link">
      lodash.filter v4.6.0
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-4-2-13-27" type="checkbox" id="nav-7-4-2-13-27">
    
    <label class="md-nav__link" for="nav-7-4-2-13-27">
      Lodash.flatten
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-7-4-2-13-27">
        Lodash.flatten
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/node_modules/lodash.flatten/" title="lodash.flatten v4.4.0" class="md-nav__link">
      lodash.flatten v4.4.0
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-4-2-13-28" type="checkbox" id="nav-7-4-2-13-28">
    
    <label class="md-nav__link" for="nav-7-4-2-13-28">
      Lodash.foreach
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-7-4-2-13-28">
        Lodash.foreach
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/node_modules/lodash.foreach/" title="lodash.foreach v4.5.0" class="md-nav__link">
      lodash.foreach v4.5.0
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-4-2-13-29" type="checkbox" id="nav-7-4-2-13-29">
    
    <label class="md-nav__link" for="nav-7-4-2-13-29">
      Lodash.map
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-7-4-2-13-29">
        Lodash.map
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/node_modules/lodash.map/" title="lodash.map v4.6.0" class="md-nav__link">
      lodash.map v4.6.0
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-4-2-13-30" type="checkbox" id="nav-7-4-2-13-30">
    
    <label class="md-nav__link" for="nav-7-4-2-13-30">
      Lodash.merge
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-7-4-2-13-30">
        Lodash.merge
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/node_modules/lodash.merge/" title="lodash.merge v4.6.2" class="md-nav__link">
      lodash.merge v4.6.2
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-4-2-13-31" type="checkbox" id="nav-7-4-2-13-31">
    
    <label class="md-nav__link" for="nav-7-4-2-13-31">
      Lodash.pick
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-7-4-2-13-31">
        Lodash.pick
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/node_modules/lodash.pick/" title="lodash.pick v4.4.0" class="md-nav__link">
      lodash.pick v4.4.0
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-4-2-13-32" type="checkbox" id="nav-7-4-2-13-32">
    
    <label class="md-nav__link" for="nav-7-4-2-13-32">
      Lodash.reduce
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-7-4-2-13-32">
        Lodash.reduce
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/node_modules/lodash.reduce/" title="lodash.reduce v4.6.0" class="md-nav__link">
      lodash.reduce v4.6.0
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-4-2-13-33" type="checkbox" id="nav-7-4-2-13-33">
    
    <label class="md-nav__link" for="nav-7-4-2-13-33">
      Lodash.reject
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-7-4-2-13-33">
        Lodash.reject
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/node_modules/lodash.reject/" title="lodash.reject v4.6.0" class="md-nav__link">
      lodash.reject v4.6.0
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-4-2-13-34" type="checkbox" id="nav-7-4-2-13-34">
    
    <label class="md-nav__link" for="nav-7-4-2-13-34">
      Lodash.some
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-7-4-2-13-34">
        Lodash.some
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/node_modules/lodash.some/" title="lodash.some v4.6.0" class="md-nav__link">
      lodash.some v4.6.0
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-4-2-13-35" type="checkbox" id="nav-7-4-2-13-35">
    
    <label class="md-nav__link" for="nav-7-4-2-13-35">
      Minimist
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-7-4-2-13-35">
        Minimist
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/node_modules/minimist/readme/" title="minimist" class="md-nav__link">
      minimist
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-4-2-13-36" type="checkbox" id="nav-7-4-2-13-36">
    
    <label class="md-nav__link" for="nav-7-4-2-13-36">
      Mkdirp
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-7-4-2-13-36">
        Mkdirp
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/node_modules/mkdirp/readme/" title="mkdirp" class="md-nav__link">
      mkdirp
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-4-2-13-37" type="checkbox" id="nav-7-4-2-13-37">
    
    <label class="md-nav__link" for="nav-7-4-2-13-37">
      Nth check
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-7-4-2-13-37">
        Nth check
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/node_modules/nth-check/" title="nth-check [![Build Status](https://travis-ci.org/fb55/nth-check.svg)](https://travis-ci.org/fb55/nth-check)" class="md-nav__link">
      nth-check [![Build Status](https://travis-ci.org/fb55/nth-check.svg)](https://travis-ci.org/fb55/nth-check)
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-4-2-13-38" type="checkbox" id="nav-7-4-2-13-38">
    
    <label class="md-nav__link" for="nav-7-4-2-13-38">
      Prismjs
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-7-4-2-13-38">
        Prismjs
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/node_modules/prismjs/" title="[Prism](https://prismjs.com/)" class="md-nav__link">
      [Prism](https://prismjs.com/)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/node_modules/prismjs/CHANGELOG/" title="Prism Changelog" class="md-nav__link">
      Prism Changelog
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-4-2-13-39" type="checkbox" id="nav-7-4-2-13-39">
    
    <label class="md-nav__link" for="nav-7-4-2-13-39">
      Readable stream
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-7-4-2-13-39">
        Readable stream
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/node_modules/readable-stream/" title="readable-stream" class="md-nav__link">
      readable-stream
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/node_modules/readable-stream/CONTRIBUTING/" title="Developer's Certificate of Origin 1.1" class="md-nav__link">
      Developer's Certificate of Origin 1.1
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/node_modules/readable-stream/GOVERNANCE/" title="GOVERNANCE" class="md-nav__link">
      GOVERNANCE
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-4-2-13-40" type="checkbox" id="nav-7-4-2-13-40">
    
    <label class="md-nav__link" for="nav-7-4-2-13-40">
      Safe buffer
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-7-4-2-13-40">
        Safe buffer
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/node_modules/safe-buffer/" title="safe-buffer [![travis][travis-image]][travis-url] [![npm][npm-image]][npm-url] [![downloads][downloads-image]][downloads-url] [![javascript style guide][standard-image]][standard-url]" class="md-nav__link">
      safe-buffer [![travis][travis-image]][travis-url] [![npm][npm-image]][npm-url] [![downloads][downloads-image]][downloads-url] [![javascript style guide][standard-image]][standard-url]
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-4-2-13-41" type="checkbox" id="nav-7-4-2-13-41">
    
    <label class="md-nav__link" for="nav-7-4-2-13-41">
      String decoder
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-7-4-2-13-41">
        String decoder
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/node_modules/string_decoder/" title="string_decoder" class="md-nav__link">
      string_decoder
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-4-2-13-42" type="checkbox" id="nav-7-4-2-13-42">
    
    <label class="md-nav__link" for="nav-7-4-2-13-42">
      Util deprecate
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-7-4-2-13-42">
        Util deprecate
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/node_modules/util-deprecate/" title="Index" class="md-nav__link">
      Index
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/node_modules/util-deprecate/History/" title="History" class="md-nav__link">
      History
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-4-2-14" type="checkbox" id="nav-7-4-2-14">
    
    <label class="md-nav__link" for="nav-7-4-2-14">
      Ref
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-7-4-2-14">
        Ref
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/ref/" title="参考" class="md-nav__link">
      参考
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-4-2-15" type="checkbox" id="nav-7-4-2-15">
    
    <label class="md-nav__link" for="nav-7-4-2-15">
      Security group
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-7-4-2-15">
        Security group
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/security_group/" title="安全组" class="md-nav__link">
      安全组
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/security_group/forward/" title="Forward" class="md-nav__link">
      Forward
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/security_group/global_logic/" title="Global logic" class="md-nav__link">
      Global logic
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/security_group/input/" title="Input" class="md-nav__link">
      Input
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/security_group/other/" title="Other" class="md-nav__link">
      Other
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/security_group/output/" title="Output" class="md-nav__link">
      Output
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/security_group/quick_find/" title="快速查找安全组规则" class="md-nav__link">
      快速查找安全组规则
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-4-2-16" type="checkbox" id="nav-7-4-2-16">
    
    <label class="md-nav__link" for="nav-7-4-2-16">
      Tool
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-7-4-2-16">
        Tool
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/tool/" title="工具" class="md-nav__link">
      工具
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/tool/easyovs/" title="Easyovs" class="md-nav__link">
      Easyovs
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-4-2-17" type="checkbox" id="nav-7-4-2-17">
    
    <label class="md-nav__link" for="nav-7-4-2-17">
      Vlan mode
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-7-4-2-17">
        Vlan mode
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/vlan_mode/" title="VLAN 模式" class="md-nav__link">
      VLAN 模式
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/vlan_mode/compute_node/" title="Compute node" class="md-nav__link">
      Compute node
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/vlan_mode/network_node/" title="Network node" class="md-nav__link">
      Network node
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-4-2-18" type="checkbox" id="nav-7-4-2-18">
    
    <label class="md-nav__link" for="nav-7-4-2-18">
      Vxlan mode
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-7-4-2-18">
        Vxlan mode
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/vxlan_mode/" title="VXLAN 模式" class="md-nav__link">
      VXLAN 模式
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-4-2-18-2" type="checkbox" id="nav-7-4-2-18-2">
    
    <label class="md-nav__link" for="nav-7-4-2-18-2">
      Compute node
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-7-4-2-18-2">
        Compute node
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/vxlan_mode/compute_node/" title="Index" class="md-nav__link">
      Index
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/vxlan_mode/compute_node/br-ex/" title="br-ex" class="md-nav__link">
      br-ex
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/vxlan_mode/compute_node/br-int/" title="Br int" class="md-nav__link">
      Br int
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/vxlan_mode/compute_node/br-tun/" title="Br tun" class="md-nav__link">
      Br tun
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-4-2-18-3" type="checkbox" id="nav-7-4-2-18-3">
    
    <label class="md-nav__link" for="nav-7-4-2-18-3">
      Network node
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-7-4-2-18-3">
        Network node
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/vxlan_mode/network_node/" title="Index" class="md-nav__link">
      Index
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/vxlan_mode/network_node/br-ex/" title="Br ex" class="md-nav__link">
      Br ex
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/vxlan_mode/network_node/br-int/" title="Br int" class="md-nav__link">
      Br int
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/openstack_understand_Neutron/vxlan_mode/network_node/br-tun/" title="Br tun" class="md-nav__link">
      Br tun
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-4-3" type="checkbox" id="nav-7-4-3">
    
    <label class="md-nav__link" for="nav-7-4-3">
      手动模拟实现OpenStack网络
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-7-4-3">
        手动模拟实现OpenStack网络
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/%E6%89%8B%E5%8A%A8%E6%A8%A1%E6%8B%9F%E5%AE%9E%E7%8E%B0OpenStack%E7%BD%91%E7%BB%9C/00-ovs%E9%A2%84%E5%A4%87%E7%9F%A5%E8%AF%86/" title="00 ovs预备知识" class="md-nav__link">
      00 ovs预备知识
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/%E6%89%8B%E5%8A%A8%E6%A8%A1%E6%8B%9F%E5%AE%9E%E7%8E%B0OpenStack%E7%BD%91%E7%BB%9C/00-%E9%A2%84%E5%A4%87%E7%9F%A5%E8%AF%86/" title="00 预备知识" class="md-nav__link">
      00 预备知识
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/%E6%89%8B%E5%8A%A8%E6%A8%A1%E6%8B%9F%E5%AE%9E%E7%8E%B0OpenStack%E7%BD%91%E7%BB%9C/01-%E5%8D%95%E5%AE%BF%E4%B8%BB%E6%9C%BA%E7%9A%84%E8%99%9A%E6%8B%9F%E6%9C%BA%E9%80%9A%E4%BF%A1/" title="虚拟机访问外网" class="md-nav__link">
      虚拟机访问外网
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/%E6%89%8B%E5%8A%A8%E6%A8%A1%E6%8B%9F%E5%AE%9E%E7%8E%B0OpenStack%E7%BD%91%E7%BB%9C/02-ovs%E6%A1%A5%E4%B8%8EVLAN/" title="02 ovs桥与VLAN" class="md-nav__link">
      02 ovs桥与VLAN
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/%E6%89%8B%E5%8A%A8%E6%A8%A1%E6%8B%9F%E5%AE%9E%E7%8E%B0OpenStack%E7%BD%91%E7%BB%9C/03-GRE%E4%B8%8EVLAN/" title="03 GRE与VLAN" class="md-nav__link">
      03 GRE与VLAN
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/%E6%89%8B%E5%8A%A8%E6%A8%A1%E6%8B%9F%E5%AE%9E%E7%8E%B0OpenStack%E7%BD%91%E7%BB%9C/04-VXLAN%E9%9A%A7%E9%81%93/" title="04 VXLAN隧道" class="md-nav__link">
      04 VXLAN隧道
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenStack/%E7%BD%91%E7%BB%9C/%E6%89%8B%E5%8A%A8%E6%A8%A1%E6%8B%9F%E5%AE%9E%E7%8E%B0OpenStack%E7%BD%91%E7%BB%9C/05-VXLAN%E9%9A%A7%E9%81%93%E4%B8%8EFloating%20IP/" title="05 VXLAN隧道与Floating IP" class="md-nav__link">
      05 VXLAN隧道与Floating IP
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      Ceph
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        Ceph
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Ceph/rbd%E8%AF%95%E9%AA%8C%28%E8%87%AA%E6%B5%8B%29/" title="Rbd试验(自测)" class="md-nav__link">
      Rbd试验(自测)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Ceph/%E5%85%B6%E4%BB%96%E6%8E%A8%E8%8D%90/" title="其他推荐" class="md-nav__link">
      其他推荐
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-3" type="checkbox" id="nav-8-3">
    
    <label class="md-nav__link" for="nav-8-3">
      01 ceph 基础
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-8-3">
        01 ceph 基础
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Ceph/01-ceph-%E5%9F%BA%E7%A1%80/00-Ceph%E6%A6%82%E5%BF%B5%E4%B8%8E%E5%8E%9F%E7%90%86/" title="00 Ceph概念与原理" class="md-nav__link">
      00 Ceph概念与原理
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Ceph/01-ceph-%E5%9F%BA%E7%A1%80/01-ceph-deploy%E9%83%A8%E7%BD%B2%EF%BC%88cephadm%E7%94%A8%E6%88%B7%EF%BC%89/" title="01 ceph-deploy部署" class="md-nav__link">
      01 ceph-deploy部署
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Ceph/01-ceph-%E5%9F%BA%E7%A1%80/02-ceph%E7%AE%A1%E7%90%86%E4%BB%8B%E7%BB%8D/" title="02 ceph管理介绍" class="md-nav__link">
      02 ceph管理介绍
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Ceph/01-ceph-%E5%9F%BA%E7%A1%80/02-ceph%E9%9B%86%E7%BE%A4%E8%BF%90%E7%BB%B4/" title="02 ceph集群运维" class="md-nav__link">
      02 ceph集群运维
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Ceph/01-ceph-%E5%9F%BA%E7%A1%80/03-CephX%E8%AE%A4%E8%AF%81%E4%B8%8E%E6%8E%88%E6%9D%83/" title="03 CephX认证与授权" class="md-nav__link">
      03 CephX认证与授权
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Ceph/01-ceph-%E5%9F%BA%E7%A1%80/04-%E5%AD%98%E5%82%A8%E6%B1%A0Pool%E6%93%8D%E4%BD%9C/" title="04 存储池Pool操作" class="md-nav__link">
      04 存储池Pool操作
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Ceph/01-ceph-%E5%9F%BA%E7%A1%80/05-RBD/" title="05 RBD" class="md-nav__link">
      05 RBD
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Ceph/01-ceph-%E5%9F%BA%E7%A1%80/06-CephFS/" title="06 CephFS" class="md-nav__link">
      06 CephFS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Ceph/01-ceph-%E5%9F%BA%E7%A1%80/07-RadosGW/" title="07 RadosGW" class="md-nav__link">
      07 RadosGW
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Ceph/01-ceph-%E5%9F%BA%E7%A1%80/08-%E8%B0%83%E5%88%B6CRUSH/" title="08 调制CRUSH" class="md-nav__link">
      08 调制CRUSH
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Ceph/01-ceph-%E5%9F%BA%E7%A1%80/09-OSD%E6%89%A9%E5%AE%B9%E4%B8%8E%E6%8D%A2%E7%9B%98/" title="09 OSD扩容与换盘" class="md-nav__link">
      09 OSD扩容与换盘
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Ceph/01-ceph-%E5%9F%BA%E7%A1%80/10-%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4/" title="10 高可用集群" class="md-nav__link">
      10 高可用集群
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Ceph/01-ceph-%E5%9F%BA%E7%A1%80/11-%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95/" title="11 性能测试" class="md-nav__link">
      11 性能测试
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Ceph/01-ceph-%E5%9F%BA%E7%A1%80/12-ceph%E5%AF%B9%E6%8E%A5k8s/" title="12 ceph对接k8s" class="md-nav__link">
      12 ceph对接k8s
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Ceph/01-ceph-%E5%9F%BA%E7%A1%80/13-ceph-dashboard/" title="13 ceph dashboard" class="md-nav__link">
      13 ceph dashboard
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-4" type="checkbox" id="nav-8-4">
    
    <label class="md-nav__link" for="nav-8-4">
      02 ceph handbook
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-8-4">
        02 ceph handbook
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Ceph/02-ceph-handbook/" title="简介" class="md-nav__link">
      简介
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Ceph/02-ceph-handbook/SUMMARY/" title="Summary" class="md-nav__link">
      Summary
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-4-3" type="checkbox" id="nav-8-4-3">
    
    <label class="md-nav__link" for="nav-8-4-3">
      Advance usage
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-8-4-3">
        Advance usage
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Ceph/02-ceph-handbook/Advance_usage/advanced_usage/" title="第三部分：Ceph 进阶" class="md-nav__link">
      第三部分：Ceph 进阶
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Ceph/02-ceph-handbook/Advance_usage/cal_pg_per_osd/" title="9. 统计 OSD 上 PG 的数量" class="md-nav__link">
      9. 统计 OSD 上 PG 的数量
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Ceph/02-ceph-handbook/Advance_usage/change_fd/" title="3. 修改 Cinder/Glance 进程的最大可用 FD" class="md-nav__link">
      3. 修改 Cinder/Glance 进程的最大可用 FD
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Ceph/02-ceph-handbook/Advance_usage/change_osd_journal/" title="4. 更换 OSD Journal" class="md-nav__link">
      4. 更换 OSD Journal
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Ceph/02-ceph-handbook/Advance_usage/find_rbd_data_loc/" title="7. 查看 RBD 镜像的位置" class="md-nav__link">
      7. 查看 RBD 镜像的位置
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Ceph/02-ceph-handbook/Advance_usage/list_rbd_watcher/" title="10. 查看使用 RBD 镜像的客户端" class="md-nav__link">
      10. 查看使用 RBD 镜像的客户端
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Ceph/02-ceph-handbook/Advance_usage/mon_backup/" title="2. Monitor 的备份和恢复" class="md-nav__link">
      2. Monitor 的备份和恢复
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Ceph/02-ceph-handbook/Advance_usage/pg_active_remapped/" title="6. PG 卡在 active + remapped 状态" class="md-nav__link">
      6. PG 卡在 active + remapped 状态
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Ceph/02-ceph-handbook/Advance_usage/pg_pgp/" title="1. PG 和 PGP 的区别" class="md-nav__link">
      1. PG 和 PGP 的区别
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Ceph/02-ceph-handbook/Advance_usage/rbd_real_size/" title="8. 查看 RBD 镜像的实际大小" class="md-nav__link">
      8. 查看 RBD 镜像的实际大小
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Ceph/02-ceph-handbook/Advance_usage/rescue_osd_parted/" title="5. 清空 OSD 的分区表后如何恢复" class="md-nav__link">
      5. 清空 OSD 的分区表后如何恢复
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-4-4" type="checkbox" id="nav-8-4-4">
    
    <label class="md-nav__link" for="nav-8-4-4">
      Operation
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-8-4-4">
        Operation
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Ceph/02-ceph-handbook/Operation/add_rm_mon/" title="6. 增加/删除 Monitor" class="md-nav__link">
      6. 增加/删除 Monitor
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Ceph/02-ceph-handbook/Operation/add_rm_osd/" title="7. 增加/删除 OSD" class="md-nav__link">
      7. 增加/删除 OSD
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Ceph/02-ceph-handbook/Operation/change_cluster_conf/" title="11. 修改集群配置" class="md-nav__link">
      11. 修改集群配置
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Ceph/02-ceph-handbook/Operation/common_operations/" title="第一部分：常用操作" class="md-nav__link">
      第一部分：常用操作
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Ceph/02-ceph-handbook/Operation/log_debug/" title="12. 日志和调试" class="md-nav__link">
      12. 日志和调试
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Ceph/02-ceph-handbook/Operation/manage_crushmap/" title="9. 管理 Crushmap" class="md-nav__link">
      9. 管理 Crushmap
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Ceph/02-ceph-handbook/Operation/modify_mon_ip/" title="10. 修改 MON IP" class="md-nav__link">
      10. 修改 MON IP
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Ceph/02-ceph-handbook/Operation/monitor_cluster/" title="2. 监控集群" class="md-nav__link">
      2. 监控集群
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Ceph/02-ceph-handbook/Operation/monitor_osd/" title="3. 监控 OSD" class="md-nav__link">
      3. 监控 OSD
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Ceph/02-ceph-handbook/Operation/monitor_pg/" title="4. 监控 PG" class="md-nav__link">
      4. 监控 PG
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Ceph/02-ceph-handbook/Operation/operate_cluster/" title="1. 操作集群" class="md-nav__link">
      1. 操作集群
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Ceph/02-ceph-handbook/Operation/operate_pool/" title="8. 操作 Pool" class="md-nav__link">
      8. 操作 Pool
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Ceph/02-ceph-handbook/Operation/user_management/" title="5. 用户管理" class="md-nav__link">
      5. 用户管理
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-4-5" type="checkbox" id="nav-8-4-5">
    
    <label class="md-nav__link" for="nav-8-4-5">
      Troubleshooting
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-8-4-5">
        Troubleshooting
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Ceph/02-ceph-handbook/Troubleshooting/troubleshooting/" title="第二部分：故障处理" class="md-nav__link">
      第二部分：故障处理
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Ceph/02-ceph-handbook/Troubleshooting/troubleshooting_lost_power/" title="4. 全局Ceph节点宕机处理" class="md-nav__link">
      4. 全局Ceph节点宕机处理
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Ceph/02-ceph-handbook/Troubleshooting/troubleshooting_mon/" title="1. 常见 MON 故障处理" class="md-nav__link">
      1. 常见 MON 故障处理
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Ceph/02-ceph-handbook/Troubleshooting/troubleshooting_osd/" title="2. 常见 OSD 故障处理" class="md-nav__link">
      2. 常见 OSD 故障处理
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Ceph/02-ceph-handbook/Troubleshooting/troubleshooting_pg/" title="3. 常见 PG 故障处理" class="md-nav__link">
      3. 常见 PG 故障处理
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Ceph/02-ceph-handbook/Troubleshooting/troubleshooting_single_lost_power/" title="5. 单个Ceph节点宕机处理" class="md-nav__link">
      5. 单个Ceph节点宕机处理
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-5" type="checkbox" id="nav-8-5">
    
    <label class="md-nav__link" for="nav-8-5">
      03 ceph 徐小胖blog
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-8-5">
        03 ceph 徐小胖blog
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Ceph/03-ceph-%E5%BE%90%E5%B0%8F%E8%83%96blog/00-README/" title="00 README" class="md-nav__link">
      00 README
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Ceph/03-ceph-%E5%BE%90%E5%B0%8F%E8%83%96blog/01-Ceph%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87--%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%90%AD%E5%BB%BA/" title="Ceph环境准备--虚拟机搭建" class="md-nav__link">
      Ceph环境准备--虚拟机搭建
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Ceph/03-ceph-%E5%BE%90%E5%B0%8F%E8%83%96blog/02-Ceph%20%E5%BF%AB%E9%80%9F%E9%83%A8%E7%BD%B2%28Centos7%2BJewel%29/" title="02-Ceph 快速部署(Centos7+Jewel)" class="md-nav__link">
      02-Ceph 快速部署(Centos7+Jewel)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Ceph/03-ceph-%E5%BE%90%E5%B0%8F%E8%83%96blog/03-%E5%A4%A7%E8%AF%9DCeph--PG%E9%82%A3%E7%82%B9%E4%BA%8B%E5%84%BF/" title="03 大话Ceph PG那点事儿" class="md-nav__link">
      03 大话Ceph  PG那点事儿
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Ceph/03-ceph-%E5%BE%90%E5%B0%8F%E8%83%96blog/04-Ceph%20%E9%83%A8%E7%BD%B2%E5%AE%8C%E6%95%B4%E7%89%88%28el7%2Bjewel%29/" title="Ceph 部署完整版(el7+jewel)" class="md-nav__link">
      Ceph 部署完整版(el7+jewel)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Ceph/03-ceph-%E5%BE%90%E5%B0%8F%E8%83%96blog/05-Ceph%E8%AF%95%E9%AA%8C/" title="Ceph 实验" class="md-nav__link">
      Ceph 实验
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Ceph/03-ceph-%E5%BE%90%E5%B0%8F%E8%83%96blog/06-%E5%A4%A7%E8%AF%9DCeph--RBD%E9%82%A3%E7%82%B9%E4%BA%8B%E5%84%BF/" title="大话Ceph--RBD那点事儿" class="md-nav__link">
      大话Ceph--RBD那点事儿
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Ceph/03-ceph-%E5%BE%90%E5%B0%8F%E8%83%96blog/07-osdmap%E6%8F%90%E5%8F%96crushmap%20/" title="osdmap提取crushmap" class="md-nav__link">
      osdmap提取crushmap
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Ceph/03-ceph-%E5%BE%90%E5%B0%8F%E8%83%96blog/08-monitor%E7%9A%84%E5%A2%9E%E5%88%A0%E6%94%B9%E5%A4%87/" title="monitor的增删改备" class="md-nav__link">
      monitor的增删改备
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Ceph/03-ceph-%E5%BE%90%E5%B0%8F%E8%83%96blog/09-Ceph%20%E5%92%8C%E9%98%B2%E7%81%AB%E5%A2%99%E7%9A%84%E6%95%85%E4%BA%8B/" title="Ceph 和防火墙的故事" class="md-nav__link">
      Ceph 和防火墙的故事
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Ceph/03-ceph-%E5%BE%90%E5%B0%8F%E8%83%96blog/10-%E5%A4%A7%E8%AF%9DCeph--CRUSH%E9%82%A3%E7%82%B9%E4%BA%8B%E5%84%BF/" title="大话Ceph--CRUSH那点事儿" class="md-nav__link">
      大话Ceph--CRUSH那点事儿
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Ceph/03-ceph-%E5%BE%90%E5%B0%8F%E8%83%96blog/11-Ceph%E5%B8%B8%E7%94%A8%E8%A1%A8%E6%A0%BC%E6%B1%87%E6%80%BB/" title="Ceph常用表格汇总" class="md-nav__link">
      Ceph常用表格汇总
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Ceph/03-ceph-%E5%BE%90%E5%B0%8F%E8%83%96blog/12-PG%E5%A6%82%E4%BD%95%E5%BD%B1%E5%93%8D%E6%95%B0%E6%8D%AE%E5%88%86%E5%B8%83/" title="PG如何影响数据分布" class="md-nav__link">
      PG如何影响数据分布
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Ceph/03-ceph-%E5%BE%90%E5%B0%8F%E8%83%96blog/13-Ceph%E7%9A%84Json%E6%A0%BC%E5%BC%8F%E8%BE%93%E5%87%BA%E8%A7%A3%E6%9E%90/" title="Ceph的Json格式输出解析" class="md-nav__link">
      Ceph的Json格式输出解析
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Ceph/03-ceph-%E5%BE%90%E5%B0%8F%E8%83%96blog/14-%E9%80%9A%E8%BF%87ganesha-nfs%E5%B0%86%20Ceph%20%E5%AF%BC%E5%87%BA%E4%B8%BA%20NFS/" title="通过ganesha-nfs将 Ceph 导出为 NFS" class="md-nav__link">
      通过ganesha-nfs将 Ceph 导出为 NFS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Ceph/03-ceph-%E5%BE%90%E5%B0%8F%E8%83%96blog/15-%E5%A4%A7%E8%AF%9D%20Ceph%20--%20CephX%20%E9%82%A3%E7%82%B9%E4%BA%8B%E5%84%BF/" title="大话 Ceph -- CephX 那点事儿" class="md-nav__link">
      大话 Ceph -- CephX 那点事儿
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Ceph/03-ceph-%E5%BE%90%E5%B0%8F%E8%83%96blog/16-Ceph%20%E9%9B%86%E7%BE%A4%E6%95%B4%E4%BD%93%E8%BF%81%E7%A7%BB%E6%96%B9%E6%A1%88/" title="Ceph 集群整体迁移方案" class="md-nav__link">
      Ceph 集群整体迁移方案
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-6" type="checkbox" id="nav-8-6">
    
    <label class="md-nav__link" for="nav-8-6">
      04 ceph rook
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-8-6">
        04 ceph rook
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Ceph/04-ceph-rook/rook-ceph/" title="Rook ceph" class="md-nav__link">
      Rook ceph
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      PVE虚拟化
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        PVE虚拟化
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../PVE%E8%99%9A%E6%8B%9F%E5%8C%96/01-pve%E5%8D%95%E6%9C%BA%E9%83%A8%E7%BD%B2/" title="01 pve单机部署" class="md-nav__link">
      01 pve单机部署
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../PVE%E8%99%9A%E6%8B%9F%E5%8C%96/02-%E5%88%9B%E5%BB%BA%E9%9B%86%E7%BE%A4/" title="02 创建集群" class="md-nav__link">
      02 创建集群
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../PVE%E8%99%9A%E6%8B%9F%E5%8C%96/03-%E5%AE%89%E8%A3%85ceph%E9%9B%86%E7%BE%A4/" title="03 安装ceph集群" class="md-nav__link">
      03 安装ceph集群
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../PVE%E8%99%9A%E6%8B%9F%E5%8C%96/04-Promox%E7%9A%84HA%E9%85%8D%E7%BD%AE/" title="04 Promox的HA配置" class="md-nav__link">
      04 Promox的HA配置
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../PVE%E8%99%9A%E6%8B%9F%E5%8C%96/05-%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AE%A1%E7%90%86/" title="05 虚拟机管理" class="md-nav__link">
      05 虚拟机管理
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../PVE%E8%99%9A%E6%8B%9F%E5%8C%96/06-%E7%94%A8%E6%88%B7%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86/" title="06 用户权限管理" class="md-nav__link">
      06 用户权限管理
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../PVE%E8%99%9A%E6%8B%9F%E5%8C%96/07-%E9%9B%86%E7%BE%A4%E7%AE%A1%E7%90%86/" title="07 集群管理" class="md-nav__link">
      07 集群管理
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../PVE%E8%99%9A%E6%8B%9F%E5%8C%96/08-pve%E6%8A%80%E5%B7%A7/" title="08 pve技巧" class="md-nav__link">
      08 pve技巧
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10" type="checkbox" id="nav-10">
    
    <label class="md-nav__link" for="nav-10">
      TCP IP网络通信协议
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-10">
        TCP IP网络通信协议
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../TCP-IP%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/1-TCP%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E4%B8%8E%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B%E8%AF%A6%E8%A7%A3%5B%E5%8A%A8%E7%94%BB%5D/" title="1 TCP三次握手与四次挥手详解[动画]" class="md-nav__link">
      1 TCP三次握手与四次挥手详解[动画]
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../TCP-IP%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/2-OSI%E5%8F%82%E8%80%83%E6%A8%A1%E5%9E%8B%E4%B8%8ETCP%3AIP%E6%A8%A1%E5%9E%8B/" title="2 OSI参考模型与TCP:IP模型" class="md-nav__link">
      2 OSI参考模型与TCP:IP模型
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../TCP-IP%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/3-VLAN%E4%BA%92%E8%AE%BF/" title="3 VLAN互访" class="md-nav__link">
      3 VLAN互访
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-11" type="checkbox" id="nav-11">
    
    <label class="md-nav__link" for="nav-11">
      Tcpdump及抓包专题
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-11">
        Tcpdump及抓包专题
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Tcpdump%E5%8F%8A%E6%8A%93%E5%8C%85%E4%B8%93%E9%A2%98/01-tcpdump%E5%88%9D%E7%BA%A7/" title="01-tcmpdump初级使用" class="md-nav__link">
      01-tcmpdump初级使用
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Tcpdump%E5%8F%8A%E6%8A%93%E5%8C%85%E4%B8%93%E9%A2%98/02-tcpdump%E9%AB%98%E7%BA%A7%E8%BF%87%E6%BB%A4/" title="02 tcpdump高级过滤" class="md-nav__link">
      02 tcpdump高级过滤
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Tcpdump%E5%8F%8A%E6%8A%93%E5%8C%85%E4%B8%93%E9%A2%98/03-Wireshark%E8%AE%BE%E7%BD%AE%E8%A7%A3%E6%9E%90%E5%B1%95%E7%A4%BAVxlan%E5%8D%8F%E8%AE%AE/" title="03 Wireshark设置解析展示Vxlan协议" class="md-nav__link">
      03 Wireshark设置解析展示Vxlan协议
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Tcpdump%E5%8F%8A%E6%8A%93%E5%8C%85%E4%B8%93%E9%A2%98/04-tshark/" title="04 tshark" class="md-nav__link">
      04 tshark
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-12" type="checkbox" id="nav-12">
    
    <label class="md-nav__link" for="nav-12">
      Nginx
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-12">
        Nginx
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Nginx/00-Nginx%E9%85%8D%E7%BD%AE/" title="00 Nginx配置" class="md-nav__link">
      00 Nginx配置
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Nginx/01-Nginx%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD%E4%B8%BE%E4%BE%8B%E8%A7%A3%E6%9E%90/" title="01 Nginx常用功能举例解析" class="md-nav__link">
      01 Nginx常用功能举例解析
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Nginx/client_header_buffer_size%E5%92%8Clarge_client_header_buffers%E5%AD%A6%E4%B9%A0%EF%BC%88414%20Request-URI%20too%20lar%EF%BC%89/" title="Nginx的client_header_buffer_size和large_client_header_buffers学习" class="md-nav__link">
      Nginx的client_header_buffer_size和large_client_header_buffers学习
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Nginx/nginx%E4%B8%AD%E7%9A%84resolver%E5%92%8Cdns%E8%A7%A3%E6%9E%90%E7%BC%93%E5%AD%98%E7%9A%84%E9%97%AE%E9%A2%98/" title="nginx中resolver参数配置解释" class="md-nav__link">
      nginx中resolver参数配置解释
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-13" type="checkbox" id="nav-13">
    
    <label class="md-nav__link" for="nav-13">
      Envoy
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-13">
        Envoy
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Envoy/01-Envoy%E5%9F%BA%E7%A1%80-%E7%90%86%E8%AE%BA/" title="服务网格概述" class="md-nav__link">
      服务网格概述
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Envoy/01-%E7%9A%84%E5%89%AF%E6%9C%AC/" title="01 的副本" class="md-nav__link">
      01 的副本
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Envoy/01-%E7%9A%84%E5%89%AF%E6%9C%AC10/" title="01 的副本10" class="md-nav__link">
      01 的副本10
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Envoy/01-%E7%9A%84%E5%89%AF%E6%9C%AC11/" title="01 的副本11" class="md-nav__link">
      01 的副本11
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Envoy/01-%E7%9A%84%E5%89%AF%E6%9C%AC7/" title="01 的副本7" class="md-nav__link">
      01 的副本7
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Envoy/01-%E7%9A%84%E5%89%AF%E6%9C%AC8/" title="01 的副本8" class="md-nav__link">
      01 的副本8
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Envoy/01-%E7%9A%84%E5%89%AF%E6%9C%AC9/" title="01 的副本9" class="md-nav__link">
      01 的副本9
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Envoy/02-%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/" title="启动Envoy" class="md-nav__link">
      启动Envoy
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Envoy/03-%E7%AE%A1%E7%90%86%E6%8E%A5%E5%8F%A3/" title="管理接口" class="md-nav__link">
      管理接口
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Envoy/04-front%20proxy%20and%20tls/" title="04 front proxy and tls" class="md-nav__link">
      04 front proxy and tls
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Envoy/05-xDS%20API%E7%90%86%E8%AE%BA%E5%9F%BA%E7%A1%80/" title="xDS API" class="md-nav__link">
      xDS API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Envoy/06-xDS%E4%B9%8B%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E8%AE%A2%E9%98%85/" title="06 xDS之文件系统订阅" class="md-nav__link">
      06 xDS之文件系统订阅
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Envoy/07-xDS%E4%B9%8B%E5%9F%BA%E4%BA%8EREST%E7%AE%A1%E7%90%86%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%AE%A2%E9%98%85/" title="07 xDS之基于REST管理服务器订阅" class="md-nav__link">
      07 xDS之基于REST管理服务器订阅
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Envoy/08-xDS%E4%B9%8B%E5%9F%BA%E4%BA%8Egrpc%E7%AE%A1%E7%90%86%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%AE%A2%E9%98%85/" title="08 xDS之基于grpc管理服务器订阅" class="md-nav__link">
      08 xDS之基于grpc管理服务器订阅
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Envoy/09-ADS/" title="09 ADS" class="md-nav__link">
      09 ADS
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-14" type="checkbox" id="nav-14">
    
    <label class="md-nav__link" for="nav-14">
      Python
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-14">
        Python
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/01-%E6%A6%82%E8%BF%B0/" title="01 概述" class="md-nav__link">
      01 概述
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/02-%E5%AF%B9%E8%B1%A1%E4%BB%8B%E7%BB%8D/" title="02 对象介绍" class="md-nav__link">
      02 对象介绍
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/03-%E5%8F%98%E9%87%8F/" title="03 变量" class="md-nav__link">
      03 变量
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/03.1-%E5%90%84%E7%A7%8D%E8%B5%8B%E5%80%BC%E8%AF%AD%E5%8F%A5/" title="03.1 各种赋值语句" class="md-nav__link">
      03.1 各种赋值语句
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/04-%E5%86%85%E7%BD%AE%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E6%A6%82%E8%BF%B0/" title="04 内置数据类型概述" class="md-nav__link">
      04 内置数据类型概述
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/05-%E6%95%B0%E5%AD%97%E7%B1%BB%E5%9E%8B/" title="05 数字类型" class="md-nav__link">
      05 数字类型
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/06-%E5%BA%8F%E5%88%97%E6%A6%82%E8%BF%B0/" title="06 序列概述" class="md-nav__link">
      06 序列概述
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/07-%E5%AD%97%E7%AC%A6%E4%B8%B2/" title="07 字符串" class="md-nav__link">
      07 字符串
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/08-%E5%88%97%E8%A1%A8/" title="08 列表" class="md-nav__link">
      08 列表
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/09-%E5%AD%97%E5%85%B8/" title="09 字典" class="md-nav__link">
      09 字典
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/10-%E5%85%83%E7%BB%84/" title="10 元组" class="md-nav__link">
      10 元组
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/11-%E9%9B%86%E5%90%88set/" title="11 集合set" class="md-nav__link">
      11 集合set
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/12-%E6%96%87%E4%BB%B6file/" title="12 文件file" class="md-nav__link">
      12 文件file
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/13-%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/" title="13 流程控制" class="md-nav__link">
      13 流程控制
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/13-%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/" title="13 类型转换" class="md-nav__link">
      13 类型转换
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/14-%E5%87%BD%E6%95%B0/" title="14 函数" class="md-nav__link">
      14 函数
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/14.1-%E8%A3%85%E9%A5%B0%E5%99%A8/" title="14.1 装饰器" class="md-nav__link">
      14.1 装饰器
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/14.2-%E8%BF%AD%E4%BB%A3%E5%99%A8%E4%B8%8E%E7%94%9F%E6%88%90%E5%99%A8/" title="14.2 迭代器与生成器" class="md-nav__link">
      14.2 迭代器与生成器
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/15-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/" title="15 面向对象" class="md-nav__link">
      15 面向对象
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/16-%E5%BC%82%E5%B8%B8%E4%B8%8E%E6%96%AD%E8%A8%80/" title="16 异常与断言" class="md-nav__link">
      16 异常与断言
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/17-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/" title="17 并发编程" class="md-nav__link">
      17 并发编程
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/18-%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/" title="18 网络编程" class="md-nav__link">
      18 网络编程
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/19-%E4%B8%8A%E4%B8%8B%E6%96%87%E7%AE%A1%E7%90%86%E5%99%A8/" title="19 上下文管理器" class="md-nav__link">
      19 上下文管理器
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/21-Python3%E6%93%8D%E4%BD%9CMySQL/" title="Python3 MySQL 数据库连接 - PyMySQL 驱动" class="md-nav__link">
      Python3 MySQL 数据库连接 - PyMySQL 驱动
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/22-pymongo%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/" title="22 pymongo使用方法" class="md-nav__link">
      22 pymongo使用方法
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/7.1-%E6%A0%BC%E5%BC%8F%E5%8C%96%E5%AD%97%E7%AC%A6%E4%B8%B2/" title="7.1 格式化字符串" class="md-nav__link">
      7.1 格式化字符串
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/%E6%8E%A8%E8%8D%90%E5%8D%9A%E5%AE%A2/" title="推荐博客" class="md-nav__link">
      推荐博客
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-14-28" type="checkbox" id="nav-14-28">
    
    <label class="md-nav__link" for="nav-14-28">
      20 模块
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-14-28">
        20 模块
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/20-%E6%A8%A1%E5%9D%97/20.1-%E6%A8%A1%E5%9D%97/" title="20.1 模块" class="md-nav__link">
      20.1 模块
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/20-%E6%A8%A1%E5%9D%97/20.10-requests%E6%A8%A1%E5%9D%97%28%E6%8E%A8%E8%8D%90%29/" title="20.10 requests模块(推荐)" class="md-nav__link">
      20.10 requests模块(推荐)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/20-%E6%A8%A1%E5%9D%97/20.10-yaml%E6%A8%A1%E5%9D%97-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%A7%A3%E6%9E%90/" title="20.10 yaml模块 配置文件解析" class="md-nav__link">
      20.10 yaml模块 配置文件解析
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/20-%E6%A8%A1%E5%9D%97/20.11-configparser%E6%A8%A1%E5%9D%97-cnf%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%A7%A3%E6%9E%90/" title="20.11 configparser模块 cnf配置文件解析" class="md-nav__link">
      20.11 configparser模块 cnf配置文件解析
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/20-%E6%A8%A1%E5%9D%97/20.12-xml%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%A7%A3%E6%9E%90/" title="20.12 xml配置文件解析" class="md-nav__link">
      20.12 xml配置文件解析
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/20-%E6%A8%A1%E5%9D%97/20.13-toml%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%A7%A3%E6%9E%90/" title="20.13 toml配置文件解析" class="md-nav__link">
      20.13 toml配置文件解析
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/20-%E6%A8%A1%E5%9D%97/20.14-subprocess%E6%A8%A1%E5%9D%97-%E6%89%A7%E8%A1%8C%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%91%BD%E4%BB%A4/" title="20.14 subprocess模块 执行操作系统命令" class="md-nav__link">
      20.14 subprocess模块 执行操作系统命令
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/20-%E6%A8%A1%E5%9D%97/20.15-signal%E6%A8%A1%E5%9D%97-%E4%BF%A1%E5%8F%B7%E5%A4%84%E7%90%86%E6%A8%A1%E5%9D%97/" title="20.15 signal模块 信号处理模块" class="md-nav__link">
      20.15 signal模块 信号处理模块
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/20-%E6%A8%A1%E5%9D%97/20.16-logging%E6%A8%A1%E5%9D%97/" title="20.16 logging模块" class="md-nav__link">
      20.16 logging模块
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/20-%E6%A8%A1%E5%9D%97/20.17-psutil%E6%A8%A1%E5%9D%97%E8%AF%A6%E8%A7%A3/" title="20.17 psutil模块详解" class="md-nav__link">
      20.17 psutil模块详解
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/20-%E6%A8%A1%E5%9D%97/20.18-paramiko%E6%A8%A1%E5%9D%97-ssh%E5%8D%8F%E8%AE%AE%E5%AE%A2%E6%88%B7%E7%AB%AF/" title="20.18 paramiko模块 ssh协议客户端" class="md-nav__link">
      20.18 paramiko模块 ssh协议客户端
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/20-%E6%A8%A1%E5%9D%97/20.19-lxml%E6%A8%A1%E5%9D%97-xpath/" title="20.19 lxml模块 xpath" class="md-nav__link">
      20.19 lxml模块 xpath
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/20-%E6%A8%A1%E5%9D%97/20.2-os%E6%A8%A1%E5%9D%97/" title="20.2 os模块" class="md-nav__link">
      20.2 os模块
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/20-%E6%A8%A1%E5%9D%97/20.20-platform%E6%A8%A1%E5%9D%97/" title="20.20 platform模块" class="md-nav__link">
      20.20 platform模块
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/20-%E6%A8%A1%E5%9D%97/20.21-PrettyTable%E6%A8%A1%E5%9D%97-%E8%A1%A8%E6%A0%BC%E8%BE%93%E5%87%BA/" title="20.21 PrettyTable模块 表格输出" class="md-nav__link">
      20.21 PrettyTable模块 表格输出
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/20-%E6%A8%A1%E5%9D%97/20.22-rich%E6%A8%A1%E5%9D%97-%E6%8E%A7%E5%88%B6%E5%8F%B0%E6%A0%BC%E5%BC%8F%E5%8C%96/" title="20.22 rich模块 控制台格式化" class="md-nav__link">
      20.22 rich模块 控制台格式化
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/20-%E6%A8%A1%E5%9D%97/20.23-pexcept%E6%A8%A1%E5%9D%97/" title="20.23 pexcept模块" class="md-nav__link">
      20.23 pexcept模块
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/20-%E6%A8%A1%E5%9D%97/20.3-sys%E6%A8%A1%E5%9D%97/" title="20.3 sys模块" class="md-nav__link">
      20.3 sys模块
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/20-%E6%A8%A1%E5%9D%97/20.4-shutil-zipfile-tarfile%E6%A8%A1%E5%9D%97-%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/" title="【说明：未同步word文档】" class="md-nav__link">
      【说明：未同步word文档】
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/20-%E6%A8%A1%E5%9D%97/20.5-random%E6%A8%A1%E5%9D%97/" title="【说明：未同步word文档】" class="md-nav__link">
      【说明：未同步word文档】
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/20-%E6%A8%A1%E5%9D%97/20.5-time%E6%A8%A1%E5%9D%97/" title="20.5 time模块" class="md-nav__link">
      20.5 time模块
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/20-%E6%A8%A1%E5%9D%97/20.6-re%E6%A8%A1%E5%9D%97-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" title="20.6 re模块 正则表达式" class="md-nav__link">
      20.6 re模块 正则表达式
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/20-%E6%A8%A1%E5%9D%97/20.7-pickle-json-shelve%E5%BA%8F%E5%88%97%E5%8C%96%E6%A8%A1%E5%9D%97/" title="【说明：未同步word文档】" class="md-nav__link">
      【说明：未同步word文档】
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/20-%E6%A8%A1%E5%9D%97/20.8-hashlib/" title="【说明：未同步word文档】" class="md-nav__link">
      【说明：未同步word文档】
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/20-%E6%A8%A1%E5%9D%97/20.9-urllib.request-http%E8%AF%B7%E6%B1%82/" title="20.9 urllib.request http请求" class="md-nav__link">
      20.9 urllib.request http请求
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/20-%E6%A8%A1%E5%9D%97/%E6%89%A7%E8%A1%8C%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%91%BD%E4%BB%A4/" title="执行操作系统命令" class="md-nav__link">
      执行操作系统命令
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-14-29" type="checkbox" id="nav-14-29">
    
    <label class="md-nav__link" for="nav-14-29">
      小知识
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-14-29">
        小知识
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/%E5%B0%8F%E7%9F%A5%E8%AF%86/pip%E9%85%8D%E7%BD%AE%E9%98%BF%E9%87%8C%E6%BA%90/" title="Pip配置阿里源" class="md-nav__link">
      Pip配置阿里源
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/%E5%B0%8F%E7%9F%A5%E8%AF%86/python%E4%B8%AD%E5%A6%82%E4%BD%95%E8%8E%B7%E5%8F%96%E5%B8%AE%E5%8A%A9/" title="Python中如何获取帮助" class="md-nav__link">
      Python中如何获取帮助
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/%E5%B0%8F%E7%9F%A5%E8%AF%86/python%E7%9A%84%E7%9C%9F%E4%B8%8E%E5%81%87/" title="Python的真与假" class="md-nav__link">
      Python的真与假
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/%E5%B0%8F%E7%9F%A5%E8%AF%86/python%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/" title="python3的虚拟环境" class="md-nav__link">
      python3的虚拟环境
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Python/%E5%B0%8F%E7%9F%A5%E8%AF%86/%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85Python/" title="编译安装Python" class="md-nav__link">
      编译安装Python
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-15" type="checkbox" id="nav-15">
    
    <label class="md-nav__link" for="nav-15">
      Golang
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-15">
        Golang
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Golang/01_%E5%8F%98%E9%87%8F%E4%B8%8E%E5%B8%B8%E9%87%8F/" title="01 变量与常量" class="md-nav__link">
      01 变量与常量
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Golang/02_%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/" title="02 基本数据类型" class="md-nav__link">
      02 基本数据类型
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Golang/03_%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%9A%84%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/" title="03 基本数据类型的类型转换" class="md-nav__link">
      03 基本数据类型的类型转换
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Golang/04_%E8%BF%90%E7%AE%97%E7%AC%A6/" title="04 运算符" class="md-nav__link">
      04 运算符
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Golang/05_%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/" title="05 流程控制" class="md-nav__link">
      05 流程控制
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Golang/06_%E5%87%BD%E6%95%B0/" title="06 函数" class="md-nav__link">
      06 函数
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Golang/Gin%E6%A1%86%E6%9E%B6%E4%BB%8B%E7%BB%8D%E5%8F%8A%E4%BD%BF%E7%94%A8/" title="Gin框架介绍及使用" class="md-nav__link">
      Gin框架介绍及使用
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Golang/Golang%E4%B8%AD%E7%9A%84%E5%8F%98%E9%87%8F%E5%A3%B0%E6%98%8E%E4%B8%8E%E8%B5%8B%E5%80%BC/" title="Golang中的变量相关总结" class="md-nav__link">
      Golang中的变量相关总结
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Golang/go%E8%AF%AD%E8%A8%80%E6%93%8D%E4%BD%9Cmongodb/" title="[go语言操作mongodb](https://www.cnblogs.com/endurance9/p/10409232.html)" class="md-nav__link">
      [go语言操作mongodb](https://www.cnblogs.com/endurance9/p/10409232.html)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Golang/%E6%8E%A8%E8%8D%90%E9%98%85%E8%AF%BB/" title="推荐阅读" class="md-nav__link">
      推荐阅读
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Golang/%E6%96%87%E4%BB%B6%E6%93%8D%E8%AF%BB%E5%86%99%E4%BD%9C/" title="文件操作" class="md-nav__link">
      文件操作
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-16" type="checkbox" id="nav-16">
    
    <label class="md-nav__link" for="nav-16">
      Java
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-16">
        Java
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Java/00-idea%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE%E6%AD%A5%E9%AA%A4/" title="00 idea创建项目步骤" class="md-nav__link">
      00 idea创建项目步骤
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Java/01-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E4%B8%8E%E5%8F%98%E9%87%8F%E5%B8%B8%E9%87%8F/" title="01 数据类型与变量常量" class="md-nav__link">
      01 数据类型与变量常量
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Java/02-%E8%BF%90%E7%AE%97%E7%AC%A6/" title="02 运算符" class="md-nav__link">
      02 运算符
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Java/03-%E6%95%B0%E6%8D%AE%E8%BE%93%E5%85%A5/" title="03 数据输入" class="md-nav__link">
      03 数据输入
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Java/04-%E6%8E%A7%E5%88%B6%E8%AF%AD%E5%8F%A5/" title="04 控制语句" class="md-nav__link">
      04 控制语句
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Java/05-%E6%95%B0%E7%BB%84/" title="05 数组" class="md-nav__link">
      05 数组
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Java/%E9%9A%8F%E7%AC%94/" title="随笔" class="md-nav__link">
      随笔
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-17" type="checkbox" id="nav-17">
    
    <label class="md-nav__link" for="nav-17">
      前端
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-17">
        前端
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-17-1" type="checkbox" id="nav-17-1">
    
    <label class="md-nav__link" for="nav-17-1">
      后盾人CSS
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-17-1">
        后盾人CSS
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../%E5%89%8D%E7%AB%AF/%E5%90%8E%E7%9B%BE%E4%BA%BACSS/1-CSS3%20%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" title="1 CSS3 基础知识" class="md-nav__link">
      1 CSS3 基础知识
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../%E5%89%8D%E7%AB%AF/%E5%90%8E%E7%9B%BE%E4%BA%BACSS/10-CSS3%20%E5%BC%B9%E6%80%A7%E5%B8%83%E5%B1%80/" title="10 CSS3 弹性布局" class="md-nav__link">
      10 CSS3 弹性布局
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../%E5%89%8D%E7%AB%AF/%E5%90%8E%E7%9B%BE%E4%BA%BACSS/11-CSS%20%E6%A0%85%E6%A0%BC%E7%B3%BB%E7%BB%9F/" title="11 CSS 栅格系统" class="md-nav__link">
      11 CSS 栅格系统
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../%E5%89%8D%E7%AB%AF/%E5%90%8E%E7%9B%BE%E4%BA%BACSS/12-CSS3%20%E5%8F%98%E5%BD%A2%E5%8A%A8%E7%94%BB/" title="12 CSS3 变形动画" class="md-nav__link">
      12 CSS3 变形动画
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../%E5%89%8D%E7%AB%AF/%E5%90%8E%E7%9B%BE%E4%BA%BACSS/13-CSS3%20%E8%BF%87%E6%B8%A1%E5%BB%B6%E8%BF%9F/" title="13 CSS3 过渡延迟" class="md-nav__link">
      13 CSS3 过渡延迟
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../%E5%89%8D%E7%AB%AF/%E5%90%8E%E7%9B%BE%E4%BA%BACSS/14-CSS3%20%E5%B8%A7%E5%8A%A8%E7%94%BB/" title="14 CSS3 帧动画" class="md-nav__link">
      14 CSS3 帧动画
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../%E5%89%8D%E7%AB%AF/%E5%90%8E%E7%9B%BE%E4%BA%BACSS/15-CSS3%20%E5%AA%92%E4%BD%93%E6%9F%A5%E8%AF%A2/" title="15 CSS3 媒体查询" class="md-nav__link">
      15 CSS3 媒体查询
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../%E5%89%8D%E7%AB%AF/%E5%90%8E%E7%9B%BE%E4%BA%BACSS/2-CSS3%20%E9%80%89%E6%8B%A9%E5%99%A8/" title="2 CSS3 选择器" class="md-nav__link">
      2 CSS3 选择器
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../%E5%89%8D%E7%AB%AF/%E5%90%8E%E7%9B%BE%E4%BA%BACSS/3-CSS3%20%E5%85%83%E7%B4%A0%E6%9D%83%E9%87%8D/" title="3 CSS3 元素权重" class="md-nav__link">
      3 CSS3 元素权重
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../%E5%89%8D%E7%AB%AF/%E5%90%8E%E7%9B%BE%E4%BA%BACSS/4-CSS3%20%E6%96%87%E6%9C%AC%E6%8E%A7%E5%88%B6/" title="4 CSS3 文本控制" class="md-nav__link">
      4 CSS3 文本控制
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../%E5%89%8D%E7%AB%AF/%E5%90%8E%E7%9B%BE%E4%BA%BACSS/5-CSS3%20%E7%9B%92%E5%AD%90%E6%A8%A1%E5%9E%8B%E5%85%A8%E9%9D%A2%E6%8E%8C%E6%8F%A1/" title="5 CSS3 盒子模型全面掌握" class="md-nav__link">
      5 CSS3 盒子模型全面掌握
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../%E5%89%8D%E7%AB%AF/%E5%90%8E%E7%9B%BE%E4%BA%BACSS/6-CSS3%20%E8%83%8C%E6%99%AF%E4%B8%8E%E6%B8%90%E5%8F%98/" title="6 CSS3 背景与渐变" class="md-nav__link">
      6 CSS3 背景与渐变
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../%E5%89%8D%E7%AB%AF/%E5%90%8E%E7%9B%BE%E4%BA%BACSS/7-CSS3%20%E6%93%8D%E4%BD%9C%E6%95%B0%E6%8D%AE%E5%86%85%E5%AE%B9%E6%A0%B7%E5%BC%8F/" title="7 CSS3 操作数据内容样式" class="md-nav__link">
      7 CSS3 操作数据内容样式
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../%E5%89%8D%E7%AB%AF/%E5%90%8E%E7%9B%BE%E4%BA%BACSS/8-CSS3%20%E6%B5%AE%E5%8A%A8%E5%B8%83%E5%B1%80/" title="8 CSS3 浮动布局" class="md-nav__link">
      8 CSS3 浮动布局
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../%E5%89%8D%E7%AB%AF/%E5%90%8E%E7%9B%BE%E4%BA%BACSS/9-CSS3%20%E5%AE%9A%E4%BD%8D%E5%B8%83%E5%B1%80/" title="9 CSS3 定位布局" class="md-nav__link">
      9 CSS3 定位布局
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-17-2" type="checkbox" id="nav-17-2">
    
    <label class="md-nav__link" for="nav-17-2">
      后盾人HTML
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-17-2">
        后盾人HTML
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../%E5%89%8D%E7%AB%AF/%E5%90%8E%E7%9B%BE%E4%BA%BAHTML/1-%E9%A1%B5%E9%9D%A2%E7%BB%93%E6%9E%84/" title="1 页面结构" class="md-nav__link">
      1 页面结构
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../%E5%89%8D%E7%AB%AF/%E5%90%8E%E7%9B%BE%E4%BA%BAHTML/2-%E6%96%87%E6%9C%AC%E7%9B%B8%E5%85%B3/" title="2 文本相关" class="md-nav__link">
      2 文本相关
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../%E5%89%8D%E7%AB%AF/%E5%90%8E%E7%9B%BE%E4%BA%BAHTML/3-%E9%93%BE%E6%8E%A5%E4%B8%8E%E5%9B%BE%E7%89%87/" title="3 链接与图片" class="md-nav__link">
      3 链接与图片
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../%E5%89%8D%E7%AB%AF/%E5%90%8E%E7%9B%BE%E4%BA%BAHTML/4-%E8%A1%A8%E5%8D%95%E4%B8%8E%E5%88%97%E8%A1%A8/" title="4 表单与列表" class="md-nav__link">
      4 表单与列表
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../%E5%89%8D%E7%AB%AF/%E5%90%8E%E7%9B%BE%E4%BA%BAHTML/5-%E8%A1%A8%E6%A0%BC%E4%B8%8E%E5%A4%9A%E5%AA%92%E4%BD%93/" title="5 表格与多媒体" class="md-nav__link">
      5 表格与多媒体
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">目录</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#etcd" class="md-nav__link">
    一、etcd集群及相关的数字证书
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kubernetes" class="md-nav__link">
    二、Kubernetes集群及相关的数字证书
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kube-aggregator" class="md-nav__link">
    三、kube-aggregator(代理)及相关的数字证书
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#service_account_key" class="md-nav__link">
    四、Service Account key
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    五、相关的数字证书
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    六、小结
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <div class="toc">
<ul>
<li><a href="#kuberneteshttps-">【理论】Kubernetes集群中https通信-概述</a><ul>
<li><a href="#etcd">一、etcd集群及相关的数字证书</a></li>
<li><a href="#kubernetes">二、Kubernetes集群及相关的数字证书</a></li>
<li><a href="#kube-aggregator">三、kube-aggregator(代理)及相关的数字证书</a></li>
<li><a href="#service_account_key">四、Service Account key</a></li>
<li><a href="#_1">五、相关的数字证书</a></li>
<li><a href="#_2">六、小结</a></li>
</ul>
</li>
<li><a href="#k8s">【理论】k8s各种证书介绍：</a><ul>
<li><a href="#1api_server">1、API Server证书：</a></li>
<li><a href="#2api_server">2、客户端认证API Server证书：</a></li>
<li><a href="#3api_server">3、API Server认证客户端证书：</a></li>
<li><a href="#4requestheader">4、认证代理：requestheader</a></li>
<li><a href="#5service_account_ca">5、service account 私钥（不是 CA 签发的，只是用普通的公钥和私钥）</a></li>
<li><a href="#6">6、总结</a></li>
</ul>
</li>
<li><a href="#kubernetes-">【理论】Kubernetes集群高可用-概述</a><ul>
<li><a href="#etcd_1">一、etcd服务高可用</a></li>
<li><a href="#apiserver">二、apiserver高可用</a></li>
<li><a href="#controller_managerscheduler">三、Controller Manager和Scheduler高可用</a></li>
</ul>
</li>
<li><a href="#kubeadm">【理论】kubeadm部署介绍</a><ul>
<li><a href="#master">一、多Master拓补图</a></li>
<li><a href="#_3">二、安装步骤</a></li>
<li><a href="#_4">三、安装原理描述</a></li>
</ul>
</li>
<li><a href="#kubeadmk8s">【实战】kubeadm安装k8s高可用集群：</a><ul>
<li><a href="#_5">一、准备设置</a><ul>
<li><a href="#11selinuxswap">1.1、关闭防火墙、selinux、swap、时间同步等</a></li>
<li><a href="#1244">1.2、升级内核到4.4（推荐）</a></li>
<li><a href="#13ipvsipvsiptables">1.3、装入ipvs内核模块（建议启用ipvs，代替iptables）</a></li>
<li><a href="#14docker-ce">1.4、安装docker-ce软件</a></li>
<li><a href="#15_kubeadmkubelet">1.5 、安装kubeadm、kubelet软件</a></li>
<li><a href="#16kubectl">1.6、(可选)kubectl命令补全</a></li>
</ul>
</li>
<li><a href="#loadblancer_keepalived">二、部署LoadBlancer &amp; keepalived</a><ul>
<li><a href="#213masterhaproxy">2.1、3台master安装haproxy</a></li>
<li><a href="#223masterkeepalived">2.2、3台master安装keepalived</a></li>
</ul>
</li>
<li><a href="#master_1">三、安装Master节点</a><ul>
<li><a href="#31master">3.1、执行第一个Master节点的初始化:</a></li>
<li><a href="#32pod">3.2、集群pod网络安装：</a><ul>
<li><a href="#321flannel">3.2.1、flannel网络</a></li>
<li><a href="#322calico">3.2.2、calico网络（推荐）</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#using_ip_addresses">Using IP addresses</a></li>
<li><a href="#using_domain_names">Using domain names</a></li>
<li><a href="#valid_ip_address_on_interface_eth0_eth1_eth2_etc">Valid IP address on interface eth0, eth1, eth2 etc.</a><ul>
<li><a href="#33master">3.3、添加其他master节点：</a></li>
<li><a href="#node">四、加入Node节点</a></li>
<li><a href="#_6">五、其他推荐配置</a><ul>
<li><a href="#1kube-proxyipvs">1、kube-proxy启用ipvs</a></li>
<li><a href="#2pod">2、集群控制平面的pod配置本地时区</a></li>
<li><a href="#3podpresetpod">3、启用PodPreset自动配置Pod的时区</a></li>
</ul>
</li>
<li><a href="#kubeadm_upgradek8s">【实战】使用kubeadm upgrade升级k8s</a></li>
<li><a href="#node_1">【实战】后期添加node节点</a><ul>
<li><a href="#_7">一、准备设置</a><ul>
<li><a href="#11selinuxswap_1">1.1、关闭防火墙、selinux、swap、时间同步等</a></li>
<li><a href="#1244_1">1.2、升级内核到4.4（推荐）</a></li>
<li><a href="#13ipvsipvsiptables_1">1.3、装入ipvs内核模块（建议启用ipvs，代替iptables）</a></li>
<li><a href="#14dockerkubeadmkubelet">1.4、安装docker、kubeadm、kubelet软件</a></li>
</ul>
</li>
<li><a href="#node_2">二、加入Node节点</a></li>
</ul>
</li>
<li><a href="#_8">其他参考资料：</a></li>
</ul>
</li>
</ul>
</div>
<h2 id="kuberneteshttps-">【理论】Kubernetes集群中https通信-概述<a class="headerlink" href="#kuberneteshttps-" title="Permanent link">¶</a></h2>
<p><a href="https://www.cnblogs.com/f-ck-need-u/p/6089523.html">加密、签名和SSL握手机制细节请参考该文</a></p>
<p>Kubernetes集群可承载运行用户的完整应用环境，包括多种服务及相关的配置信息等，对这些应用的管理操作需要进行精心的认证及授权编排，以确保其安全性。本文描述了集群各组件间的安全通信时相关的加密通信及认证机制用到的数字证书等话题。</p>
<h3 id="etcd">一、etcd集群及相关的数字证书<a class="headerlink" href="#etcd" title="Permanent link">¶</a></h3>
<p>Kubernetes的API Server将集群的状态数据存储于集群存储服务etcd中，包括那些包含了敏感数据的Secret资源对象。出于提升服务可用性、数据冗余及安全性等目的，生产环境通常应该配置有着3、5或7个节点的etcd集群，集群内各节点间基于https协议进行通信，它们使用<strong>Peer类型</strong>的数字证书进行彼此间的通信时的身份认证。而且，各etcd节点提供<strong>Server类型</strong>的数字证书与客户端建立安全连接，并验正其客户端的<strong>Client类型</strong>的数字证书。Kubernetes各集群组件中，kube-apiserver是惟一一个可直接与集群存储etcd通信的组件，它是etcd服务的客户端。(图中的箭头方向表示客户端请求服务器的方向)</p>
<p><img alt="M5WfO0-1605663439379" src="https://gitee.com/ljzsdut/pic/raw/master/default/M5WfO0-1605663439379.png" /></p>
<table>
<thead>
<tr>
<th>类型</th>
<th>作用</th>
<th>证书拥有者</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>Peer</td>
<td>etcd集群节点间彼此通信时的身份认证</td>
<td>etcd</td>
<td>对等节点：相互为服务器端和客户端；peer端口为2380。在etcd的配置文件中使用ETCD_PEER_CERT_FILE和ETCD_PEER_KEY_FILE指定服务间相关通信使用的证书和私钥</td>
</tr>
<tr>
<td>Server</td>
<td>etcd与客户端(例如apiserver)通信使用的证书</td>
<td>etcd</td>
<td>服务器证书：只能用于服务器端。在etcd的配置文件中使用ETCD_CERT_FILE和ETCD_KEY_FILE指定服务端证书和私钥</td>
</tr>
<tr>
<td>Client</td>
<td>客户端(例如apiserver)与etcd通信使用的证书</td>
<td>apiserver</td>
<td>客户端证书：只能用于客户端。</td>
</tr>
<tr>
<td>CA</td>
<td>签署以上3种证书</td>
<td></td>
<td>指定CA证书来验正客户端身份(准确讲是获取可靠的公钥)。在etcd的配置文件中使用ETCD_TRUSTED_CA_FILE(对应Server证书的签发CA)和ETCD_PEER_TRUSTED_CA_FILE(对应Peer证书的签发CA)来指定使用的CA证书</td>
</tr>
</tbody>
</table>
<h3 id="kubernetes">二、Kubernetes集群及相关的数字证书<a class="headerlink" href="#kubernetes" title="Permanent link">¶</a></h3>
<p>​   API Server通过认证插件完成客户端身份认证，它支持X509客户端证书认证及多种令牌（Token）认证机制，例如静态令牌文件、静态口令文件、引导令牌等等，各认证方式的协同机制为“一票通过”，即任何插件认证成功后即完成认证操作而不会再由后续的其它插件继续检查。而那些<strong>未被任何认证插件拒绝的请求将被识别为匿名用户</strong>，它以system:anonymous为用户名，并隶属于system:unauthenticated组。另外，API Server在认证成功后还会通过授权插件核验用户的操作权限，例如RBAC等，并在执行写操作时由准入控制器插件施加额外的管控机制。</p>
<p>​   Kubernetes集群的其它各组件均需要通过kube-apiserver访问集群资源，例如各kube-controller-manager、kube-scheduler、kube-proxy和kubelet组件，以及客户端工具程序kubectl等，因此，它们均为API Server的客户端。同样出于安全性等目的，Kubernetes集群的API Server需要借助TLS协议与其客户端通信，并应该基于X509数字证书或令牌认证机制验正各组件的身份。通常，这些客户端会基于kubeconfig配置文件在请求报文中附带认证数据，包括用户名及相关的客户端证书和私钥等。</p>
<p>​   另外，kubelet自身也通过HTTPS端点暴露了一组API，它们提供了多个不同级别的敏感数据，并支持来自于客户端的请求，在节点和容器上执行不同级别的操作。默认情况下，未被其它身份认证插件拒绝的那些对kubelet的HTTPS端点的请求将被视为匿名请求，并自动赋予其隶属于system:unauthenticated用户组的用户名system:anonymous。不过，kubelet可使用<code>--anonymous-auth=false</code>选项拒绝匿名访问，并设置其通过<code>--client-ca-file</code>选项指定CA以验正客户端身份，它可直接使用kubernetes-ca，同时还应该为kube-apiserver使用<code>--kubelet-client-certificate</code>和<code>--kubelet-client-key</code>选项指定用于认证到kubelet的客户端证书和私钥。</p>
<p>​   补充：因为kubelet自己也有APIs，它们会被apiserver请求来完成某些操作 。而且这些不同的api对应的操作级别不同，每一个api都需要做ssl身份验证。因为这样的api种类太多，所以kubelet自动实现这些身份验证。那怎么自动实现呢？其实每一个node上的kubelet上都有一个二级CA，然后给kubelet的api发证书，并且这个CA是kubenetes-ca的二级CA，这意味着apiserver拿着由kubenetes-ca签署的证书去连接kubelet的api是可以被允许的，因为<strong>证书链信任是传递的</strong>。</p>
<p><img alt="1zwu2Q-1624843413930" src="https://gitee.com/ljzsdut/pic/raw/master/default/1zwu2Q-1624843413930-1624843420945.png" /></p>
<p>​   事实上，启用RBAC授权插件的API Server还会在认证完成后严格检验请求操作的授权，它<strong>会把客户端证书中的CN识别为用户名，并将O识别为用户所属的组</strong>。而kube-controller-manager、kube-scheduler、kube-proxy和kubelet等组件分别需要获取到特定的授权方能正确运行，它们应该分别使用专有的用户名或者组名以获取默认的授权。这就要求我们在生成证书时，需要指定特定的CN和O以获取特定的权限。</p>
<table>
<thead>
<tr>
<th>类型</th>
<th>作用</th>
<th>使用程序</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>Client</td>
<td>客户端用于连接kube-apiserver的客户端证书</td>
<td>kube-controller-manager</td>
<td></td>
</tr>
<tr>
<td>Client</td>
<td>客户端用于连接kube-apiserver的客户端证书</td>
<td>kube-scheduler</td>
<td></td>
</tr>
<tr>
<td>Client</td>
<td>客户端用于连接kube-apiserver的客户端证书</td>
<td>kube-proxy</td>
<td></td>
</tr>
<tr>
<td>Client</td>
<td>客户端用于连接kube-apiserver的客户端证书</td>
<td>kubelet</td>
<td></td>
</tr>
<tr>
<td>Client</td>
<td>客户端用于连接kube-apiserver的客户端证书</td>
<td>kubectl</td>
<td></td>
</tr>
<tr>
<td>Server</td>
<td>服务器端用户验证其他客户端的证书</td>
<td>kube-apiserver</td>
<td></td>
</tr>
<tr>
<td>Client</td>
<td>apiserver作为客户端用来与kubelet的API进行通信认证</td>
<td>kube-apiserver</td>
<td>使用--kubelet-client-certificate和--kubelet-client-key选项指定用于认证到kubelet的客户端证书和私钥</td>
</tr>
<tr>
<td>CA</td>
<td>签署以上证书</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<blockquote>
<p>客户端证书的CN可任意。但如果客户端证书在kubeconfig中使用，CN和O就充当了用户名和组名。</p>
<p>服务器端证书的CN或SAN不能任意，需包含访问服务器的url。</p>
</blockquote>
<p>以下几个证书的CN是固定的，它们是k8s的核心组件使用的，具体特定的权限，不能改变：</p>
<table>
<thead>
<tr>
<th align="left">type</th>
<th>subj</th>
<th>extention</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">kube-controller-manager.crt</td>
<td>/CN=system:kube-controller-manager</td>
<td>绑定到clusterrolebinding/system:kube-controller-manager</td>
</tr>
<tr>
<td align="left">kube-scheduler.crt</td>
<td>/CN=system:kube-scheduler</td>
<td>绑定到clusterrolebinding/system:kube-scheduler</td>
</tr>
<tr>
<td align="left">kube-proxy.crt    可选，可以使用jwt token。用于kube-proxy.conf</td>
<td>/CN=system:kube-proxy</td>
<td>绑定到clusterrolebinding/system:node-proxier</td>
</tr>
<tr>
<td align="left">bootstrap.conf，据此自动生成kubelet.confg</td>
<td>user: system:bootstrapper</td>
<td>绑定到clusterrolebinding/system:bootstrapper</td>
</tr>
<tr>
<td align="left">admin.conf</td>
<td>/CN=kubernetes-admin/O=system:masters</td>
<td>通过O=system:masters绑定到clusterrolebinding/cluster-admin</td>
</tr>
</tbody>
</table>
<h3 id="kube-aggregator">三、kube-aggregator(代理)及相关的数字证书<a class="headerlink" href="#kube-aggregator" title="Permanent link">¶</a></h3>
<p>​   除了API Server提供的核心API，Kubernetes还支持通过聚合层（aggregation layer）对其进行扩展。简单来说，聚合层允许管理员在群集中部署使用额外的Kubernetes风格的API，例如service catalog或用户自定义的API server等。聚合层本身打包在kube-apiserver程序中并作为进程的一部分运行，但仅在管理员通过行定的APIService对象注册扩展资源之后，它才为其<strong>代理转发</strong>相应的请求。通常，APIService会由运行于Kubernetes集群上的Pod中的extention-apiserver实现。</p>
<p>​   由kube-aggregator控制器提供服务的组apiregistraion.k8s.io/v1beta1下的APIService资源是用于注册扩展apiserver的API。</p>
<p>​   创建一个APIService资源时，作为注册和发现过程的一部分，kube-aggregator控制器（位于kube-apiserver内部）将启动与extention-apiserver的基于TLS（若启用了的话）的HTTP2连接，而后经由此连接将经过身份验证的用户请求代理到extention-apiserver上，于是，kube-aggregator被设置为执行RequestHeader客户端认证。</p>
<p><img alt="img" src="https://gitee.com/ljzsdut/pic/raw/master/default/640-1576548123937.webp" /></p>
<p>不过，只有kube-apiserver在启动时使用了如下选项时才能启用其内建的聚合层：</p>
<div class="codehilite"><pre><span></span><code>--requestheader-client-ca-file<span class="o">=</span>&lt;path to aggregator CA cert&gt;
--requestheader-allowed-names<span class="o">=</span>front-proxy-client
--requestheader-extra-headers-prefix<span class="o">=</span>X-Remote-Extra-
--requestheader-group-headers<span class="o">=</span>X-Remote-Group
--requestheader-username-headers<span class="o">=</span>X-Remote-User
--proxy-client-cert-file<span class="o">=</span>&lt;path to aggregator proxy cert&gt;
--proxy-client-key-file<span class="o">=</span>&lt;path to aggregator proxy key&gt;
</code></pre></div>

<p>proxy-client-cert-file和proxy-client-key-file包含kube-aggregator执行客户端证书身份验证的证书/密钥对，它使用requestheader-client-ca-file中指定的CA文件对聚合器证书进行签名。requestheader-allowed-names包含允许充当伪装前端代理的身份/名称列表（客户端证书中使用的CN），而requestheader-username-headers、requestheader-group-headers和requestheader-extraheaders-prefix携带一个HTTP头的列表，用于携带远程用户信息。</p>
<table>
<thead>
<tr>
<th>类型</th>
<th>作用</th>
<th>使用程序</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>Client</td>
<td>kube-aggregator用于连接extension-apiserver的客户端证书</td>
<td>kube-apiserver中的kube-aggregator</td>
<td>使用--proxy-client-cert-file和--proxy-client-key-file选项指定用于认证到extension-apiserver的客户端证书和私钥</td>
</tr>
<tr>
<td>CA</td>
<td></td>
<td></td>
<td>前端代理CA，kube-apiserver使用--requestheader-client-ca-file指定用于对聚合器证书进行签名</td>
</tr>
</tbody>
</table>
<h3 id="service_account_key">四、Service Account key<a class="headerlink" href="#service_account_key" title="Permanent link">¶</a></h3>
<blockquote>
<p>As per <a href="https://github.com/kubernetes/kubernetes/issues/22351#issuecomment-26082410">https://github.com/kubernetes/kubernetes/issues/22351#issuecomment-26082410</a></p>
<p>The service account token private key (sa.key) given only to the controller
manager, is used to sign the tokens.</p>
<p>The masters only need the public key portion (sa.pub) in order to verify the
tokens signed by the controller manager.</p>
<p>The service account public key has to be the same for all. In an HA setup
that means you need to explicitly give it to each apiserver (recommended) or
make all the apiservers use the same serving cert/private TLS key (not
recommended).</p>
<p>As a convenience, you can provide a private key to both, and the public key
portion of it will be used by the api server to verify token signatures.</p>
<p>As a further convenience, the api server's private key for it's serving
certificate is used to verify service account tokens if you don't specify
<code>--service-account-key-file</code></p>
<p><code>--tls-cert-file</code> and <code>--tls-private-key-file</code> are used to provide the
serving cert and key to the api server. If you don't specify these, the api
server will make a self-signed cert/key-pair and store it at
<code>apiserver.crt/apiserver.key</code></p>
<p>翻译：</p>
<p>controller-manager使用--service-account-private-key-file=/etc/kubernetes/pki/sa.key选项指定sa.key私钥文件，用于加密Service Account的Token。</p>
<p>apiserver使用<code>--service-account-key-file=/etc/kubernetes/pki/sa.pub</code>选项指定sa.pub公钥，用于解密ServiceAccount的token。文件中可以包含多个Key，这一参数可以重复指定多个文件。如果没指定的话，会使用--tls-private-key-file替代。</p>
<p>Controller Manager使用私钥签署 Service Account的Token，apiserver用公钥来检验ServiceAccount的token。Controller Manager使用的私钥跟Kubernetes中使用的其他私钥不同的是，这个私钥是不支持同一CA验证的，因此，需要给每个Controller Manager 指定一致的私钥文件。这个私钥文件也不需要什么CA来做签署，生成很容易：<code>openssl genrsa -out private.key 4096</code>，然后分发给每个 Controller Manager 和 API Server 就可以了。</p>
<p>apiserver使用和<code>--tls-private-key-file</code>一致的文件是可以工作的，只要你给每个API Server用的都是同一个 TLS Key（一般都这么做的吧？）。（这里我假设你运行的一个有高可用支持的，多个API Server和多个Controller Manager同时运行的集群）如果两个不同的Controller Manager用了两个不同的Key，那就杯具了，他们会用各自的Key来生成 Token，最终导致无效判定。我觉得这点不太合理，Kubernetes应该和其他方面一样，使用CA 进行管理。通过对源码的阅读，我觉得原因可能是jwt-go不支持CA。</p>
</blockquote>
<h3 id="_1">五、相关的数字证书<a class="headerlink" href="#_1" title="Permanent link">¶</a></h3>
<p>总结起来，Kubernetes集群至少需要三个CA，分别用于为不同应用场景中的服务端、客户端或对等节点间的通信签署证书。</p>
<p><img alt="img" src="https://gitee.com/ljzsdut/pic/raw/master/default/640-1576547855534.webp" /></p>
<p>各组件大致要用到如下表格中的证书：</p>
<p><img alt="img" src="https://gitee.com/ljzsdut/pic/raw/master/default/640-1576547862300.webp" /></p>
<p>以及以下kubeconfig配置文件，它们承载了相关客户端的认证凭据，这些认证凭据通常也来自于数字证书：</p>
<p><img alt="img" src="https://gitee.com/ljzsdut/pic/raw/master/default/640-1576547867301.webp" /></p>
<div class="codehilite"><pre><span></span><code><span class="o">[</span>root@physerver certs<span class="o">]</span><span class="c1"># tree master-etc/</span>
master-etc/
├── etcd
│   └── pki
│       ├── ca.crt
│       ├── ca.key
│       ├── ca.srl
│       ├── peer.crt  <span class="c1">#etcd集群节点间相互认证使用，每个节点既是Client，又是server</span>
│       ├── peer.key
│       ├── server.crt  <span class="c1">#etcd使用的server证书，实现客户端来验证etcd的身份。</span>
│       └── server.key
└── kubernetes
    ├── auth
    │   ├── admin.conf  <span class="c1">#kubelet使用，通过O=system:masters绑定到clusterrolebinding/cluster-admin</span>
    │   ├── controller-manager.conf  <span class="c1">#kube-controller-manage使用，绑定到clusterrolebinding/system:kube-controller-manager</span>
    │   └── scheduler.conf  <span class="c1">#kube-scheduler使用，绑定到clusterrolebinding/system:kube-scheduler</span>
    ├── pki
    │   ├── apiserver.crt  <span class="c1">#apiserver的server证书，用于各种客户端验证apiserver身份</span>
    │   ├── apiserver-etcd-client.crt  <span class="c1">#etcd的ca签发给apiserver的证书，用于etcd认证apiserver身份</span>
    │   ├── apiserver-etcd-client.key
    │   ├── apiserver.key
    │   ├── apiserver-kubelet-client.crt  <span class="c1">#apiserver作为客户端用来请求kubelet的api，实现验证apiserver身份</span>
    │   ├── apiserver-kubelet-client.key
    │   ├── ca.crt
    │   ├── ca.key
    │   ├── ca.srl
    │   ├── front-proxy-ca.crt
    │   ├── front-proxy-ca.key
    │   ├── front-proxy-ca.srl
    │   ├── front-proxy-client.crt  <span class="c1">#kube-aggregator用于连接extension-apiserver的客户端证书，实现kube-aggregator的身份验证</span>
    │   ├── front-proxy-client.key
    │   ├── sa.key  <span class="c1">#controller-manager用于加密Service Account的Token。</span>
    │   └── sa.pub  <span class="c1">#apiserver用于解密ServiceAccount的token。</span>
    └── token.csv  <span class="c1">#apiserver的token认证:--token-auth-file=/etc/kubernetes/token.csv</span>

<span class="m">5</span> directories, <span class="m">27</span> files
<span class="o">[</span>root@physerver certs<span class="o">]</span><span class="c1"># tree node-etc/</span>
node-etc/
└── kubernetes
    ├── auth
    │   ├── bootstrap.conf   <span class="c1">#kubelet使用，绑定到clusterrolebinding/system:bootstrapper</span>
    │   └── kube-proxy.conf  <span class="c1">#kube-proxy使用，绑定到clusterrolebinding/system:node-proxier</span>
    └── pki
        └── ca.crt

<span class="m">3</span> directories, <span class="m">3</span> files
</code></pre></div>

<h3 id="_2">六、小结<a class="headerlink" href="#_2" title="Permanent link">¶</a></h3>
<p>总结起来，Kubernetes要基于PKI完成如下操作</p>
<ul>
<li>API Server通过客户端证书认证到etcd</li>
<li>API Server的服务端证书</li>
<li>kubelet使用客户端证书认证到API Server</li>
<li>Controller Manager使用客户端证书和kubeconfig文件认证到API Server</li>
<li>Scheduler使用客户端证书和kubeconfig文件认证到API Server</li>
<li>API Server通过客户端证书认证到kubelet</li>
<li>Aggregator的代理服务用到的客户端及服务端证书</li>
</ul>
<p>参考文章：</p>
<p>https://nixaid.com/deploying-kubernetes-cluster-from-scratch/</p>
<p>https://kubernetes.io/docs/reference/command-line-tools-reference/kubelet-authentication-authorization/</p>
<h2 id="k8s">【理论】k8s各种证书介绍：<a class="headerlink" href="#k8s" title="Permanent link">¶</a></h2>
<hr />
<h3 id="1api_server">1、API Server证书：<a class="headerlink" href="#1api_server" title="Permanent link">¶</a></h3>
<p>如果用TLS连接API Server，API Server就需要这两个参数来选择使用的证书。</p>
<div class="codehilite"><pre><span></span><code>--tls-cert-file<span class="o">=</span>/etc/kubernetes/pki/apiserver.crt
--tls-private-key-file<span class="o">=</span>/etc/kubernetes/pki/apiserver.key
</code></pre></div>

<h3 id="2api_server">2、客户端认证API Server证书：<a class="headerlink" href="#2api_server" title="Permanent link">¶</a></h3>
<p>验证证书身份，使用的是ca的证书（用于签发该证书的CA的证书）。</p>
<p>设置了apiserer使用的证书之后，各个组件来验证apiserver身份时，需要知道使用哪个ca来验证，k8s的各个组件使用--kubeconfig参数指定kubeconfig文件来获取ca信息。所以需要给各个组件的kubeconfig文件中的cluster中指定以上证书的所属CA,例如：</p>
<div class="codehilite"><pre><span></span><code><span class="nt">current-context</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">my-context</span>
<span class="nt">apiVersion</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">clusters</span><span class="p">:</span>
<span class="p p-Indicator">-</span> <span class="nt">cluster</span><span class="p">:</span>
    <span class="nt">certificate-authority</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/path/to/my/ca.crt</span> <span class="c1">#签发API Server证书的CA证书</span>
    <span class="nt">server</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">https://horse.org:4443</span>
  <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">my-cluster</span>
<span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Config</span>
<span class="nt">users</span><span class="p">:</span>
<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">green-user</span>
  <span class="nt">user</span><span class="p">:</span>
    <span class="nt">client-certificate</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">path/to/my/client/cert</span>
    <span class="nt">client-key</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">path/to/my/client/key</span>
</code></pre></div>

<p>以上操作完成客户端对apiserver的身份认证。</p>
<hr />
<h3 id="3api_server">3、API Server认证客户端证书：<a class="headerlink" href="#3api_server" title="Permanent link">¶</a></h3>
<div class="codehilite"><pre><span></span><code>--client-ca-file<span class="o">=</span>/etc/kubernetes/pki/ca.crt
</code></pre></div>

<p>首先，所有客户端证书都应该由该CA签发（该CA不需要和签发API Server证书的CA一致）。所有客户端使用该CA签发的证书来请求apiserver时，会使用客户端证书中相应的CN作为用户名进行身份认证。
当客户端使用kubeconfig文件的时候，可以按照如下方式设置它们使用的证书：</p>
<div class="codehilite"><pre><span></span><code><span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Config</span>
<span class="nt">users</span><span class="p">:</span>
<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">green-user</span>
  <span class="nt">user</span><span class="p">:</span>
    <span class="nt">client-certificate</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">path/to/my/client/cert</span>
    <span class="nt">client-key</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">path/to/my/client/key</span>
</code></pre></div>

<p>以上操作,apiserver使用<code>--client-ca-file=/etc/kubernetes/pki/ca.crt</code>对客户端的身份进行认证。</p>
<hr />
<h3 id="4requestheader">4、认证代理：requestheader<a class="headerlink" href="#4requestheader" title="Permanent link">¶</a></h3>
<p>Kubernetes 做了很多用户证书方面的假设（用户名就是证书的Common Name，用户组就是证书的 Organization）。如果这些假设不符合需求，那么就应该停用客户端证书认证，改用认证代理。代理会使用HTTP Header 将用户名和组发送给API Server。这里的代理也就是聚合层（aggregation layer），本身打包在kube-apiserver程序中并作为进程的一部分运行。</p>
<p>如何在http header中设置指定的用户名和用户组？通过<code>--requestheader-group-headers=X-Remote-Group</code>和<code>--requestheader-username-headers=X-Remote-User</code>来定义用户名和用户组。</p>
<p>使用认证代理的请求流程：</p>
<div class="codehilite"><pre><span></span><code>客户端 ---发起请求---&gt; 代理 ---Add Header:发起请求---&gt; kube-apiserver
                   (客户端证书)                        (服务端证书)
</code></pre></div>

<p>代理使用一个客户端证书表明身份（代理使用<code>--proxy-client-cert-file=/etc/kubernetes/pki/front-proxy-client.crt</code>和<code>--proxy-client-key-file=/etc/kubernetes/pki/front-proxy-client.key</code>指定的客户端证书来表明身份），使用<code>--requestheader-client-ca-file=/etc/kubernetes/pki/front-proxy-ca.crt</code>告知API Server，该证书所属的CA，API Server使用该ca证书来验证认证代理。
<code>--requestheader-username-headers=X-Remote-User</code>中指定的Header中包含用户名，这一参数的列表确定了允许有效的Common Name，如果这一参数的列表为空，则所有通过<code>-–requestheader-client-ca-file</code>校验的都允许通过。</p>
<hr />
<h3 id="5service_account_ca">5、service account 私钥（不是 CA 签发的，只是用普通的公钥和私钥）<a class="headerlink" href="#5service_account_ca" title="Permanent link">¶</a></h3>
<ul>
<li>controller-manager：<code>--service-account-private-key-file=/etc/kubernetes/pki/sa.key</code>  controller-manager用于加密Service Account Token。</li>
<li>apiserver：<code>--service-account-key-file=/etc/kubernetes/pki/sa.pub</code>  apiserver用于解密ServiceAccount的 token。文件中可以包含多个Key，这一参数可以重复指定多个文件。如果没指定的话，会使用--tls-private-key-file替代。</li>
</ul>
<p>Controller Manager使用私钥签署 Service Account Token，apiserver用公钥来检验ServiceAccount的token。Controller Manager使用的私钥跟Kubernetes中使用的其他私钥不同的是，这个私钥是不支持同一CA验证的，只是普通的公钥、私钥，没有经过CA的签名。因此，需要给每个Controller Manager 指定一致的私钥文件。这个私钥文件也不需要什么CA来做签署，生成很容易：<code>openssl genrsa -out private.key 4096</code>，然后分发给每个 Controller Manager 和 API Server 就可以了。</p>
<p>apiserver使用和--tls-private-key-file一致的文件是可以工作的，只要你给每个API Server用的都是同一个 TLS Key（一般都这么做的吧？）。（这里我假设你运行的一个有高可用支持的，多个API Server和多个Controller Manager同时运行的集群）如果两个不同的Controller Manager用了两个不同的Key，那就杯具了，他们会用各自的Key来生成 Token，最终导致无效判定。我觉得这点不太合理，Kubernetes应该和其他方面一样，使用CA 进行管理。通过对源码的阅读，我觉得原因可能是jwt-go不支持CA。</p>
<h3 id="6">6、总结<a class="headerlink" href="#6" title="Permanent link">¶</a></h3>
<p>使用kubeadm安装k8s时，使用的3种CA和它们签署的证书：</p>
<p>k8s建议使用不同的ca签署不同的证书（下图使用了3套CA），但是为了简单，也可以使用同一个ca签署所有的证书。</p>
<p><img alt="k8s证书介绍" src="https://gitee.com/ljzsdut/pic/raw/master/default/k8s证书机器签发.png" /></p>
<p>参考文档：
https://www.kubernetes.org.cn/2540.html
https://docs.lvrui.io/2018/09/28/%E8%AF%A6%E8%A7%A3kubeadm%E7%94%9F%E6%88%90%E7%9A%84%E8%AF%81%E4%B9%A6/    </p>
<h2 id="kubernetes-">【理论】Kubernetes集群高可用-概述<a class="headerlink" href="#kubernetes-" title="Permanent link">¶</a></h2>
<p>Kubernetes具有自愈能力，它跟踪到某工作节点发生故障时，控制平面可以将离线节点上的Pod对象重新编排至其它可用工作节点运行，因此，更多的工作节点也意味着更好的容错能力，因为它使得Kubernetes在实现工作节点故障转移时拥有更加灵活的自由度。而当管理员检测到集群负载过重或无法容纳其更多的Pod对象时，通常需要手动将节点添加到群集，其过程略繁琐，Kubernetes cluster-autoscaler还为集群提供了规模按需自动缩放的能力。</p>
<p>然而，添加更多工作节点并不能使群集适应各种故障，例如，若主API服务器出现故障（由于其主机出现故障或网络分区将其从集群中隔离），将无法再跟踪和控制集群。因此，还需要冗余控制平面的各组件以实现主节点的服务高可用性。基于冗余数量的不同，控制平面能容忍一个甚至是几个节点的故障。一般来说，高可用控制平面至少需要三个Master节点来承受最多一个Master节点的丢失，才能保证等待状态的Master能保持半数以上以满足节点选举时的法定票数。一个最小化的Master节点高可用架构如下图所示。</p>
<p><img alt="img" src="https://gitee.com/ljzsdut/pic/raw/master/default/640-1576547876592.webp" /></p>
<p>Kubernetes组件中仅etcd需要复杂逻辑完成集群功能，其它组件间的松耦合特性使得能够通过多种方式实现Master节点的高可用性，上图是较为常用的一种架构，各架构方式也通常有一些共同的指导方针： </p>
<p>（1）利用etcd自身提供的分布式存储集群为kubernetes构建一个可靠的存储层；</p>
<p>（2）将无状态的apiserver运行为多副本(本质就是http服务器)，并在其前端使用负载均衡器(或DNS)调度请求；需要注意的是，负载均衡器本身也需要高可用；可以使用Haproxy/Nginx+keepalived实现。</p>
<p>（3）多副本的控制器管理器，并通过其自带的leader选举功能（--leader-election）选举出主角色，余下的副本在主角色故障时自动启动新一轮的选举操作；该功能默认开启。</p>
<p>（4）多副本的调度器，并通过其自带的leader选举功能（--leader-election）选举出主角色，余下的副本在主角色故障时自动启动新一轮的选举操作；该功能默认开启。</p>
<p>controller-manager、scheduler选举方法：</p>
<p>它们选举leader的方式是抢占式选举：各node间无需相互通信，各个node通过竞赛的方式去api-server上注册一个EndPoint对象，当有一个注册后其他node就无法注册只能等待重新抢占的机会，当某个node注册成功后，他就持有这个ep对象也就是成为了Leader。而且Leader在持有ep期间，需要定期去更新这个EndPoint的时间戳，如果3个周期没有更新，则认为当前Leader挂掉，其他的node则开始新一轮的抢占选举。后面有详细介绍。</p>
<h3 id="etcd_1">一、etcd服务高可用<a class="headerlink" href="#etcd_1" title="Permanent link">¶</a></h3>
<hr />
<p>分布式服务之间进行可靠、高效协作的关键前提是有一个可信的数据存储和共享机制，etcd项目正是致力于此目的构建的分布式数据存储系统，它以键值格式组织数据，主要用于配置共享和服务发现，也支持实现分布式锁、集群监控和leader选举等功能。</p>
<p>etcd基于Go语言开发，内部采用raft协议作为共识算法进行分布式协作，通过将数据同步存储在多个独立的服务实例上从而提高数据的可靠性(数据多副本)，避免了单点故障导致数据丢失。<strong>Raft协议通过选举出的leader节点实现数据一致性，由leader节点负责所有的写入请求并同步给集群中的所有节点，在取决半数以上follower节点的确认后予以持久存储。</strong>这种需要半数以上节点投票的机制要求集群数量最好是奇数个节点，推荐的数量为3个、5个或7个。Etcd集群的建立有三种方式：</p>
<p>（1）静态集群：事先规划并提供所有节点的固定IP地址以组建集群，仅适合于能够为节点分配静态IP地址的网络环境，好处是它不依赖于任何外部服务；</p>
<p>（2）基于etcd发现服务构建集群：通过一个事先存在的etcd集群进行服务发现来组建新集群，支持集群的动态构建，它依赖于一个现存可用的etcd服务；</p>
<p>（3）基于DNS的服务资源记录构建集群：通过在DNS服务上的某域名下为每个节点创建一条SRV记录，而后基于此域名进行服务发现来动态组建新集群，它依赖于DNS服务及事先管理妥当的资源记录；</p>
<p>一般说来，对于etcd分布式存储集群来说，三节点集群可容错一个节点，五节点集群可容错两个节点，七节点集群可容错三个节点，依次类推，但通常多于七个节点的集群规模是不必要的，而且对系统性能也会产生负面影响。</p>
<p><img alt="sYpocf-1595315814340" src="https://gitee.com/ljzsdut/pic/raw/master/default/sYpocf-1595315814340.png" /></p>
<h3 id="apiserver">二、apiserver高可用<a class="headerlink" href="#apiserver" title="Permanent link">¶</a></h3>
<p>apiserver本质上就是一个http服务器，本身是无状态的，他们的状态数据保存在etcd中。这种无状态的应用实现高可用是十分简单的，只需将无状态的apiserver运行为多副本，并在其前端使用负载均衡器调度请求(或DNS调度)；需要注意的是，负载均衡器本身也需要高可用；可以使用Haproxy/Nginx+keepalived实现。</p>
<h3 id="controller_managerscheduler">三、Controller Manager和Scheduler高可用<a class="headerlink" href="#controller_managerscheduler" title="Permanent link">¶</a></h3>
<hr />
<p>Controller Manager通过监控API server上的资源状态变动并按需分别执行相应的操作，于是，多实例运行的kube-controller-manager进程可能会导致同一操作行为被每一个实例分别执行一次，例如某一Pod对象创建的请求被3个控制器实例分别执行一次进而创建出一个Pod对象副本来。因此，在某一时刻，仅能有一个kube-controller-manager实例正常工作状态，余下的均处于备用状态，或称为等待状态。</p>
<p>多个kube-controller-manager实例要同时启用“<code>--leader-elect=true</code>”选项以自动实现leader选举，选举过程完成后，仅leader实例处于活动状态，余下的其它实例均转入等待模式，它们会在探测到leader故障时进行新一轮选举。与etcd集群基于raft协议进行leader选举不同的是，kube-controller-manager集群各自的选举操作仅是通过在kube-system名称空间中创建一个与程序同名的Endpoint资源对象实现。</p>
<div class="codehilite"><pre><span></span><code>~<span class="o">]</span>$ kubectl get endpoints -n kube-system
NAME                       ENDPOINTS       AGE
kube-controller-manager    &lt;none&gt;          13h
kube-scheduler             &lt;none&gt;          13h
…
</code></pre></div>

<p>这种leader选举操作是分布式锁机制的一种应用，它通过创建和维护kubernetes资源对象来维护锁状态，目前kubernetes支持ConfigMap和Endpoints两种类型的资源锁。初始状态时，各kube-controller-manager实例通过<strong>竞争方式</strong>去抢占指定的Endpoint资源锁。胜利者将成为leader，它通过更新相应的Endpoint资源的注解control-plane.alpha.kubernetes.io/leader中的“holderIdentity”为其节点名称从而将自己设置为锁的持有者，并基于<strong>周期性更新</strong>同一注解中的“renewTime”以声明自己对锁资源的持有状态以避免等待状态的实例进行争抢。于是，一旦某leader不再更新renewTime（例如3个周期内都未更新），等待状态的各实例将一哄而上进行新一轮竞争。</p>
<div class="codehilite"><pre><span></span><code>~<span class="o">]</span>$ kubectl describe endpoints kube-controller-manager -n kube-system
Name:         kube-controller-manager
Namespace:    kube-system
Labels:       &lt;none&gt;
Annotations:  control-plane.alpha.kubernetes.io/leader<span class="o">={</span><span class="s2">&quot;holderIdentity&quot;</span>:<span class="s2">&quot;master1.ilinux.io_846a3ce4-b0b2-11e8-9a23-00505628fa03&quot;</span>,<span class="s2">&quot;leaseDurationSeconds&quot;</span>:15,<span class="s2">&quot;acquireTime&quot;</span>:<span class="s2">&quot;2018-09-05T02:22:54Z&quot;</span>,<span class="s2">&quot;renewTime&quot;</span>:<span class="s2">&quot;2018-09-05T02:40:55Z&quot;</span>,<span class="s2">&quot;leaderTransitions&quot;</span>:1<span class="o">}</span><span class="err">&#39;</span>
Subsets:
Events:
  Type    Reason          Age   From                     Message
  ----    ------          ----  ----                     -------
  Normal  LeaderElection  13h   kube-controller-manager  master0.ilinux.io_e8fca6fc-b049-11e8-a247-000c29ab0f5b became leader
  Normal  LeaderElection  5m   kube-controller-manager  master1.ilinux.io_846a3ce4-b0b2-11e8-9a23-00505628fa03 became leader
</code></pre></div>

<p>kube-scheduler的实现方式与此类似，只不过它使用自己专用的Endpoint资源kube-scheduler。</p>
<h2 id="kubeadm">【理论】kubeadm部署介绍<a class="headerlink" href="#kubeadm" title="Permanent link">¶</a></h2>
<p>参考文档：<a href="https://kubernetes.io/docs/setup/production-environment/tools/kubeadm/high-availability/">多Master的k8s安装</a></p>
<h3 id="master">一、多Master拓补图<a class="headerlink" href="#master" title="Permanent link">¶</a></h3>
<p><img alt="安装拓补图" src="https://gitee.com/ljzsdut/pic/raw/master/default/20190827110823410.png" /></p>
<p><img alt="sYpocf-1595315814340" src="https://gitee.com/ljzsdut/pic/raw/master/default/sYpocf-1595315814340.png" /></p>
<h3 id="_3">二、安装步骤<a class="headerlink" href="#_3" title="Permanent link">¶</a></h3>
<ul>
<li>前提工作：</li>
</ul>
<p>Master+Node：安装docker+kubelet，此外还需要安装kubeadm和kubectl（kubectl并非必须）。docker提供容器运行时环境；kubelet在Node节点上运行工作负载Pod，并且在master节点上用来运行apiserver等静态Pod，当然如果允许master节点接收工作负载，也可以运行工作负载Pod。</p>
<ul>
<li>初始化master：</li>
</ul>
<p>将api-server、controller-manager、scheduler、etcd四个组件通过kubelet以静态pod模式运行（<a href="https://kubernetes.io/docs/tasks/configure-pod-container/static-pod/">staic pod</a>）,manifest文件默认位于/etc/kubernetes/manifests。</p>
<ul>
<li>node：</li>
</ul>
<p>将kube-proxy组件通过kubelet以pod模式运行（其实kube-procy和CoreDNS都是在kubeadm init阶段以DaemonSet形式运行的）</p>
<ul>
<li>Master+Node：</li>
</ul>
<p>安装flanel插件（只需要在Master上手动安装，node上会自动触发安装，因为flannel是以DaemonSet方式运行的）</p>
<h3 id="_4">三、安装原理描述<a class="headerlink" href="#_4" title="Permanent link">¶</a></h3>
<ol>
<li>使用kubeadm安装k8s集群，因为Master和Node节点都是使用pod运行的各个组件，所以每个节点包括Master和Node都需要安装docker-ce和kubelet两个组件，而且Master和Node节点初始化时都要使用kubeadm命令，此外如果要在某个节点上使用命令行工具kubectl，还要在该节点上安装kubectl工具，所以一般我们会在所有节点上安装4个rpm包：docker-ce、kubelet、kubeadm、kubectl。</li>
<li>Master节点运行kubeadm init命令时，通过kubectl工具会将api-server、controller-manager、scheduler、etcd四个组件以static pod的方式运行（自己拉取镜像），此外还会在Master上安装kube-proxy和CoreDNS（同样会以pod的方式运行，但不是以static方式运行）。Master节点上也需要kubelet组件来运行pod，但是kubelet是以daemon模式运行。</li>
<li>Master节点初始化后，各pod之间还不能通信，例如CoreDNS不能进入running状态，需要我们单独安装pod network组件，例如flannel、calico等，当然这些add-on也是以pod的方式运行。</li>
<li>Node节点使用kubeadm join命令加入到k8s集群中。运行此命令后，Node节点会自己拉取相关镜像以pod的方式运行kube-proxy和flannel等pod network组件。（Node节点上的kubelet是以daemon模式运行）</li>
</ol>
<h2 id="kubeadmk8s">【实战】kubeadm安装k8s高可用集群：<a class="headerlink" href="#kubeadmk8s" title="Permanent link">¶</a></h2>
<h3 id="_5">一、准备设置<a class="headerlink" href="#_5" title="Permanent link">¶</a></h3>
<p>准备工作需要在所有的节点进行。</p>
<h4 id="11selinuxswap">1.1、关闭防火墙、selinux、swap、时间同步等<a class="headerlink" href="#11selinuxswap" title="Permanent link">¶</a></h4>
<div class="codehilite"><pre><span></span><code>cat &gt;/etc/hosts <span class="s">&lt;&lt;EOF</span>
<span class="s">127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4</span>
<span class="s">::1         localhost localhost.localdomain localhost6 localhost6.localdomain6</span>
<span class="s">192.168.6.121 k8s-master01 k8s-master01.ljzsdut.com</span>
<span class="s">192.168.6.122 k8s-master02 k8s-master02.ljzsdut.com</span>
<span class="s">192.168.6.123 k8s-master03 k8s-master03.ljzsdut.com</span>
<span class="s">192.168.6.124 k8s-node01 k8s-node01.ljzsdut.com</span>
<span class="s">192.168.6.125 k8s-node02 k8s-node01.ljzsdut.com</span>
<span class="s">192.168.6.126 k8s-node03 k8s-node01.ljzsdut.com</span>
<span class="s">EOF</span>

systemctl stop firewalld <span class="p">;</span> systemctl disable firewalld <span class="p">;</span> setenforce <span class="m">0</span> <span class="p">;</span> sed -i <span class="s2">&quot;s/^SELINUX=enforcing/SELINUX=disabled/g&quot;</span> /etc/sysconfig/selinux /etc/selinux/config

swapoff -a <span class="p">;</span> sed -i <span class="s1">&#39;s/.*swap.*/#&amp;/&#39;</span> /etc/fstab

cat <span class="s">&lt;&lt;EOF &gt;  /etc/sysctl.d/k8s.conf</span>
<span class="s">net.bridge.bridge-nf-call-ip6tables = 1</span>
<span class="s">net.bridge.bridge-nf-call-iptables = 1</span>
<span class="s">net.ipv6.conf.all.disable_ipv6=1</span>
<span class="s">net.ipv4.ip_forward=1      #开启内核转发</span>
<span class="s">net.ipv4.tcp_tw_recycle=0  #NAT环境中建议关闭</span>
<span class="s">vm.swappiness=0  #禁止使用swap空间，只有当系统发生OOM是才允许使用</span>
<span class="s">vm.overcommit_memory=1  #内存分配策略：不检查物理内存是否够用</span>
<span class="s">vm.panic_on_oom=0  #0表示开启OOM，杀死某些进程，而不是进行kernel pannic</span>
<span class="s">fs.inotify.max_user_instances=8192</span>
<span class="s">fs.inotify.max_user_watches=1048576</span>
<span class="s">fs.file-max=52706963</span>
<span class="s">fs.nr_open=52706963</span>
<span class="s">net.netfilter.nf_conntrack_max=2310720  # 最大跟踪连接数</span>
<span class="s">EOF</span>
sysctl --system

rpm -qa <span class="p">|</span>grep chrony <span class="p">&amp;</span>&gt;/dev/null <span class="o">||</span> yum install -y chrony
sed -i <span class="s1">&#39;2a server ntp1.aliyun.com iburst&#39;</span> /etc/chrony.conf
systemctl restart chronyd
systemctl <span class="nb">enable</span> chronyd

<span class="c1">#关闭系统不需要的服务(可选)</span>
systemctl stop postfix
systemctl disable postfix
</code></pre></div>

<h4 id="1244">1.2、升级内核到4.4（推荐）<a class="headerlink" href="#1244" title="Permanent link">¶</a></h4>
<div class="codehilite"><pre><span></span><code><span class="c1">#Centos7自带的3.10.x内核存在一些bug，导致docker、kubernetes不稳定。建议升级内核到4.4。</span>

<span class="c1">#参考文档：http://elrepo.org/tiki/tiki-index.php</span>
<span class="c1">#参考文档：https://blog.csdn.net/kikajack/article/details/79396793</span>


<span class="c1">#1、导入公钥</span>
rpm --import https://www.elrepo.org/RPM-GPG-KEY-elrepo.org
<span class="c1">#2、安装elrepo内核软件源</span>
yum install -y https://www.elrepo.org/elrepo-release-7.0-4.el7.elrepo.noarch.rpm
<span class="c1">#3、查看可用的内核包</span>
yum --disablerepo<span class="o">=</span><span class="s2">&quot;*&quot;</span> --enablerepo<span class="o">=</span><span class="s2">&quot;elrepo-kernel&quot;</span> list available
<span class="c1">#4、安装长期支持版本</span>
yum --enablerepo<span class="o">=</span>elrepo-kernel install -y kernel-lt 

<span class="c1">#设置grub，开机从新内核启动：内核安装好后，需要设置为默认启动选项并重启后才会生效</span>
<span class="c1">#1、通过 gurb2-mkconfig 命令创建 grub2 的配置文件</span>
grub2-mkconfig -o /boot/grub2/grub.cfg
<span class="c1">#2、查看系统上的所有可以内核：</span>
awk -F<span class="se">\&#39;</span> <span class="s1">&#39;$1==&quot;menuentry &quot; {print i++ &quot; : &quot; $2}&#39;</span> /etc/grub2.cfg
<span class="m">0</span> : CentOS Linux <span class="o">(</span><span class="m">4</span>.4.202-1.el7.elrepo.x86_64<span class="o">)</span> <span class="m">7</span> <span class="o">(</span>Core<span class="o">)</span>
<span class="m">1</span> : CentOS Linux <span class="o">(</span><span class="m">3</span>.10.0-862.11.6.el7.x86_64<span class="o">)</span> <span class="m">7</span> <span class="o">(</span>Core<span class="o">)</span>
<span class="m">2</span> : CentOS Linux <span class="o">(</span><span class="m">3</span>.10.0-514.el7.x86_64<span class="o">)</span> <span class="m">7</span> <span class="o">(</span>Core<span class="o">)</span>
<span class="m">3</span> : CentOS Linux <span class="o">(</span><span class="m">0</span>-rescue-f58eebd168fc4ff3809f5af6bf26ada0<span class="o">)</span> <span class="m">7</span> <span class="o">(</span>Core<span class="o">)</span>
<span class="c1">#3、设置上面的0号内核为默认使用内核，然后重启</span>
grub2-set-default <span class="m">0</span>
reboot
</code></pre></div>

<h4 id="13ipvsipvsiptables">1.3、装入ipvs内核模块（建议启用ipvs，代替iptables）<a class="headerlink" href="#13ipvsipvsiptables" title="Permanent link">¶</a></h4>
<p>模块无需全部装入，可以按需装入，主要有ip_vs, ip_vs_rr, ip_vs_wrr, ip_vs_sh, nf_conntrack_ipv4</p>
<div class="codehilite"><pre><span></span><code>yum install -y ipvsadm   <span class="c1">#ipvs的管理工具，可选</span>
cat &gt; /etc/sysconfig/modules/ipvs.modules <span class="s">&lt;&lt;EOF</span>
<span class="s">#!/bin/bash</span>
<span class="s">ipvs_modules=&quot;ip_vs ip_vs_lc ip_vs_wlc ip_vs_rr ip_vs_wrr ip_vs_lblc ip_vs_lblcr ip_vs_dh ip_vs_sh ip_vs_fo ip_vs_nq ip_vs_sed ip_vs_ftp nf_conntrack_ipv4&quot;</span>
<span class="s">for kernel_module in \${ipvs_modules}; do</span>
<span class="s">    /sbin/modinfo -F filename \${kernel_module} &gt; /dev/null 2&gt;&amp;1</span>
<span class="s">    if [ $? -eq 0 ]; then</span>
<span class="s">        /sbin/modprobe \${kernel_module}</span>
<span class="s">    fi</span>
<span class="s">done</span>
<span class="s">EOF</span>
chmod <span class="m">755</span> /etc/sysconfig/modules/ipvs.modules <span class="o">&amp;&amp;</span> bash /etc/sysconfig/modules/ipvs.modules <span class="o">&amp;&amp;</span> lsmod <span class="p">|</span> grep -e ip_vs -e nf_conntrack_ipv4
</code></pre></div>

<p>从kubernetes1.8版本开始，新增了kube-proxy对ipvs的支持，并且在新版的kubernetes1.11版本中被纳入了GA。iptables模式问题不好定位，规则多了性能会显著下降，甚至会出现规则丢失的情况；相比而言，ipvs就稳定的多。</p>
<p><strong>在安装完k8s后，再进行启用ipvs的操作：</strong>请查看：五.1《kube-proxy启用ipvs》</p>
<p>参考文档：<a href="https://blog.csdn.net/shihao99/article/details/82588792">kube-proxy开启ipvs代替iptables</a></p>
<h4 id="14docker-ce">1.4、安装docker-ce软件<a class="headerlink" href="#14docker-ce" title="Permanent link">¶</a></h4>
<div class="codehilite"><pre><span></span><code><span class="c1"># docker阿里云源</span>
curl -o /etc/yum.repos.d/docker-ce.repo https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo

<span class="c1">### Install required packages for docker.</span>
yum install -y device-mapper-persistent-data lvm2
yum install -y docker-ce-19.03.8

<span class="c1">## Create /etc/docker directory.</span>
mkdir /etc/docker

<span class="c1"># Setup daemon.</span>
cat &gt; /etc/docker/daemon.json <span class="s">&lt;&lt;EOF</span>
<span class="s">{</span>
<span class="s">  &quot;graph&quot;: &quot;/u01/install/docker&quot;,</span>
<span class="s">  &quot;exec-opts&quot;: [&quot;native.cgroupdriver=systemd&quot;],</span>
<span class="s">  &quot;log-driver&quot;: &quot;json-file&quot;,</span>
<span class="s">  &quot;log-opts&quot;: {</span>
<span class="s">    &quot;max-size&quot;: &quot;100m&quot;,</span>
<span class="s">    &quot;max-file&quot;: &quot;3&quot;</span>
<span class="s">  },</span>
<span class="s">  &quot;storage-driver&quot;: &quot;overlay2&quot;,</span>
<span class="s">  &quot;storage-opts&quot;: [</span>
<span class="s">    &quot;overlay2.override_kernel_check=true&quot;</span>
<span class="s">  ],</span>
<span class="s">  &quot;registry-mirrors&quot;: [&quot;https://lqetgo1f.mirror.aliyuncs.com&quot;,&quot;https://docker.mirrors.ustc.edu.cn/&quot;],</span>
<span class="s">  &quot;insecure-registries&quot; : [&quot;https://harbor.ljzsdut.com&quot;]</span>
<span class="s">}</span>
<span class="s">EOF</span>

mkdir -p /etc/systemd/system/docker.service.d

<span class="c1"># Restart Docker</span>
systemctl daemon-reload
systemctl restart docker
systemctl <span class="nb">enable</span> docker
</code></pre></div>

<h4 id="15_kubeadmkubelet">1.5 、安装kubeadm、kubelet软件<a class="headerlink" href="#15_kubeadmkubelet" title="Permanent link">¶</a></h4>
<div class="codehilite"><pre><span></span><code><span class="c1"># kubernetes阿里云源</span>
cat <span class="s">&lt;&lt;-EOF &gt;/etc/yum.repos.d/kubernets.repo</span>
<span class="s">[Kubernetes]</span>
<span class="s">name=kubernetes repo</span>
<span class="s">baseurl=https://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64/</span>
<span class="s">gpgcheck=1</span>
<span class="s">gpgkey=https://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg https://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg</span>
<span class="s">enabled=1</span>
<span class="s">EOF</span>
<span class="c1">#安装kubeadm kubelet软件，为了保证与老节点的版本一致，我们可以指定安装版本</span>
<span class="nv">KUBE_VERSION</span><span class="o">=</span><span class="m">1</span>.18.2
yum install -y kubeadm-<span class="si">${</span><span class="nv">KUBE_VERSION</span><span class="si">}</span> kubelet-<span class="si">${</span><span class="nv">KUBE_VERSION</span><span class="si">}</span> kubectl-<span class="si">${</span><span class="nv">KUBE_VERSION</span><span class="si">}</span> ipvsadm  <span class="c1">#kubectl、ipvsadm可选</span>


<span class="c1"># start kubelet</span>
systemctl <span class="nb">enable</span> kubelet
systemctl start kubelet
systemctl status kubelet
</code></pre></div>

<blockquote>
<p>此时的kubelet处于每隔10秒重启一次的状态，这种崩溃循环是正常的，kubelet在这个崩溃循环中等待kubeadm告诉它该怎么做。kubeadm通过生成/var/lib/kubelet/config.yaml配置文件来告诉kubelet需要干什么。</p>
<p>"max-file": "3"  #每个容器中日志数量，分别是id+.json、id+1.json、id+2.json　</p>
</blockquote>
<h4 id="16kubectl">1.6、(可选)kubectl命令补全<a class="headerlink" href="#16kubectl" title="Permanent link">¶</a></h4>
<p><strong>bash</strong></p>
<div class="codehilite"><pre><span></span><code>yum install -y bash-completion <span class="c1">#会生成一个文件/usr/share/bash-completion/bash_completion</span>
<span class="nb">source</span> /usr/share/bash-completion/bash_completion
<span class="nb">echo</span> <span class="s1">&#39;source &lt;(kubectl completion bash)&#39;</span> &gt;&gt;/etc/profile <span class="o">&amp;&amp;</span> <span class="nb">source</span> /etc/profile
</code></pre></div>

<p><strong>Zsh</strong></p>
<p>自动补全的脚步可以通过 kubectl completion zsh 查看。下面是配置步骤：</p>
<p>在 ~/.zshrc 文件中添加</p>
<div class="codehilite"><pre><span></span><code><span class="nb">source</span> &lt;<span class="o">(</span>kubectl completion zsh<span class="o">)</span>
</code></pre></div>

<p>如果出现 complete:13: command not found: compdef 之类的错误，就在 ~/.zshrc 文件开头添加</p>
<div class="codehilite"><pre><span></span><code>autoload -Uz compinit
compinit
</code></pre></div>

<h3 id="loadblancer_keepalived">二、部署LoadBlancer &amp; keepalived<a class="headerlink" href="#loadblancer_keepalived" title="Permanent link">¶</a></h3>
<p><strong>部署负载均衡</strong></p>
<p>此处我们采用haproxy+keepalived组合，当然也可以使用nginx+keepalived组合</p>
<h4 id="213masterhaproxy">2.1、3台master安装haproxy<a class="headerlink" href="#213masterhaproxy" title="Permanent link">¶</a></h4>
<p>监听8443,后端为6443</p>
<div class="codehilite"><pre><span></span><code>yum install -y haproxy
<span class="c1">#修改配置文件如下</span>
<span class="nv">K8S_MASTER_01</span><span class="o">=</span><span class="m">192</span>.168.6.121@@@k8s-master01
<span class="nv">K8S_MASTER_02</span><span class="o">=</span><span class="m">192</span>.168.6.122@@@k8s-master02
<span class="nv">K8S_MASTER_03</span><span class="o">=</span><span class="m">192</span>.168.6.123@@@k8s-master03
<span class="nv">VIP</span><span class="o">=</span><span class="m">192</span>.168.6.120
<span class="nv">LOAD_BALANCER_PORT</span><span class="o">=</span><span class="m">6443</span>

<span class="nv">OTHER_MASTERS</span><span class="o">=()</span>
<span class="k">for</span> host <span class="k">in</span> <span class="si">${</span><span class="p">!K8S_MASTER_@</span><span class="si">}</span><span class="p">;</span><span class="k">do</span>
    <span class="k">if</span> ip a <span class="p">|</span>grep <span class="si">${</span><span class="p">!host//@@@*</span><span class="si">}</span> <span class="p">&amp;</span>&gt;/dev/null<span class="p">;</span><span class="k">then</span>
        <span class="nv">LOCAL_IP</span><span class="o">=</span><span class="si">${</span><span class="p">!host//@@@*</span><span class="si">}</span>
        <span class="nv">HostName</span><span class="o">=</span><span class="si">${</span><span class="p">!host##*@@@</span><span class="si">}</span>
    <span class="k">else</span>
        <span class="nv">OTHER_MASTERS</span><span class="o">+=(</span><span class="si">${</span><span class="p">!host//@@@*</span><span class="si">}</span><span class="o">)</span>
    <span class="k">fi</span>
<span class="k">done</span>

cat &gt;/etc/haproxy/haproxy.cfg <span class="s">&lt;&lt;EOF</span>
<span class="s">global</span>
<span class="s">        log /dev/log    local0</span>
<span class="s">        log /dev/log    local1 notice</span>
<span class="s">        chroot /var/lib/haproxy</span>
<span class="s">        stats socket /run/haproxy.sock mode 660 level admin</span>
<span class="s">        stats timeout 30s</span>
<span class="s">        user haproxy</span>
<span class="s">        group haproxy</span>
<span class="s">        daemon</span>
<span class="s">        nbproc 1</span>

<span class="s">defaults</span>
<span class="s">        log     global</span>
<span class="s">        timeout connect 5000</span>
<span class="s">        timeout client  10m</span>
<span class="s">        timeout server  10m</span>

<span class="s">listen kube-master</span>
<span class="s">        bind 0.0.0.0:8443</span>
<span class="s">        mode tcp</span>
<span class="s">        option tcplog</span>
<span class="s">        balance roundrobin </span>
<span class="s">EOF</span>
<span class="c1">#修改配置</span>
<span class="k">for</span> host <span class="k">in</span> <span class="si">${</span><span class="p">!K8S_MASTER_@</span><span class="si">}</span> <span class="p">;</span><span class="k">do</span>
    sed -i <span class="s1">&#39;/balance roundrobin/a\        server &#39;</span><span class="si">${</span><span class="p">!host##*@@@</span><span class="si">}</span><span class="se">\ </span><span class="si">${</span><span class="p">!host//@@@*</span><span class="si">}</span><span class="s1">&#39;:6443 check inter 2000 fall 2 rise 2 weight 1&#39;</span> /etc/haproxy/haproxy.cfg
<span class="k">done</span>

<span class="c1">#启动</span>
systemctl <span class="nb">enable</span> haproxy
systemctl restart haproxy
systemctl status haproxy -l
</code></pre></div>

<h4 id="223masterkeepalived">2.2、3台master安装keepalived<a class="headerlink" href="#223masterkeepalived" title="Permanent link">¶</a></h4>
<div class="codehilite"><pre><span></span><code>yum install -y psmisc        <span class="c1">#安装killall命令</span>
yum install -y keepalived

<span class="c1">#修改配置文件</span>
cat &gt;/etc/keepalived/keepalived.conf <span class="s">&lt;&lt;EOF</span>
<span class="s">global_defs {</span>
<span class="s">    router_id kube-master</span>
<span class="s">}</span>

<span class="s">vrrp_script check-haproxy {</span>
<span class="s">    script &quot;killall -0 haproxy&quot;</span>
<span class="s">    interval 5</span>
<span class="s">    weight -60</span>
<span class="s">}</span>

<span class="s">vrrp_instance VI-kube-master {</span>
<span class="s">    state  MASTER                       #BACKUP或者为MASTER</span>
<span class="s">    priority 120                        #不同节点的差值在60之内，因为&quot;weight -60&quot;</span>
<span class="s">    unicast_src_ip ${LOCAL_IP}        #当前节点ip</span>
<span class="s">    unicast_peer {                      #其他节点ip列表,每行一个</span>
<span class="s">    }</span>
<span class="s">    dont_track_primary</span>
<span class="s">    interface eth0                      #指定网卡</span>
<span class="s">    virtual_router_id 111               #同一个集群中，该值要相同，表示一个广播组</span>
<span class="s">    advert_int 3</span>
<span class="s">    track_script {</span>
<span class="s">        check-haproxy</span>
<span class="s">    }</span>
<span class="s">    virtual_ipaddress {</span>
<span class="s">        ${VIP}                   #指定VIP</span>
<span class="s">    }</span>
<span class="s">}</span>
<span class="s">EOF</span>
<span class="c1">#以上配置需要根据不同节点进行设置</span>
<span class="k">for</span> i <span class="k">in</span> <span class="si">${</span><span class="nv">OTHER_MASTERS</span><span class="p">[@]</span><span class="si">}</span><span class="p">;</span><span class="k">do</span>
    sed -i <span class="s1">&#39;/unicast_peer {/a\        &#39;</span><span class="nv">$i</span><span class="s1">&#39;&#39;</span> /etc/keepalived/keepalived.conf
<span class="k">done</span>

<span class="nv">num</span><span class="o">=</span><span class="m">0</span>
<span class="k">for</span> host <span class="k">in</span> <span class="si">${</span><span class="p">!K8S_MASTER_@</span><span class="si">}</span> <span class="p">;</span><span class="k">do</span>
    <span class="k">if</span> ip a <span class="p">|</span>grep <span class="si">${</span><span class="p">!host//@@@*</span><span class="si">}</span> <span class="p">&amp;</span>&gt;/dev/null<span class="p">;</span><span class="k">then</span>
        sed -i <span class="s1">&#39;s/priority 120/priority &#39;</span>$<span class="o">[</span><span class="m">120</span>-<span class="si">${</span><span class="nv">num</span><span class="si">}</span>*5<span class="o">]</span><span class="s1">&#39;/g&#39;</span> /etc/keepalived/keepalived.conf
        sed -i <span class="s1">&#39;s/state  MASTER/state  BACKUP/g&#39;</span> /etc/keepalived/keepalived.conf
    <span class="k">fi</span>
    <span class="nv">num</span><span class="o">=</span>$<span class="o">[</span>num+1<span class="o">]</span>
<span class="k">done</span>

<span class="c1">#启动</span>
systemctl <span class="nb">enable</span> keepalived
systemctl restart keepalived
systemctl status keepalived -l
</code></pre></div>

<h3 id="master_1">三、安装Master节点<a class="headerlink" href="#master_1" title="Permanent link">¶</a></h3>
<p>在执行初始化之前，我们还有一下几点需要注意：</p>
<p>1.选择一个网络插件，并检查它是否需要在初始化Master时指定一些参数，比如我们可能需要根据选择的插件来设置<code>--pod-network-cidr</code>参数。参考：<a href="https://kubernetes.io/docs/setup/independent/create-cluster-kubeadm/#pod-network">Installing a pod network add-on</a>。</p>
<p>2.kubeadm使用eth0的默认网络接口（通常是内网IP）做为Master节点的advertise address，如果我们想使用不同的网络接口，可以使用<code>--apiserver-advertise-address=&lt;ip-address&gt;</code>参数来设置。如果适应IPv6，则必须使用IPv6d的地址，如：<code>--apiserver-advertise-address=fd00::101</code>。</p>
<p>3.使用<code>kubeadm config images pull</code>来预先拉取初始化需要用到的镜像，用来检查是否能连接到Kubenetes的Registries。Kubenetes默认Registries地址是<code>k8s.gcr.io</code>，很明显，在国内并不能访问gcr.io，因此在kubeadm v1.13之前的版本，安装起来非常麻烦，但是在<code>1.13</code>版本中终于解决了国内的痛点，其增加了一个<code>--image-repository</code>参数，默认值是<code>k8s.gcr.io</code>，我们将其指定为国内镜像地址：<code>registry.aliyuncs.com/google_containers</code>，其它的就可以完全按照官方文档来愉快的玩耍了。</p>
<p>其次，我们还需要指定<code>--kubernetes-version</code>参数，因为它的默认值是<code>stable-1</code>，会导致从<code>https://dl.k8s.io/release/stable-1.txt</code>下载最新的版本号，我们可以将其指定为固定版本（最新版：v1.16.2）来跳过网络请求。</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># 使用calico网络 --pod-network-cidr=192.168.0.0/16</span>
<span class="c1"># 使用flannel网络 --pod-network-cidr=10.244.0.0/16</span>
sudo kubeadm init --image-repository registry.aliyuncs.com/google_containers --kubernetes-version v1.16.2 --pod-network-cidr<span class="o">=</span><span class="m">10</span>.244.0.0/16 --dry-run
</code></pre></div>

<p>4.查看InitConfiguration文件</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># 我们也可以修改默认的InitConfiguration文件，使用一下命令自动生成：</span>
<span class="c1"># kubeadm config print init-defaults </span>
apiVersion: kubeadm.k8s.io/v1beta2
kind: ClusterConfiguration
kubernetesVersion: v1.16.2  <span class="c1">#指定--kubernetes-version v1.16.2</span>
certificatesDir: /etc/kubernetes/pki
clusterName: kubernetes
controlPlaneEndpoint: <span class="m">192</span>.168.6.120:6443  <span class="c1">#指定--control-plane-endpoint</span>
imageRepository: registry.aliyuncs.com/google_containers  <span class="c1">#指定--image-repository</span>
controllerManager: <span class="o">{}</span>
apiServer:
  extraArgs:
    authorization-mode: Node,RBAC
  timeoutForControlPlane: 4m0s
dns:
  type: CoreDNS
etcd:
  local:
    dataDir: /var/lib/etcd
networking:
  dnsDomain: cluster.local
  podSubnet: <span class="m">10</span>.244.0.0/16   <span class="c1">#指定--pod-network-cidr=10.244.0.0/16</span>
  serviceSubnet: <span class="m">10</span>.96.0.0/12
scheduler: <span class="o">{}</span>
kubeProxy:
  config:
    featureGates:
      SupportIPVSProxyMode: <span class="nb">true</span> <span class="c1">#启用ipvs模式</span>
    mode: ipvs
<span class="c1"># 查看已安装的k8s的初始化配置文件</span>
<span class="c1"># kubeadm config view </span>
</code></pre></div>

<p>参考文档：</p>
<p><a href="https://kubernetes.io/docs/reference/setup-tools/kubeadm/kubeadm-init/">kubeadm-init</a></p>
<p><a href="https://kubernetes.io/docs/setup/production-environment/tools/kubeadm/control-plane-flags/">control-plane-flags</a></p>
<p><a href="https://github.com/kubernetes/kubernetes/blob/master/pkg/proxy/ipvs/README.md#cluster-created-by-kubeadm">启用ipvs</a></p>
<h4 id="31master">3.1、执行第一个Master节点的初始化:<a class="headerlink" href="#31master" title="Permanent link">¶</a></h4>
<p>kubeadm init首先会进行一系列的预检查，然后下载并安装集群组件。常用参数：kubeadm init --help查看</p>
<ul>
<li>--kubernetes-version=v1.11[.1]  指定k8s版本</li>
<li>
<p>--pod-network-cidr=10.244.0.0/16   指定pod使用的网络，该值与network组件有关，不同的组件使用不同的值。<a href="https://kubernetes.io/docs/setup/independent/create-cluster-kubeadm/#pod-network">参考pod网络</a></p>
<p>--service-cidr=10.96.0.0/12    指定service使用的网络，默认为"10.96.0.0/12"</p>
<p>--apiserver-advertise-address=192.168.5.36    指定本机apiserver监听地址，默认为0.0.0.0</p>
<p>--apiserver-bind-port=6443    指定本机apiserver监听端口，默认6443
- --control-plane-endpoint 指定控制平面的负载均衡地址
- --upload-certs  将证书等创建为k8s的secret，2小时后自动删除，可是使用<code>kubeadm init phase upload-certs --upload-certs</code>重新创建。
- --image-repository  指定镜像仓库</p>
</li>
</ul>
<div class="codehilite"><pre><span></span><code><span class="o">[</span>root@k8s-master01 ~<span class="o">]</span><span class="c1"># kubeadm init --control-plane-endpoint &quot;${VIP}:${LOAD_BALANCER_PORT}&quot; --upload-certs --image-repository &quot;registry.aliyuncs.com/google_containers&quot; --kubernetes-version v1.16.2 --pod-network-cidr=10.244.0.0/16 </span>
<span class="o">[</span>init<span class="o">]</span> Using Kubernetes version: v1.16.2
<span class="o">[</span>preflight<span class="o">]</span> Running pre-flight checks
        <span class="o">[</span>WARNING SystemVerification<span class="o">]</span>: this Docker version is not on the list of validated versions: <span class="m">19</span>.03.4. Latest validated version: <span class="m">18</span>.09
<span class="o">[</span>preflight<span class="o">]</span> Pulling images required <span class="k">for</span> setting up a Kubernetes cluster
<span class="o">[</span>preflight<span class="o">]</span> This might take a minute or two, depending on the speed of your internet connection
<span class="o">[</span>preflight<span class="o">]</span> You can also perform this action <span class="k">in</span> beforehand using <span class="s1">&#39;kubeadm config images pull&#39;</span>
<span class="o">[</span>kubelet-start<span class="o">]</span> Writing kubelet environment file with flags to file <span class="s2">&quot;/var/lib/kubelet/kubeadm-flags.env&quot;</span>
<span class="o">[</span>kubelet-start<span class="o">]</span> Writing kubelet configuration to file <span class="s2">&quot;/var/lib/kubelet/config.yaml&quot;</span>
<span class="o">[</span>kubelet-start<span class="o">]</span> Activating the kubelet service
<span class="o">[</span>certs<span class="o">]</span> Using certificateDir folder <span class="s2">&quot;/etc/kubernetes/pki&quot;</span>
<span class="o">[</span>certs<span class="o">]</span> Generating <span class="s2">&quot;ca&quot;</span> certificate and key
<span class="o">[</span>certs<span class="o">]</span> Generating <span class="s2">&quot;apiserver&quot;</span> certificate and key
<span class="o">[</span>certs<span class="o">]</span> apiserver serving cert is signed <span class="k">for</span> DNS names <span class="o">[</span>k8s-master01 kubernetes kubernetes.default kubernetes.default.svc kubernetes.default.svc.cluster.local<span class="o">]</span> and IPs <span class="o">[</span><span class="m">10</span>.96.0.1 <span class="m">192</span>.168.6.121 <span class="m">192</span>.168.6.120<span class="o">]</span>
<span class="o">[</span>certs<span class="o">]</span> Generating <span class="s2">&quot;apiserver-kubelet-client&quot;</span> certificate and key
<span class="o">[</span>certs<span class="o">]</span> Generating <span class="s2">&quot;front-proxy-ca&quot;</span> certificate and key
<span class="o">[</span>certs<span class="o">]</span> Generating <span class="s2">&quot;front-proxy-client&quot;</span> certificate and key
<span class="o">[</span>certs<span class="o">]</span> Generating <span class="s2">&quot;etcd/ca&quot;</span> certificate and key
<span class="o">[</span>certs<span class="o">]</span> Generating <span class="s2">&quot;etcd/server&quot;</span> certificate and key
<span class="o">[</span>certs<span class="o">]</span> etcd/server serving cert is signed <span class="k">for</span> DNS names <span class="o">[</span>k8s-master01 localhost<span class="o">]</span> and IPs <span class="o">[</span><span class="m">192</span>.168.6.121 <span class="m">127</span>.0.0.1 ::1<span class="o">]</span>
<span class="o">[</span>certs<span class="o">]</span> Generating <span class="s2">&quot;etcd/peer&quot;</span> certificate and key
<span class="o">[</span>certs<span class="o">]</span> etcd/peer serving cert is signed <span class="k">for</span> DNS names <span class="o">[</span>k8s-master01 localhost<span class="o">]</span> and IPs <span class="o">[</span><span class="m">192</span>.168.6.121 <span class="m">127</span>.0.0.1 ::1<span class="o">]</span>
<span class="o">[</span>certs<span class="o">]</span> Generating <span class="s2">&quot;etcd/healthcheck-client&quot;</span> certificate and key
<span class="o">[</span>certs<span class="o">]</span> Generating <span class="s2">&quot;apiserver-etcd-client&quot;</span> certificate and key
<span class="o">[</span>certs<span class="o">]</span> Generating <span class="s2">&quot;sa&quot;</span> key and public key
<span class="o">[</span>kubeconfig<span class="o">]</span> Using kubeconfig folder <span class="s2">&quot;/etc/kubernetes&quot;</span>
<span class="o">[</span>kubeconfig<span class="o">]</span> Writing <span class="s2">&quot;admin.conf&quot;</span> kubeconfig file
<span class="o">[</span>kubeconfig<span class="o">]</span> Writing <span class="s2">&quot;kubelet.conf&quot;</span> kubeconfig file
<span class="o">[</span>kubeconfig<span class="o">]</span> Writing <span class="s2">&quot;controller-manager.conf&quot;</span> kubeconfig file
<span class="o">[</span>kubeconfig<span class="o">]</span> Writing <span class="s2">&quot;scheduler.conf&quot;</span> kubeconfig file
<span class="o">[</span>control-plane<span class="o">]</span> Using manifest folder <span class="s2">&quot;/etc/kubernetes/manifests&quot;</span>
<span class="o">[</span>control-plane<span class="o">]</span> Creating static Pod manifest <span class="k">for</span> <span class="s2">&quot;kube-apiserver&quot;</span>
<span class="o">[</span>control-plane<span class="o">]</span> Creating static Pod manifest <span class="k">for</span> <span class="s2">&quot;kube-controller-manager&quot;</span>
<span class="o">[</span>control-plane<span class="o">]</span> Creating static Pod manifest <span class="k">for</span> <span class="s2">&quot;kube-scheduler&quot;</span>
<span class="o">[</span>etcd<span class="o">]</span> Creating static Pod manifest <span class="k">for</span> <span class="nb">local</span> etcd <span class="k">in</span> <span class="s2">&quot;/etc/kubernetes/manifests&quot;</span>
<span class="o">[</span>wait-control-plane<span class="o">]</span> Waiting <span class="k">for</span> the kubelet to boot up the control plane as static Pods from directory <span class="s2">&quot;/etc/kubernetes/manifests&quot;</span>. This can take up to 4m0s
<span class="o">[</span>apiclient<span class="o">]</span> All control plane components are healthy after <span class="m">32</span>.507182 seconds
<span class="o">[</span>upload-config<span class="o">]</span> Storing the configuration used <span class="k">in</span> ConfigMap <span class="s2">&quot;kubeadm-config&quot;</span> <span class="k">in</span> the <span class="s2">&quot;kube-system&quot;</span> Namespace
<span class="o">[</span>kubelet<span class="o">]</span> Creating a ConfigMap <span class="s2">&quot;kubelet-config-1.16&quot;</span> <span class="k">in</span> namespace kube-system with the configuration <span class="k">for</span> the kubelets <span class="k">in</span> the cluster
<span class="o">[</span>upload-certs<span class="o">]</span> Storing the certificates <span class="k">in</span> Secret <span class="s2">&quot;kubeadm-certs&quot;</span> <span class="k">in</span> the <span class="s2">&quot;kube-system&quot;</span> Namespace
<span class="o">[</span>upload-certs<span class="o">]</span> Using certificate key:
a7365741ee1276fdd39bcbf132ce1334cbb5dbf1ca7f40da3d9ea624f13b3259
<span class="o">[</span>mark-control-plane<span class="o">]</span> Marking the node k8s-master01 as control-plane by adding the label <span class="s2">&quot;node-role.kubernetes.io/master=&#39;&#39;&quot;</span>
<span class="o">[</span>mark-control-plane<span class="o">]</span> Marking the node k8s-master01 as control-plane by adding the taints <span class="o">[</span>node-role.kubernetes.io/master:NoSchedule<span class="o">]</span>
<span class="o">[</span>bootstrap-token<span class="o">]</span> Using token: 7uu86c.2m3es7nnbc4ox63n
<span class="o">[</span>bootstrap-token<span class="o">]</span> Configuring bootstrap tokens, cluster-info ConfigMap, RBAC Roles
<span class="o">[</span>bootstrap-token<span class="o">]</span> configured RBAC rules to allow Node Bootstrap tokens to post CSRs <span class="k">in</span> order <span class="k">for</span> nodes to get long term certificate credentials
<span class="o">[</span>bootstrap-token<span class="o">]</span> configured RBAC rules to allow the csrapprover controller automatically approve CSRs from a Node Bootstrap Token
<span class="o">[</span>bootstrap-token<span class="o">]</span> configured RBAC rules to allow certificate rotation <span class="k">for</span> all node client certificates <span class="k">in</span> the cluster
<span class="o">[</span>bootstrap-token<span class="o">]</span> Creating the <span class="s2">&quot;cluster-info&quot;</span> ConfigMap <span class="k">in</span> the <span class="s2">&quot;kube-public&quot;</span> namespace
<span class="o">[</span>addons<span class="o">]</span> Applied essential addon: CoreDNS
<span class="o">[</span>addons<span class="o">]</span> Applied essential addon: kube-proxy

Your Kubernetes control-plane has initialized successfully!

To start using your cluster, you need to run the following as a regular user:

  mkdir -p <span class="nv">$HOME</span>/.kube
  sudo cp -i /etc/kubernetes/admin.conf <span class="nv">$HOME</span>/.kube/config
  sudo chown <span class="k">$(</span>id -u<span class="k">)</span>:<span class="k">$(</span>id -g<span class="k">)</span> <span class="nv">$HOME</span>/.kube/config

You should now deploy a pod network to the cluster.
Run <span class="s2">&quot;kubectl apply -f [podnetwork].yaml&quot;</span> with one of the options listed at:
  https://kubernetes.io/docs/concepts/cluster-administration/addons/

You can now join any number of the control-plane node running the following <span class="nb">command</span> on each as root:

  kubeadm join <span class="m">192</span>.168.6.120:6443 --token 7uu86c.2m3es7nnbc4ox63n <span class="se">\</span>
    --discovery-token-ca-cert-hash sha256:127278359dbaa6a22b3462ef0d973d919bd2428b6089cc4912dbd20c4828945a <span class="se">\</span>
    --control-plane --certificate-key a7365741ee1276fdd39bcbf132ce1334cbb5dbf1ca7f40da3d9ea624f13b3259

Please note that the certificate-key gives access to cluster sensitive data, keep it secret!
As a safeguard, uploaded-certs will be deleted <span class="k">in</span> two hours<span class="p">;</span> If necessary, you can use 
<span class="s2">&quot;kubeadm init phase upload-certs --upload-certs&quot;</span> to reload certs afterward.

Then you can join any number of worker nodes by running the following on each as root:

kubeadm join <span class="m">192</span>.168.6.120:6443 --token 7uu86c.2m3es7nnbc4ox63n <span class="se">\</span>
    --discovery-token-ca-cert-hash sha256:127278359dbaa6a22b3462ef0d973d919bd2428b6089cc4912dbd20c4828945a 
</code></pre></div>

<div class="codehilite"><pre><span></span><code>说明：默认情况下，通过&quot;kubeadm create token&quot;创建的token是有限的 ，过期时间是24小时，这就是为什么过了一天无法再次使用上面记录的&quot;kubeadm join&quot;命令的原因，我们可以运行“kubeadm token create --ttl 0”生成一个永不过期的token也可以使用&quot;kubeadm token create --print-join-command&quot;重新创建一条token。使用新token 详情请参考：kubeadm-token（https://kubernetes.io/docs/reference/setup-tools/kubeadm/kubeadm-token/）
</code></pre></div>

<p>看到以上信息表示Master节点已经初始化成功了。按照上面的提示，执行下面的命令。</p>
<div class="codehilite"><pre><span></span><code><span class="o">[</span>root@k8smaster ~<span class="o">]</span><span class="c1"># mkdir -p $HOME/.kube</span>
<span class="o">[</span>root@k8smaster ~<span class="o">]</span><span class="c1"># cp -i /etc/kubernetes/admin.conf $HOME/.kube/config</span>
<span class="o">[</span>root@k8smaster ~<span class="o">]</span><span class="c1"># chown $(id -u):$(id -g) $HOME/.kube/config</span>
</code></pre></div>

<p>以上3行的作用：指定kubectl的配置文件，以用来连接apiserver。指定配置文件的几种方式：</p>
<ol>
<li>命令行参数：kubectl --kubeconfig /etc/kubernetes/admin.conf</li>
<li>环境变量：export KUBECONFIG=/etc/kubernetes/admin.conf</li>
<li>默认位置：$HOME/.kube/config</li>
</ol>
<p>The loading order follows these rules: </p>
<div class="codehilite"><pre><span></span><code>1. If the --kubeconfig flag is set, then only that file is loaded.  The flag may only be set once and no erging takes place.  
2. If $KUBECONFIG environment variable is set, then it is used a list of paths (normal path delimitting rules for your system).  These paths are merged.  When a value is modified, it is modified in the file that defines the stanza.  When a value is created, it is created in the first file that exists.  If no files in the chain exist, then it creates the last file in the list.  
3. Otherwise, ${HOME}/.kube/config is used and no merging takes place.
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="o">[</span>root@k8smaster ~<span class="o">]</span><span class="c1"># kubectl get nodes</span>
NAME        STATUS     ROLES     AGE       VERSION
k8smaster   NotReady   master    2m        v1.11.2
<span class="o">[</span>root@k8smaster ~<span class="o">]</span><span class="c1"># kubectl get pods --all-namespaces</span>
NAMESPACE     NAME                                READY     STATUS    RESTARTS   AGE
kube-system   coredns-78fcdf6894-9b8fn            <span class="m">0</span>/1       Pending   <span class="m">0</span>          2m
kube-system   coredns-78fcdf6894-xq69l            <span class="m">0</span>/1       Pending   <span class="m">0</span>          2m
kube-system   etcd-k8smaster                      <span class="m">1</span>/1       Running   <span class="m">0</span>          1m
kube-system   kube-apiserver-k8smaster            <span class="m">1</span>/1       Running   <span class="m">0</span>          1m
kube-system   kube-controller-manager-k8smaster   <span class="m">1</span>/1       Running   <span class="m">0</span>          1m
kube-system   kube-proxy-pgrc2                    <span class="m">1</span>/1       Running   <span class="m">0</span>          2m
kube-system   kube-scheduler-k8smaster            <span class="m">1</span>/1       Running   <span class="m">0</span>          1m
</code></pre></div>

<p>可以看到节点还没有Ready，dns的两个pod也没不正常，这是因为还需要安装网络配置。</p>
<h4 id="32pod">3.2、集群pod网络安装：<a class="headerlink" href="#32pod" title="Permanent link">¶</a></h4>
<p>如果要让k8s集群内的pod进行通信，我们必须安装一个pod网络附件(add-on)。否则集群内的一些组件无法工作，例如<strong>CoreDNS的工作就依赖于网络组件</strong>。k8s网络解决方案有很多，但是每个k8s集群只能使用一种网络组件。此处我们使用flannel、calico网络作为演示，实际部署过程中，我们二选一部署。</p>
<h5 id="321flannel">3.2.1、flannel网络<a class="headerlink" href="#321flannel" title="Permanent link">¶</a></h5>
<p>我们此处使用flannel作为网络解决方案，flannel可以加入到一个已经存在的k8s集群中，即使集群中的pod已经运行。</p>
<p>以下命令只需在<strong>master上</strong>执行即可，因为node节点在加入集群时会自动以pod的形式运行网络组件：</p>
<div class="codehilite"><pre><span></span><code><span class="o">[</span>root@k8smaster ~<span class="o">]</span><span class="c1"># cat /proc/sys/net/bridge/bridge-nf-call-iptables </span>
<span class="m">1</span>
<span class="o">[</span>root@k8smaster ~<span class="o">]</span><span class="c1"># cat /proc/sys/net/bridge/bridge-nf-call-ip6tables</span>
<span class="m">1</span>
<span class="c1">#如果以上值不为1，运行sysctl net.bridge.bridge-nf-call-iptables=1;sysctl net.bridge.bridge-nf-call-ip6tables=1命令进行设置。此设置会将桥接的网络流量传递给iptables的链上。</span>

<span class="c1">#安装CNI(flannel)</span>
<span class="o">[</span>root@k8s-master01 ~<span class="o">]</span><span class="c1"># curl -O https://raw.githubusercontent.com/coreos/flannel/master/Documentation/kube-flannel.yml</span>
<span class="o">[</span>root@k8s-master01 ~<span class="o">]</span><span class="c1"># sed -i &#39;s/quay.io/quay-mirror.qiniu.com/g&#39; kube-flannel.yml</span>

<span class="c1">#建议下载下来后启用Directrouting后再apply。</span>
  net-conf.json: <span class="p">|</span>
    <span class="o">{</span>
      <span class="s2">&quot;Network&quot;</span>: <span class="s2">&quot;10.244.0.0/16&quot;</span>,
      <span class="s2">&quot;Backend&quot;</span>: <span class="o">{</span>
        <span class="s2">&quot;Type&quot;</span>: <span class="s2">&quot;vxlan&quot;</span>,
        <span class="s2">&quot;Directrouting&quot;</span>: <span class="nb">true</span>
      <span class="o">}</span>
    <span class="o">}</span>

<span class="o">[</span>root@k8s-master01 ~<span class="o">]</span><span class="c1"># kubectl apply -f kube-flannel.yml</span>
<span class="o">[</span>root@k8smaster ~<span class="o">]</span><span class="c1"># kubectl get pods --all-namespaces </span>
NAMESPACE     NAME                                READY     STATUS    RESTARTS   AGE
kube-system   coredns-78fcdf6894-9b8fn            <span class="m">1</span>/1       Running   <span class="m">0</span>          3m
kube-system   coredns-78fcdf6894-xq69l            <span class="m">1</span>/1       Running   <span class="m">0</span>          3m
kube-system   etcd-k8smaster                      <span class="m">1</span>/1       Running   <span class="m">0</span>          2m
kube-system   kube-apiserver-k8smaster            <span class="m">1</span>/1       Running   <span class="m">0</span>          2m
kube-system   kube-controller-manager-k8smaster   <span class="m">1</span>/1       Running   <span class="m">0</span>          2m
kube-system   kube-flannel-ds-amd64-h2zzs         <span class="m">1</span>/1       Running   <span class="m">0</span>          15s
kube-system   kube-proxy-pgrc2                    <span class="m">1</span>/1       Running   <span class="m">0</span>          3m
kube-system   kube-scheduler-k8smaster            <span class="m">1</span>/1       Running   <span class="m">0</span>          2m
</code></pre></div>

<p>使用<code>kubectl get pods --all-namespaces</code>命令查看CoreDNS的pod是否running。如果显示running，则可以进行下面的向集群中加入Node工作。</p>
<h5 id="322calico">3.2.2、calico网络（推荐）<a class="headerlink" href="#322calico" title="Permanent link">¶</a></h5>
<p>以下命令只需在<strong>master上</strong>执行即可，因为node节点在加入集群时会自动以pod的形式运行网络组件：</p>
<div class="codehilite"><pre><span></span><code><span class="o">[</span>root@k8smaster ~<span class="o">]</span><span class="c1"># cat /proc/sys/net/bridge/bridge-nf-call-iptables </span>
<span class="m">1</span>
<span class="o">[</span>root@k8smaster ~<span class="o">]</span><span class="c1"># cat /proc/sys/net/bridge/bridge-nf-call-ip6tables</span>
<span class="m">1</span>
<span class="c1">#如果以上值不为1，运行sysctl net.bridge.bridge-nf-call-iptables=1;sysctl net.bridge.bridge-nf-call-ip6tables=1命令进行设置。此设置会将桥接的网络流量传递给iptables的链上。</span>

<span class="o">[</span>root@172.22.22.7 ~<span class="o">]</span><span class="c1"># kubectl apply -f https://docs.projectcalico.org/v3.14/manifests/calico.yaml</span>
<span class="o">[</span>root@k8smaster ~<span class="o">]</span><span class="c1"># kubectl get pods --all-namespaces </span>
NAMESPACE     NAME                                READY     STATUS    RESTARTS   AGE
kube-system   coredns-78fcdf6894-9b8fn            <span class="m">1</span>/1       Running   <span class="m">0</span>          3m
kube-system   coredns-78fcdf6894-xq69l            <span class="m">1</span>/1       Running   <span class="m">0</span>          3m
kube-system   etcd-k8smaster                      <span class="m">1</span>/1       Running   <span class="m">0</span>          2m
kube-system   kube-apiserver-k8smaster            <span class="m">1</span>/1       Running   <span class="m">0</span>          2m
kube-system   kube-controller-manager-k8smaster   <span class="m">1</span>/1       Running   <span class="m">0</span>          2m
kube-system   kube-flannel-ds-amd64-h2zzs         <span class="m">1</span>/1       Running   <span class="m">0</span>          15s
kube-system   kube-proxy-pgrc2                    <span class="m">1</span>/1       Running   <span class="m">0</span>          3m
kube-system   kube-scheduler-k8smaster            <span class="m">1</span>/1       Running   <span class="m">0</span>          2m
</code></pre></div>

<p>使用<code>kubectl get pods --all-namespaces</code>命令查看CoreDNS的pod是否running。如果显示running，则可以进行下面的向集群中加入Node工作。</p>
<blockquote>
<p>如果calico-node报错：caliconode is not ready: BIRD is not ready: BGP not established with x.x.x.x</p>
<p>解决方法：调整calicao 网络插件的网卡发现机制，修改 IP_AUTODETECTION_METHOD 对应的value值。官方提供的yaml文件中，ip识别策略（IPDETECTMETHOD）没有配置，即默认为first-found，这会导致一个网络异常的ip作为nodeIP被注册，从而影响 node-to-node mesh 。我们可以修改成 can-reach 或者 interface 的策略，尝试连接某一个Ready的node的IP，以此选择出正确的IP。</p>
<ul>
<li>can-reach使用您的本地路由来确定将使用哪个IP地址到达提供的目标。可以使用IP地址和域名。</li>
</ul>
<p>```bash</p>
<h1 id="using_ip_addresses">Using IP addresses<a class="headerlink" href="#using_ip_addresses" title="Permanent link">¶</a></h1>
<p>IP_AUTODETECTION_METHOD=can-reach=8.8.8.8
IP6_AUTODETECTION_METHOD=can-reach=2001:4860:4860::8888</p>
<h1 id="using_domain_names">Using domain names<a class="headerlink" href="#using_domain_names" title="Permanent link">¶</a></h1>
<p>IP_AUTODETECTION_METHOD=can-reach=www.google.com
IP6_AUTODETECTION_METHOD=can-reach=www.google.com
```</p>
<ul>
<li>interface使用提供的接口正则表达式（golang语法）枚举匹配的接口并返回第一个匹配接口上的第一个IP地址。列出接口和IP地址的顺序取决于系统。</li>
</ul>
<p>```bash</p>
<h1 id="valid_ip_address_on_interface_eth0_eth1_eth2_etc">Valid IP address on interface eth0, eth1, eth2 etc.<a class="headerlink" href="#valid_ip_address_on_interface_eth0_eth1_eth2_etc" title="Permanent link">¶</a></h1>
<p>IP_AUTODETECTION_METHOD=interface=eth.<em>
IP6_AUTODETECTION_METHOD=interface=eth.</em>
```</p>
<p>示例：在calico-node这个DaemonSet中，设置calico-node容器的环境变量。</p>
<p><code>yaml
        - name: CALICO_IPV4POOL_CIDR
          value: "10.244.0.0/16"
        - name: IP_AUTODETECTION_METHOD    #添加该环境变量(注意pod中有多个容器，别加错了)
          value: "interface=(eth.*|ens.*)"</code></p>
</blockquote>
<p>calico网络参考：</p>
<p>https://blog.csdn.net/ccy19910925/article/details/82423452</p>
<p>https://blog.csdn.net/chaosj/article/details/83663291?utm_medium=distribute.pc_relevant.none-task-blog-baidujs-2</p>
<p>https://www.kubernetes.org.cn/4960.html</p>
<h4 id="33master">3.3、添加其他master节点：<a class="headerlink" href="#33master" title="Permanent link">¶</a></h4>
<div class="codehilite"><pre><span></span><code><span class="o">[</span>root@k8s-master02 ~<span class="o">]</span><span class="c1">#   kubeadm join 192.168.6.120:6443 --token 7uu86c.2m3es7nnbc4ox63n \</span>
&gt;     --discovery-token-ca-cert-hash sha256:127278359dbaa6a22b3462ef0d973d919bd2428b6089cc4912dbd20c4828945a <span class="se">\</span>
&gt;     --control-plane --certificate-key a7365741ee1276fdd39bcbf132ce1334cbb5dbf1ca7f40da3d9ea624f13b3259
<span class="o">[</span>preflight<span class="o">]</span> Running pre-flight checks
        <span class="o">[</span>WARNING SystemVerification<span class="o">]</span>: this Docker version is not on the list of validated versions: <span class="m">19</span>.03.4. Latest validated version: <span class="m">18</span>.09
<span class="o">[</span>preflight<span class="o">]</span> Reading configuration from the cluster...
<span class="o">[</span>preflight<span class="o">]</span> FYI: You can look at this config file with <span class="s1">&#39;kubectl -n kube-system get cm kubeadm-config -oyaml&#39;</span>
<span class="o">[</span>preflight<span class="o">]</span> Running pre-flight checks before initializing the new control plane instance
<span class="o">[</span>preflight<span class="o">]</span> Pulling images required <span class="k">for</span> setting up a Kubernetes cluster
<span class="o">[</span>preflight<span class="o">]</span> This might take a minute or two, depending on the speed of your internet connection
<span class="o">[</span>preflight<span class="o">]</span> You can also perform this action <span class="k">in</span> beforehand using <span class="s1">&#39;kubeadm config images pull&#39;</span>
<span class="o">[</span>download-certs<span class="o">]</span> Downloading the certificates <span class="k">in</span> Secret <span class="s2">&quot;kubeadm-certs&quot;</span> <span class="k">in</span> the <span class="s2">&quot;kube-system&quot;</span> Namespace
<span class="o">[</span>certs<span class="o">]</span> Using certificateDir folder <span class="s2">&quot;/etc/kubernetes/pki&quot;</span>
<span class="o">[</span>certs<span class="o">]</span> Generating <span class="s2">&quot;etcd/healthcheck-client&quot;</span> certificate and key
<span class="o">[</span>certs<span class="o">]</span> Generating <span class="s2">&quot;apiserver-etcd-client&quot;</span> certificate and key
<span class="o">[</span>certs<span class="o">]</span> Generating <span class="s2">&quot;etcd/server&quot;</span> certificate and key
<span class="o">[</span>certs<span class="o">]</span> etcd/server serving cert is signed <span class="k">for</span> DNS names <span class="o">[</span>k8s-master02 localhost<span class="o">]</span> and IPs <span class="o">[</span><span class="m">192</span>.168.6.122 <span class="m">127</span>.0.0.1 ::1<span class="o">]</span>
<span class="o">[</span>certs<span class="o">]</span> Generating <span class="s2">&quot;etcd/peer&quot;</span> certificate and key
<span class="o">[</span>certs<span class="o">]</span> etcd/peer serving cert is signed <span class="k">for</span> DNS names <span class="o">[</span>k8s-master02 localhost<span class="o">]</span> and IPs <span class="o">[</span><span class="m">192</span>.168.6.122 <span class="m">127</span>.0.0.1 ::1<span class="o">]</span>
<span class="o">[</span>certs<span class="o">]</span> Generating <span class="s2">&quot;apiserver&quot;</span> certificate and key
<span class="o">[</span>certs<span class="o">]</span> apiserver serving cert is signed <span class="k">for</span> DNS names <span class="o">[</span>k8s-master02 kubernetes kubernetes.default kubernetes.default.svc kubernetes.default.svc.cluster.local<span class="o">]</span> and IPs <span class="o">[</span><span class="m">10</span>.96.0.1 <span class="m">192</span>.168.6.122 <span class="m">192</span>.168.6.120<span class="o">]</span>
<span class="o">[</span>certs<span class="o">]</span> Generating <span class="s2">&quot;apiserver-kubelet-client&quot;</span> certificate and key
<span class="o">[</span>certs<span class="o">]</span> Generating <span class="s2">&quot;front-proxy-client&quot;</span> certificate and key
<span class="o">[</span>certs<span class="o">]</span> Valid certificates and keys now exist <span class="k">in</span> <span class="s2">&quot;/etc/kubernetes/pki&quot;</span>
<span class="o">[</span>certs<span class="o">]</span> Using the existing <span class="s2">&quot;sa&quot;</span> key
<span class="o">[</span>kubeconfig<span class="o">]</span> Generating kubeconfig files
<span class="o">[</span>kubeconfig<span class="o">]</span> Using kubeconfig folder <span class="s2">&quot;/etc/kubernetes&quot;</span>
<span class="o">[</span>kubeconfig<span class="o">]</span> Writing <span class="s2">&quot;admin.conf&quot;</span> kubeconfig file
<span class="o">[</span>kubeconfig<span class="o">]</span> Writing <span class="s2">&quot;controller-manager.conf&quot;</span> kubeconfig file
<span class="o">[</span>kubeconfig<span class="o">]</span> Writing <span class="s2">&quot;scheduler.conf&quot;</span> kubeconfig file
<span class="o">[</span>control-plane<span class="o">]</span> Using manifest folder <span class="s2">&quot;/etc/kubernetes/manifests&quot;</span>
<span class="o">[</span>control-plane<span class="o">]</span> Creating static Pod manifest <span class="k">for</span> <span class="s2">&quot;kube-apiserver&quot;</span>
<span class="o">[</span>control-plane<span class="o">]</span> Creating static Pod manifest <span class="k">for</span> <span class="s2">&quot;kube-controller-manager&quot;</span>
<span class="o">[</span>control-plane<span class="o">]</span> Creating static Pod manifest <span class="k">for</span> <span class="s2">&quot;kube-scheduler&quot;</span>
<span class="o">[</span>check-etcd<span class="o">]</span> Checking that the etcd cluster is healthy
<span class="o">[</span>kubelet-start<span class="o">]</span> Downloading configuration <span class="k">for</span> the kubelet from the <span class="s2">&quot;kubelet-config-1.16&quot;</span> ConfigMap <span class="k">in</span> the kube-system namespace
<span class="o">[</span>kubelet-start<span class="o">]</span> Writing kubelet configuration to file <span class="s2">&quot;/var/lib/kubelet/config.yaml&quot;</span>
<span class="o">[</span>kubelet-start<span class="o">]</span> Writing kubelet environment file with flags to file <span class="s2">&quot;/var/lib/kubelet/kubeadm-flags.env&quot;</span>
<span class="o">[</span>kubelet-start<span class="o">]</span> Activating the kubelet service
<span class="o">[</span>kubelet-start<span class="o">]</span> Waiting <span class="k">for</span> the kubelet to perform the TLS Bootstrap...
<span class="o">[</span>etcd<span class="o">]</span> Announced new etcd member joining to the existing etcd cluster
<span class="o">[</span>etcd<span class="o">]</span> Creating static Pod manifest <span class="k">for</span> <span class="s2">&quot;etcd&quot;</span>
<span class="o">[</span>etcd<span class="o">]</span> Waiting <span class="k">for</span> the new etcd member to join the cluster. This can take up to 40s
<span class="o">{</span><span class="s2">&quot;level&quot;</span>:<span class="s2">&quot;warn&quot;</span>,<span class="s2">&quot;ts&quot;</span>:<span class="s2">&quot;2019-11-11T12:32:07.530+0800&quot;</span>,<span class="s2">&quot;caller&quot;</span>:<span class="s2">&quot;clientv3/retry_interceptor.go:61&quot;</span>,<span class="s2">&quot;msg&quot;</span>:<span class="s2">&quot;retrying of unary invoker failed&quot;</span>,<span class="s2">&quot;target&quot;</span>:<span class="s2">&quot;passthrough:///https://192.168.6.122:2379&quot;</span>,<span class="s2">&quot;attempt&quot;</span>:0,<span class="s2">&quot;error&quot;</span>:<span class="s2">&quot;rpc error: code = DeadlineExceeded desc = context deadline exceeded&quot;</span><span class="o">}</span>
<span class="o">[</span>upload-config<span class="o">]</span> Storing the configuration used <span class="k">in</span> ConfigMap <span class="s2">&quot;kubeadm-config&quot;</span> <span class="k">in</span> the <span class="s2">&quot;kube-system&quot;</span> Namespace
<span class="o">[</span>mark-control-plane<span class="o">]</span> Marking the node k8s-master02 as control-plane by adding the label <span class="s2">&quot;node-role.kubernetes.io/master=&#39;&#39;&quot;</span>
<span class="o">[</span>mark-control-plane<span class="o">]</span> Marking the node k8s-master02 as control-plane by adding the taints <span class="o">[</span>node-role.kubernetes.io/master:NoSchedule<span class="o">]</span>

This node has joined the cluster and a new control plane instance was created:

* Certificate signing request was sent to apiserver and approval was received.
* The Kubelet was informed of the new secure connection details.
* Control plane <span class="o">(</span>master<span class="o">)</span> label and taint were applied to the new node.
* The Kubernetes control plane instances scaled up.
* A new etcd member was added to the local/stacked etcd cluster.

To start administering your cluster from this node, you need to run the following as a regular user:

        mkdir -p <span class="nv">$HOME</span>/.kube
        sudo cp -i /etc/kubernetes/admin.conf <span class="nv">$HOME</span>/.kube/config
        sudo chown <span class="k">$(</span>id -u<span class="k">)</span>:<span class="k">$(</span>id -g<span class="k">)</span> <span class="nv">$HOME</span>/.kube/config

Run <span class="s1">&#39;kubectl get nodes&#39;</span> to see this node join the cluster.
</code></pre></div>

<h3 id="node">四、加入Node节点<a class="headerlink" href="#node" title="Permanent link">¶</a></h3>
<p>Node节点的加入集群前，首先要确保docker-ce、kubeadm、kubelet安装完毕。</p>
<p>最后再根据Master节点的提示加入集群。以下命令会以pod的方式启动kube-proxy：</p>
<div class="codehilite"><pre><span></span><code><span class="o">[</span>root@k8s-node01 ~<span class="o">]</span><span class="c1"># kubeadm join 192.168.6.120:6443 --token 7uu86c.2m3es7nnbc4ox63n \</span>
--discovery-token-ca-cert-hash sha256:127278359dbaa6a22b3462ef0d973d919bd2428b6089cc4912dbd20c4828945a 
<span class="o">[</span>preflight<span class="o">]</span> Running pre-flight checks
        <span class="o">[</span>WARNING SystemVerification<span class="o">]</span>: this Docker version is not on the list of validated versions: <span class="m">19</span>.03.4. Latest validated version: <span class="m">18</span>.09
<span class="o">[</span>preflight<span class="o">]</span> Reading configuration from the cluster...
<span class="o">[</span>preflight<span class="o">]</span> FYI: You can look at this config file with <span class="s1">&#39;kubectl -n kube-system get cm kubeadm-config -oyaml&#39;</span>
<span class="o">[</span>kubelet-start<span class="o">]</span> Downloading configuration <span class="k">for</span> the kubelet from the <span class="s2">&quot;kubelet-config-1.16&quot;</span> ConfigMap <span class="k">in</span> the kube-system namespace
<span class="o">[</span>kubelet-start<span class="o">]</span> Writing kubelet configuration to file <span class="s2">&quot;/var/lib/kubelet/config.yaml&quot;</span>
<span class="o">[</span>kubelet-start<span class="o">]</span> Writing kubelet environment file with flags to file <span class="s2">&quot;/var/lib/kubelet/kubeadm-flags.env&quot;</span>
<span class="o">[</span>kubelet-start<span class="o">]</span> Activating the kubelet service
<span class="o">[</span>kubelet-start<span class="o">]</span> Waiting <span class="k">for</span> the kubelet to perform the TLS Bootstrap...

This node has joined the cluster:
* Certificate signing request was sent to apiserver and a response was received.
* The Kubelet was informed of the new secure connection details.

Run <span class="s1">&#39;kubectl get nodes&#39;</span> on the control-plane to see this node join the cluster.
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="o">[</span>root@k8snode02 ~<span class="o">]</span><span class="c1"># kubeadm join 192.168.6.120:6443 --token 7uu86c.2m3es7nnbc4ox63n \</span>
--discovery-token-ca-cert-hash sha256:127278359dbaa6a22b3462ef0d973d919bd2428b6089cc4912dbd20c4828945a 
</code></pre></div>

<blockquote>
<p>如果是后期增加节点，kubeadm join命令中使用的toke可能已经过期，需要重新生成token。</p>
</blockquote>
<p>节点的启动也需要一点时间，稍后再到Master上查看状态。</p>
<div class="codehilite"><pre><span></span><code><span class="o">[</span>root@k8smaster ~<span class="o">]</span><span class="c1"># kubectl get nodes</span>
NAME        STATUS    ROLES     AGE       VERSION
k8smaster   Ready     master    5m        v1.11.2
k8snode01   Ready     &lt;none&gt;    38s       v1.11.2
k8snode02   Ready     &lt;none&gt;    30s       v1.11.2
</code></pre></div>

<p>（可选设置）在node节点上使用kubectl，做如下配置：</p>
<div class="codehilite"><pre><span></span><code>scp root@k8smaster:/etc/kubernetes/admin.conf .
kubectl --kubeconfig ./admin.conf get nodes
</code></pre></div>

<h3 id="_6">五、其他推荐配置<a class="headerlink" href="#_6" title="Permanent link">¶</a></h3>
<h4 id="1kube-proxyipvs">1、kube-proxy启用ipvs<a class="headerlink" href="#1kube-proxyipvs" title="Permanent link">¶</a></h4>
<p>1、更改kube-proxy的配置，其配置存储在configmap中。</p>
<div class="codehilite"><pre><span></span><code>kubectl edit configmap kube-proxy -n kube-system
</code></pre></div>

<p>找到如下部分的内容</p>
<div class="codehilite"><pre><span></span><code>   minSyncPeriod: 0s
      scheduler: <span class="s2">&quot;&quot;</span>
      syncPeriod: 30s
    kind: KubeProxyConfiguration
    metricsBindAddress: <span class="m">127</span>.0.0.1:10249
    mode: <span class="s2">&quot;ipvs&quot;</span>                          <span class="c1"># 加上这个，之前是: mode: &quot;&quot; 。默认为iptables模式</span>
    nodePortAddresses: null
</code></pre></div>

<p>scheduler默认是空，默认负载均衡算法为轮训。编辑完，保存退出。</p>
<p>3、删除所有kube-proxy的pod</p>
<div class="codehilite"><pre><span></span><code><span class="o">[</span>root@k8s-master01 ~<span class="o">]</span><span class="c1"># kubectl get pod -n kube-system |grep kube-proxy|awk &#39;{print $1}&#39; | xargs kubectl -n kube-system delete pod </span>
</code></pre></div>

<p>4、查看kube-proxy的pod日志</p>
<div class="codehilite"><pre><span></span><code><span class="o">[</span>root@k8s-master01 ~<span class="o">]</span><span class="c1"># kubectl get pod -n kube-system |grep kube-proxy|awk &#39;{print $1}&#39; | head -1 |xargs kubectl -n kube-system logs -f |grep &#39;Using ipvs Proxier&#39;</span>
I0607 <span class="m">02</span>:54:42.413292       <span class="m">1</span> server_others.go:259<span class="o">]</span> Using ipvs Proxier.
</code></pre></div>

<p>有<code>.....Using ipvs Proxier......</code>即可。</p>
<p>5、使用ipvsadm查看ipvs相关规则，如果没有这个命令可以直接<code>yum install -y ipvsadm</code>安装</p>
<div class="codehilite"><pre><span></span><code><span class="o">[</span>root@k8s-master01 ~<span class="o">]</span><span class="c1"># ipvsadm -ln</span>
IP Virtual Server version <span class="m">1</span>.2.1 <span class="o">(</span><span class="nv">size</span><span class="o">=</span><span class="m">4096</span><span class="o">)</span>
Prot LocalAddress:Port Scheduler Flags
  -&gt; RemoteAddress:Port           Forward Weight ActiveConn InActConn
TCP  <span class="m">127</span>.0.0.1:30451 rr
  -&gt; <span class="m">10</span>.244.85.245:8080           Masq    <span class="m">1</span>      <span class="m">0</span>          <span class="m">0</span>         
TCP  <span class="m">127</span>.0.0.1:30917 rr
  -&gt; <span class="m">10</span>.244.58.212:80             Masq    <span class="m">1</span>      <span class="m">0</span>          <span class="m">0</span>   
......
</code></pre></div>

<h4 id="2pod">2、集群控制平面的pod配置本地时区<a class="headerlink" href="#2pod" title="Permanent link">¶</a></h4>
<p>如果k8s组件是pod形式存在，默认使用的是UTC时区，如果要使用中国时区，需要修改/etc/kubernetes/manifests下几个组件的yaml文件，配置这几个k8s组件的pod时区，添加:</p>
<div class="codehilite"><pre><span></span><code>    <span class="nt">volumeMounts</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">host-time</span>
      <span class="nt">mountPath</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/etc/localtime</span>
      <span class="nt">readOnly</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>

 <span class=" -Error"> </span><span class="nt">volumes</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">host-time</span>
    <span class="nt">hostPath</span><span class="p">:</span>
      <span class="nt">path</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/etc/localtime</span>
</code></pre></div>

<h4 id="3podpresetpod">3、启用PodPreset自动配置Pod的时区<a class="headerlink" href="#3podpresetpod" title="Permanent link">¶</a></h4>
<h2 id="kubeadm_upgradek8s">【实战】使用kubeadm upgrade升级k8s<a class="headerlink" href="#kubeadm_upgradek8s" title="Permanent link">¶</a></h2>
<p><a href="https://kubernetes.io/docs/reference/setup-tools/kubeadm/kubeadm-upgrade/#cmd-upgrade-node">upgrade升级k8s官方文档</a></p>
<p>https://blog.51cto.com/billy98/2389246</p>
<blockquote>
<p>只能从一个MINOR版本升级到下一个MINOR版本，或者在同一个MINOR的PATCH版本之间升级。也就是说，升级时不能跳过MINOR版本。例如，可以从1.y升级到1.y + 1，但不能从1.y升级到1.y + 2。</p>
<p>升级工作流程如下：</p>
<ul>
<li>升级主master节点。</li>
<li>升级其他master节点。</li>
<li>升级work节点。</li>
</ul>
</blockquote>
<p>1、所有节点更新软件</p>
<div class="codehilite"><pre><span></span><code><span class="nv">VERSION</span><span class="o">=</span><span class="m">1</span>.18.6
yum install -y docker-ce kubeadm-<span class="si">${</span><span class="nv">VERSION</span><span class="si">}</span> kubelet-<span class="si">${</span><span class="nv">VERSION</span><span class="si">}</span>
</code></pre></div>

<p>2、所有节点拉取镜像</p>
<div class="codehilite"><pre><span></span><code>kubeadm config images pull --image-repository <span class="s2">&quot;registry.aliyuncs.com/google_containers&quot;</span>
</code></pre></div>

<p>3、主节点升级Master</p>
<div class="codehilite"><pre><span></span><code>查询需要升级的信息：
kubeadm upgrade plan

进行升级：
kubeadm upgrade apply v1.17.0 
</code></pre></div>

<blockquote>
<p>如果报错可以使用--ignore-preflight-errors=CoreDNSUnsupportedPlugins类似的参数来忽略错误</p>
</blockquote>
<p>4、所有节点从启kubelet</p>
<div class="codehilite"><pre><span></span><code>systemctl restart kubelet
</code></pre></div>

<p>5、升级Node</p>
<p>主要进行了升级部署在此节点上的控制平面实例，升级此节点的kubelet配置。</p>
<div class="codehilite"><pre><span></span><code>kubectl drain <span class="nv">$NODE</span> --ignore-daemonsets
kubeadm upgrade node
kubectl uncordon <span class="nv">$NODE</span>
</code></pre></div>

<h2 id="node_1">【实战】后期添加node节点<a class="headerlink" href="#node_1" title="Permanent link">¶</a></h2>
<h3 id="_7">一、准备设置<a class="headerlink" href="#_7" title="Permanent link">¶</a></h3>
<p>准备工作需要在所有的节点进行。</p>
<h4 id="11selinuxswap_1">1.1、关闭防火墙、selinux、swap、时间同步等<a class="headerlink" href="#11selinuxswap_1" title="Permanent link">¶</a></h4>
<p>所有节点，包括老节点：</p>
<div class="codehilite"><pre><span></span><code>cat &gt;/etc/hosts <span class="s">&lt;&lt;EOF</span>
<span class="s">127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4</span>
<span class="s">::1         localhost localhost.localdomain localhost6 localhost6.localdomain6</span>
<span class="s">172.22.22.7 k8s-master01 k8s-master01.rencaiyoujia.com</span>
<span class="s">172.22.22.8 k8s-master02 k8s-master02.rencaiyoujia.com</span>
<span class="s">172.22.22.9 k8s-master03 k8s-master03.rencaiyoujia.com</span>
<span class="s">172.22.22.4 k8s-node01 k8s-node01.rencaiyoujia.com</span>
<span class="s">172.22.22.5 k8s-node02 k8s-node02.rencaiyoujia.com</span>
<span class="s">172.22.22.6 k8s-node03 k8s-node03.rencaiyoujia.com</span>
<span class="s">10.15.9.211 k8s-node04 k8s-node04.rencaiyoujia.com</span>
<span class="s">10.15.9.220 k8s-node05 k8s-node05.rencaiyoujia.com</span>
<span class="s">EOF</span>
</code></pre></div>

<p>新增节点：</p>
<div class="codehilite"><pre><span></span><code>hostnamectl set-hostname k8s-node04  <span class="c1">#修改主机名，以便于在k8s中显示</span>

systemctl stop firewalld <span class="o">&amp;&amp;</span> systemctl disable firewalld <span class="o">&amp;&amp;</span> setenforce <span class="m">0</span> <span class="o">&amp;&amp;</span> sed -i <span class="s2">&quot;s/^SELINUX=enforcing/SELINUX=disabled/g&quot;</span> /etc/sysconfig/selinux 
swapoff -a <span class="o">&amp;&amp;</span> sed -i <span class="s1">&#39;s/.swap./#&amp;/&#39;</span> /etc/fstab

cat <span class="s">&lt;&lt;EOF &gt;  /etc/sysctl.d/k8s.conf</span>
<span class="s">net.bridge.bridge-nf-call-ip6tables = 1</span>
<span class="s">net.bridge.bridge-nf-call-iptables = 1</span>
<span class="s">net.ipv6.conf.all.disable_ipv6=1</span>
<span class="s">net.ipv4.ip_forward=1</span>
<span class="s">net.ipv4.tcp_tw_recycle=0  #NAT环境中建议关闭</span>
<span class="s">vm.swappiness=0  #禁止使用swap空间，只有当系统发生OOM是才允许使用</span>
<span class="s">vm.overcommit_memory=1  #内存分配策略：不检查物理内存是否够用</span>
<span class="s">vm.panic_on_oom=0  #0表示开启OOM，杀死某些进程，而不是进行kernel pannic</span>
<span class="s">fs.inotify.max_user_instances=8192</span>
<span class="s">fs.inotify.max_user_watches=1048576</span>
<span class="s">fs.file-max=52706963</span>
<span class="s">fs.nr_open=52706963</span>
<span class="s">net.netfilter.nf_conntrack_max=2310720  # 最大跟踪连接数</span>
<span class="s">EOF</span>
sysctl --system

rpm -qa <span class="p">|</span>grep chrony <span class="p">&amp;</span>&gt;/dev/null <span class="o">||</span> yum install -y chrony
sed -i <span class="s1">&#39;2a server ntp1.aliyun.com iburst&#39;</span> /etc/chrony.conf
systemctl restart chronyd
systemctl <span class="nb">enable</span> chronyd

<span class="c1">#关闭系统不需要的服务(可选)</span>
systemctl stop postfix
systemctl disable postfix
</code></pre></div>

<h4 id="1244_1">1.2、升级内核到4.4（推荐）<a class="headerlink" href="#1244_1" title="Permanent link">¶</a></h4>
<div class="codehilite"><pre><span></span><code><span class="c1">#Centos7自带的3.10.x内核存在一些bug，导致docker、kubernetes不稳定。建议升级内核到4.4。</span>

<span class="c1">#参考文档：http://elrepo.org/tiki/tiki-index.php</span>
<span class="c1">#参考文档：https://blog.csdn.net/kikajack/article/details/79396793</span>


<span class="c1">#1、导入公钥</span>
rpm --import https://www.elrepo.org/RPM-GPG-KEY-elrepo.org
<span class="c1">#2、安装elrepo内核软件源</span>
yum install -y https://www.elrepo.org/elrepo-release-7.0-4.el7.elrepo.noarch.rpm
<span class="c1">#3、查看可用的内核包</span>
yum --disablerepo<span class="o">=</span><span class="s2">&quot;*&quot;</span> --enablerepo<span class="o">=</span><span class="s2">&quot;elrepo-kernel&quot;</span> list available
<span class="c1">#4、安装长期支持版本</span>
yum --enablerepo<span class="o">=</span>elrepo-kernel install -y kernel-lt 

<span class="c1">#设置grub，开机从新内核启动：内核安装好后，需要设置为默认启动选项并重启后才会生效</span>
<span class="c1">#1、通过 gurb2-mkconfig 命令创建 grub2 的配置文件</span>
grub2-mkconfig -o /boot/grub2/grub.cfg
<span class="c1">#2、查看系统上的所有可以内核：</span>
awk -F<span class="se">\&#39;</span> <span class="s1">&#39;$1==&quot;menuentry &quot; {print i++ &quot; : &quot; $2}&#39;</span> /etc/grub2.cfg
<span class="m">0</span> : CentOS Linux <span class="o">(</span><span class="m">4</span>.4.202-1.el7.elrepo.x86_64<span class="o">)</span> <span class="m">7</span> <span class="o">(</span>Core<span class="o">)</span>
<span class="m">1</span> : CentOS Linux <span class="o">(</span><span class="m">3</span>.10.0-862.11.6.el7.x86_64<span class="o">)</span> <span class="m">7</span> <span class="o">(</span>Core<span class="o">)</span>
<span class="m">2</span> : CentOS Linux <span class="o">(</span><span class="m">3</span>.10.0-514.el7.x86_64<span class="o">)</span> <span class="m">7</span> <span class="o">(</span>Core<span class="o">)</span>
<span class="m">3</span> : CentOS Linux <span class="o">(</span><span class="m">0</span>-rescue-f58eebd168fc4ff3809f5af6bf26ada0<span class="o">)</span> <span class="m">7</span> <span class="o">(</span>Core<span class="o">)</span>
<span class="c1">#3、设置上面的0号内核为默认使用内核，然后重启</span>
grub2-set-default <span class="m">0</span>
reboot
</code></pre></div>

<h4 id="13ipvsipvsiptables_1">1.3、装入ipvs内核模块（建议启用ipvs，代替iptables）<a class="headerlink" href="#13ipvsipvsiptables_1" title="Permanent link">¶</a></h4>
<p>模块无需全部装入，可以按需装入，主要有ip_vs, ip_vs_rr, ip_vs_wrr, ip_vs_sh, nf_conntrack_ipv4</p>
<div class="codehilite"><pre><span></span><code>yum install -y ipvsadm   <span class="c1">#ipvs的管理工具，可选</span>
cat &gt; /etc/sysconfig/modules/ipvs.modules <span class="s">&lt;&lt;EOF</span>
<span class="s">#!/bin/bash</span>
<span class="s">ipvs_modules=&quot;ip_vs ip_vs_lc ip_vs_wlc ip_vs_rr ip_vs_wrr ip_vs_lblc ip_vs_lblcr ip_vs_dh ip_vs_sh ip_vs_fo ip_vs_nq ip_vs_sed ip_vs_ftp nf_conntrack_ipv4&quot;</span>
<span class="s">for kernel_module in ${ipvs_modules}; do</span>
<span class="s">    /sbin/modinfo -F filename ${kernel_module} &gt; /dev/null 2&gt;&amp;1</span>
<span class="s">    if [ $? -eq 0 ]; then</span>
<span class="s">        /sbin/modprobe ${kernel_module}</span>
<span class="s">    fi</span>
<span class="s">done</span>
<span class="s">EOF</span>
chmod <span class="m">755</span> /etc/sysconfig/modules/ipvs.modules <span class="o">&amp;&amp;</span> bash /etc/sysconfig/modules/ipvs.modules <span class="o">&amp;&amp;</span> lsmod <span class="p">|</span> grep -e ip_vs -e nf_conntrack_ipv4
</code></pre></div>

<p>参考文档：<a href="https://blog.csdn.net/shihao99/article/details/82588792">kube-proxy开启ipvs代替iptables</a></p>
<h4 id="14dockerkubeadmkubelet">1.4、安装docker、kubeadm、kubelet软件<a class="headerlink" href="#14dockerkubeadmkubelet" title="Permanent link">¶</a></h4>
<p><strong>Docker:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="c1"># docker阿里云源</span>
curl -o /etc/yum.repos.d/docker-ce.repo https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo

<span class="c1">### Install required packages for docker.</span>
yum install -y device-mapper-persistent-data lvm2
yum install -y docker-ce-19.03.8

<span class="c1">## Create /etc/docker directory.</span>
mkdir /etc/docker

<span class="c1"># Setup daemon.</span>
cat &gt; /etc/docker/daemon.json <span class="s">&lt;&lt;EOF</span>
<span class="s">{</span>
<span class="s">  &quot;graph&quot;: &quot;/u01/install/docker&quot;,</span>
<span class="s">  &quot;exec-opts&quot;: [&quot;native.cgroupdriver=systemd&quot;],</span>
<span class="s">  &quot;log-driver&quot;: &quot;json-file&quot;,</span>
<span class="s">  &quot;log-opts&quot;: {</span>
<span class="s">    &quot;max-size&quot;: &quot;100m&quot;,</span>
<span class="s">    &quot;max-file&quot;: &quot;3&quot;</span>
<span class="s">  },</span>
<span class="s">  &quot;storage-driver&quot;: &quot;overlay2&quot;,</span>
<span class="s">  &quot;storage-opts&quot;: [</span>
<span class="s">    &quot;overlay2.override_kernel_check=true&quot;</span>
<span class="s">  ],</span>
<span class="s">  &quot;registry-mirrors&quot;: [&quot;https://lqetgo1f.mirror.aliyuncs.com&quot;,&quot;https://docker.mirrors.ustc.edu.cn/&quot;],</span>
<span class="s">  &quot;insecure-registries&quot; : [&quot;https://harbor.ljzsdut.com&quot;]</span>
<span class="s">}</span>
<span class="s">EOF</span>

mkdir -p /etc/systemd/system/docker.service.d

<span class="c1"># Restart Docker</span>
systemctl daemon-reload
systemctl restart docker
systemctl <span class="nb">enable</span> docker
</code></pre></div>

<p><strong>Kubeadm&amp; kubelet:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="c1"># kubernetes阿里云源</span>
cat <span class="s">&lt;&lt;-EOF &gt;/etc/yum.repos.d/kubernets.repo</span>
<span class="s">[Kubernetes]</span>
<span class="s">name=kubernetes repo</span>
<span class="s">baseurl=https://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64/</span>
<span class="s">gpgcheck=1</span>
<span class="s">gpgkey=https://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg https://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg</span>
<span class="s">enabled=1</span>
<span class="s">EOF</span>
<span class="c1">#安装kubeadm kubelet软件，为了保证与老节点的版本一致，我们可以指定安装版本</span>
<span class="nv">KUBE_VERSION</span><span class="o">=</span><span class="m">1</span>.18.2
yum install -y kubeadm-<span class="si">${</span><span class="nv">KUBE_VERSION</span><span class="si">}</span> kubelet-<span class="si">${</span><span class="nv">KUBE_VERSION</span><span class="si">}</span> kubectl-<span class="si">${</span><span class="nv">KUBE_VERSION</span><span class="si">}</span> ipvsadm  <span class="c1">#kubectl、ipvsadm可选</span>


<span class="c1"># start kubelet</span>
systemctl <span class="nb">enable</span> kubelet
systemctl start kubelet
systemctl status kubelet
</code></pre></div>

<blockquote>
<p>此时的kubelet处于每隔10秒重启一次的状态，这种崩溃循环是正常的，kubelet在这个崩溃循环中等待kubeadm告诉它该怎么做。kubeadm通过生成/var/lib/kubelet/config.yaml配置文件来告诉kubelet需要干什么。</p>
<p>"max-file": "3"  #每个容器中日志数量，分别是id+.json、id+1.json、id+2.json　</p>
</blockquote>
<h3 id="node_2">二、加入Node节点<a class="headerlink" href="#node_2" title="Permanent link">¶</a></h3>
<p>Node节点的加入集群前，首先要确保docker-ce、kubeadm、kubelet安装完毕。</p>
<p>最后再根据Master节点的提示加入集群。以下命令会以pod的方式启动kube-proxy：</p>
<p>使节点加入集群的命令格式是: <code>kubeadm join --token &lt;token&gt; &lt;master-ip&gt;:&lt;master-port&gt; --discovery-token-ca-cert-hash sha256:&lt;hash&gt;</code></p>
<p>如果我们忘记了Master节点的token，可以使用下面的命令来查看：</p>
<div class="codehilite"><pre><span></span><code><span class="o">[</span>root@k8s-master01 ~<span class="o">]</span><span class="c1"># kubeadm token list</span>
</code></pre></div>

<p>默认情况下，token的有效期是24小时，如果token已经过期的话，可以使用以下命令重新生成：</p>
<div class="codehilite"><pre><span></span><code><span class="o">[</span>root@k8s-master01 ~<span class="o">]</span><span class="c1"># kubeadm token create</span>
W0607 <span class="m">10</span>:14:53.487828   <span class="m">29674</span> configset.go:202<span class="o">]</span> WARNING: kubeadm cannot validate component configs <span class="k">for</span> API groups <span class="o">[</span>kubelet.config.k8s.io kubeproxy.config.k8s.io<span class="o">]</span>
elwy21.gnqnvxyn66osyv1c
<span class="o">[</span>root@k8s-master01 ~<span class="o">]</span><span class="c1"># kubeadm token list</span>
TOKEN                     TTL         EXPIRES                     USAGES                   DESCRIPTION                                                EXTRA GROUPS
elwy21.gnqnvxyn66osyv1c   23h         <span class="m">2020</span>-06-08T10:14:53+08:00   authentication,signing   &lt;none&gt;                                                     system:bootstrappers:kubeadm:default-node-token
</code></pre></div>

<p>如果你找不到–discovery-token-ca-cert-hash的值，可以使用以下命令生成：</p>
<div class="codehilite"><pre><span></span><code><span class="o">[</span>root@k8s-master01 ~<span class="o">]</span><span class="c1"># openssl x509 -pubkey -in /etc/kubernetes/pki/ca.crt | openssl rsa -pubin -outform der 2&gt;/dev/null | openssl dgst -sha256 -hex | sed &#39;s/^.* //&#39;</span>
d9e12b26d8d0b37a221030dfa4e373af8477b4f7636f723e821760d7c6ed4e80
</code></pre></div>

<p>除了上面通过两次命令找token和hash，也可以<strong>直接一次性执行</strong>如下命令来获取：</p>
<div class="codehilite"><pre><span></span><code><span class="o">[</span>root@k8s-master01 ~<span class="o">]</span><span class="c1"># kubeadm token create --print-join-command</span>
W0607 <span class="m">10</span>:22:13.229567    <span class="m">5030</span> configset.go:202<span class="o">]</span> WARNING: kubeadm cannot validate component configs <span class="k">for</span> API groups <span class="o">[</span>kubelet.config.k8s.io kubeproxy.config.k8s.io<span class="o">]</span>
kubeadm join <span class="m">172</span>.22.22.13:8443 --token nu0geu.kuiiy16njfkfeiqq     --discovery-token-ca-cert-hash sha256:d9e12b26d8d0b37a221030dfa4e373af8477b4f7636f723e821760d7c6ed4e80 
</code></pre></div>

<p>现在登录到工作节点服务器，然后用root权限运行如下命令加入集群</p>
<div class="codehilite"><pre><span></span><code><span class="o">[</span>root@k8s-node04 ~<span class="o">]</span><span class="c1"># kubeadm join 172.22.22.13:8443 --token nu0geu.kuiiy16njfkfeiqq     --discovery-token-ca-cert-hash sha256:d9e12b26d8d0b37a221030dfa4e373af8477b4f7636f723e821760d7c6ed4e80</span>
W0607 <span class="m">10</span>:27:50.040020   <span class="m">11196</span> join.go:346<span class="o">]</span> <span class="o">[</span>preflight<span class="o">]</span> WARNING: JoinControlPane.controlPlane settings will be ignored when control-plane flag is not set.
<span class="o">[</span>preflight<span class="o">]</span> Running pre-flight checks
<span class="o">[</span>preflight<span class="o">]</span> Reading configuration from the cluster...
<span class="o">[</span>preflight<span class="o">]</span> FYI: You can look at this config file with <span class="s1">&#39;kubectl -n kube-system get cm kubeadm-config -oyaml&#39;</span>
<span class="o">[</span>kubelet-start<span class="o">]</span> Downloading configuration <span class="k">for</span> the kubelet from the <span class="s2">&quot;kubelet-config-1.18&quot;</span> ConfigMap <span class="k">in</span> the kube-system namespace
<span class="o">[</span>kubelet-start<span class="o">]</span> Writing kubelet configuration to file <span class="s2">&quot;/var/lib/kubelet/config.yaml&quot;</span>
<span class="o">[</span>kubelet-start<span class="o">]</span> Writing kubelet environment file with flags to file <span class="s2">&quot;/var/lib/kubelet/kubeadm-flags.env&quot;</span>
<span class="o">[</span>kubelet-start<span class="o">]</span> Starting the kubelet
<span class="o">[</span>kubelet-start<span class="o">]</span> Waiting <span class="k">for</span> the kubelet to perform the TLS Bootstrap...

This node has joined the cluster:
* Certificate signing request was sent to apiserver and a response was received.
* The Kubelet was informed of the new secure connection details.

Run <span class="s1">&#39;kubectl get nodes&#39;</span> on the control-plane to see this node join the cluster.
</code></pre></div>

<p>节点的启动也需要一点时间，稍后再到Master上查看状态。</p>
<div class="codehilite"><pre><span></span><code><span class="o">[</span>root@k8s-master01 ~<span class="o">]</span><span class="c1"># kubectl get nodes</span>
NAME           STATUS   ROLES    AGE   VERSION
k8s-master01   Ready    master   10d   v1.18.2
k8s-master02   Ready    master   10d   v1.18.2
k8s-master03   Ready    master   10d   v1.18.2
k8s-node01     Ready    &lt;none&gt;   10d   v1.18.2
k8s-node02     Ready    &lt;none&gt;   10d   v1.18.2
k8s-node03     Ready    &lt;none&gt;   10d   v1.18.2
k8s-node04     Ready    &lt;none&gt;   10m   v1.18.2
</code></pre></div>

<p>（可选设置）在node节点上使用kubectl，做如下配置：</p>
<div class="codehilite"><pre><span></span><code>scp root@k8smaster:/etc/kubernetes/admin.conf .
kubectl --kubeconfig ./admin.conf get nodes
</code></pre></div>

<h2 id="_8">其他参考资料：<a class="headerlink" href="#_8" title="Permanent link">¶</a></h2>
<p>kubernetes-tls-bootstrapping：</p>
<p>​   kubelet向apiserver 申请证书；</p>
<p>​   Controller Manager（默认批准控制器 ）自动签署相关证书和自动清理过期的TLS Bootstrapping Token </p>
<p>1、https://jimmysong.io/posts/kubernetes-tls-bootstrapping</p>
<p>2、<a href="https://blog.fanfengqiang.com/2019/03/11/kubernetes-TLS-Bootstrapping%E9%85%8D%E7%BD%AE/">https://blog.fanfengqiang.com/2019/03/11/kubernetes-TLS-Bootstrapping%E9%85%8D%E7%BD%AE/</a> </p>
<p>3、<a href="https://mritd.me/2018/08/28/kubernetes-tls-bootstrapping-with-bootstrap-token/">https://mritd.me/2018/08/28/kubernetes-tls-bootstrapping-with-bootstrap-token/</a> </p>
<p>4、https://kubernetes.io/zh/docs/reference/command-line-tools-reference/kubelet-tls-bootstrapping/&gt; </p>
                
                  
                
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../1.1-k8s%E9%83%A8%E7%BD%B2%E4%B9%8Bkubeadm/" title="1.1 k8s部署之kubeadm" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  上一页
                </span>
                1.1 k8s部署之kubeadm
              </span>
            </div>
          </a>
        
        
          <a href="../1.3-k8s%E9%83%A8%E7%BD%B2%E4%B9%8BDashboard/" title="1.3 k8s部署之Dashboard" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  下一页
                </span>
                1.3 k8s部署之Dashboard
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2019 - 2022 ljzsdut
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
  <div class="md-footer-social">
    <link rel="stylesheet" href="../../assets/fonts/font-awesome.css">
    
      <a href="https://github.com/ljzsdut" class="md-footer-social__link fa fa-github"></a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.808e90bb.js"></script>
      
        
        
          
          <script src="../../assets/javascripts/lunr/lunr.stemmer.support.js"></script>
          
            
              
                <script src="../../assets/javascripts/lunr/tinyseg.js"></script>
              
              
                <script src="../../assets/javascripts/lunr/lunr.ja.js"></script>
              
            
          
          
        
      
      <script>app.initialize({version:"1.2.3",url:{base:"../.."}})</script>
      
        <script src="../../search/main.js"></script>
      
    
  </body>
</html>