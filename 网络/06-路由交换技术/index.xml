<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>ljzsdut</title><link>https://note.ljzsdut.com/%E7%BD%91%E7%BB%9C/06-%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E6%8A%80%E6%9C%AF/</link><description>Recent content on ljzsdut</description><generator>Hugo -- gohugo.io</generator><atom:link href="https://note.ljzsdut.com/%E7%BD%91%E7%BB%9C/06-%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E6%8A%80%E6%9C%AF/index.xml" rel="self" type="application/rss+xml"/><item><title/><link>https://note.ljzsdut.com/%E7%BD%91%E7%BB%9C/06-%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E6%8A%80%E6%9C%AF/1-%E4%BA%A4%E6%8D%A2%E6%9C%BA%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86%E8%AF%A6%E8%A7%A3/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://note.ljzsdut.com/%E7%BD%91%E7%BB%9C/06-%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E6%8A%80%E6%9C%AF/1-%E4%BA%A4%E6%8D%A2%E6%9C%BA%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86%E8%AF%A6%E8%A7%A3/</guid><description>交换机工作原理详解（附原理图） 转载：https://zhuanlan.zhihu.com/p/122241071
交换机工作原理 1、交换机的作用： 连接多个以太网物理段，隔离冲突域 对以太网帧进行高速而透明的交换转发 自行学习和维护MAC地址信息 交换机工作在二层，可以用来隔离冲突域，在OSI参考模型中，二层的作用是寻址，这边寻址指的是MAC地址，而交换机就是对MAC地址进行转发，在每个交换机中，都有一张MAC地址表，这个表是交换机自动学习的。
所以，总得来说交换机的作用是寻址和转发，这边需要注意的是寻址和转发都是MAC地址，需要跟上周分享的路由器区分开来，路由器寻址寻的是IP地址，而交换机是MAC地址。
2、交换机的特点： 主要工作在OSI模型的物理层、数据链路层 提供以太网间的透明桥接和交换 依据链路层的MAC地址，将以太网数据帧在端口间进行转发 3、交换机MAC地址表转发过程： MAC地址表初始化： 交换机刚启动时，MAC地址表中无表项。以上图中的交换机就是刚刚启动的时候的MAC地址表。可以看出并没有任何的表项，当接入PC的时候，交换机开始进行学习MAC地址，见下图：
MAC地址表学习过程（1） PCA发出数据帧 交换机把PCA的帧中的源地址MAC_A与接收到此帧的端口E1/0/1关联起来 交换机把PCA的帧从所有其他端口发送出去（除了接收到帧的端口E1/0/1） MAC地址表学习过程（2） PCB、PCC、PCD发出数据帧，交换机会把接收到的帧中的源地址与相应的端口关联起来，至此，交换机的MAC地址表学习完成，开始进行数据的转发。
4、交换机对数据帧的转发与过滤 单播帧的转发： PCA发出目的到PCD的单播数据帧 交换机根据帧中的目的地址，从相应的端口E1/0/4发送出去 交换机不在其他端口上转发此单播数据帧 广播、组播和未知单播帧的转发： 交换机会把广播、组播和未知单播帧从所有其他端口发送出去（除了接收到帧的端口）
VLAN基本原理 1、广播风暴 所谓广播帧就是在二层环境中设备发出的广播帧在广播域中传播，这样会导致广播镇占用网络带宽，降低设备性能。
2、使用三层设备路由器隔离广播域 广播帧属于二层并不会跨越三层，所以为了解决广播风暴，可以使用三层设备隔离广播域，减小广播域范围。比如使用路由器来隔离广播域，由于路由器是三层设备，对数据的转发容易形成瓶颈，所以一般我们使用VLAN来隔离广播域。
3、VLAN隔离广播 二层交换机使用VLAN（虚拟局域网）隔离广播，用来减小广播域范围。这样的话，不同VLAN之间是无法进行通信的，假设PCA发送一个广播帧，只会在VLAN1之间传播并不会传播到VLAN2，这样既限制了广播域的范围，又保证了VLAN2的安全性。
4、VLan优点 有效控制广播域范围 增强局域网的安全性 灵活构建虚拟工作组 5、VLAN分类（VLAN的划分方法） 基于端口的VLAN： 基于端口的VLAN划分方法是最常用的一种划分方法，就是一个或者几个端口属于一个VLAN，这个端口下面的用户也就属于该 VLAN。假设以上图中，E1/0/1和E1/0/2属于VLAN10，E1/0/3和E1/0/4属于VLAN20，那么PCA和PCB也都都属于 VLAN10，可以互相通信，PCC和PCD属于VLAN20，也可以互相通信。
这种划分方法的优先就是配置比较方便，只要在交换机上将相应的端口加入相应的 VLAN 即可，缺点是对于用户来说如果更改了交换机的端口也就更换了VLAN ID。
基于MAC地址的VLAN： 基于 MAC 地址的 VLAN 就是在划分 VLAN 的时候根据 MAC 地址划分 VLAN，比如将 PCA和 PCB 的 MAC 地址划分在 vlan10中，那么 PCA 和 PCB 就属于 VLAN10，PCC 和 PCD 同理。</description></item><item><title/><link>https://note.ljzsdut.com/%E7%BD%91%E7%BB%9C/06-%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E6%8A%80%E6%9C%AF/2-%E4%BA%A4%E6%8D%A2%E6%9C%BA%E9%85%8D%E7%BD%AEVLAN%E4%BA%92%E8%AE%BF/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://note.ljzsdut.com/%E7%BD%91%E7%BB%9C/06-%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E6%8A%80%E6%9C%AF/2-%E4%BA%A4%E6%8D%A2%E6%9C%BA%E9%85%8D%E7%BD%AEVLAN%E4%BA%92%E8%AE%BF/</guid><description>如果要实现跨子网互访，就要经过三层设备——路由器。
1、路由器 配置：交换机的两端都设置为ACESS口，路由器接口配置IP作为网关地址，PC的网关设置为路由器上相关的地址。
缺点：每添加一个VLAN，就需要添加一根线连接到路由器，耗费一个路由器接口。
# 一、交换机配置 #1、创建2个VLAN R02-YW-41# configure terminal #进入配置终端 R02-YW-41(config)# vlan 10 #创建VLAN 10 R02-YW-41(config)# vlan 20 #创建VLAN 20 R02-YW-41(config)# end #退出配置终端 #2.1、配置连接PC的交换口 R02-YW-41# configure terminal #进入配置终端 R02-YW-41(config)# interface fe1/1 #进入接口配置（与pc连接的交换口） R02-YW-41(config-if)# switchport mode access #配置为access口（默认操作，可省略） R02-YW-41(config-if)# switchport access vlan 10 #配置为VLANID为10 R02-YW-41(config)# interface fe1/2 #进入接口配置（与pc连接的交换口） R02-YW-41(config-if)# switchport access vlan 20 #配置为VLANID为20 R02-YW-41(config-if)# end #退出配置终端 #2.2、配置连接路由器的交换口 R02-YW-41# configure terminal #进入配置终端 R02-YW-41(config)# interface fe1/3 #进入接口配置（与router连接的交换口） R02-YW-41(config-if)# switchport mode access #配置为access口（默认操作，可省略） R02-YW-41(config-if)# switchport access vlan 10 #配置为VLANID为10 R02-YW-41(config)# interface fe1/4 #进入接口配置（与router连接的交换口） R02-YW-41(config-if)# switchport access vlan 20 #配置为VLANID为20 R02-YW-41(config-if)# end #退出配置终端 # 二、路由器配置 # 配置默认网关地址 R02-YW-41# configure terminal #进入配置终端 R02-YW-41(config)# interface fe1/0 #进入接口配置（与switch连接的路由口） R02-YW-41(config-if)# ip add 192.</description></item><item><title/><link>https://note.ljzsdut.com/%E7%BD%91%E7%BB%9C/06-%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E6%8A%80%E6%9C%AF/3-%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1%E7%89%B9%E6%80%A7%E8%AF%A6%E8%A7%A3/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://note.ljzsdut.com/%E7%BD%91%E7%BB%9C/06-%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E6%8A%80%E6%9C%AF/3-%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1%E7%89%B9%E6%80%A7%E8%AF%A6%E8%A7%A3/</guid><description>静态路由特性详解 转载：https://zhuanlan.zhihu.com/p/130336151
在配置和应用静态路由时，我们应当全面地了解静态路由的以下特点，否则你可能在遇到故障时总也想不通为什么：
1、手动配置
静态路由需要管理员根据实际需要进行手动配置，路由器不会自动生成所需的静态路由的。
静态路由中包括目标节点或目标网络的IP地址，还可以包括下一跳IP地址（通常是下一个路由器与本地路由器连接的接口IP地址），以及在本路由器上使用该静态路由时的数据包出接口等。
2、路由路径相对固定
因为静态路由是手动配置的，静态的，所以每个配置的静态路由在本地路由器上的路径基本上是不变的，除非由管理员自己修改。
3、永久存在
因为静态路由是由管理员手工创建，一旦完成会永久在路由表中存在，除非管理员自己删除了它，或者静态路由中指定的出接口关闭，或者下一跳IP地址不可达。
4、不可通告性
静态路由信息在默认情况下是私有的，不会通告给其它路由器，但网络管理员还是可以通过重发布静态路由为其它动态路由，使得网络中其它路由器也可获此静态路由。
5、单向性
静态路由是具有单向性的，也就是它仅为数据提供沿着下一跳的方向进行路由，不提供反向路由。所以如果你想要使源节点与目标节点或网络进行双向通信，就必须同时配置回程静态路由。
如图7-2所示，如果想要使得PC1（PC1已配置了A节点的IP地址10.16.1.2/24作为网关地址）能够ping通PC2，则必须同时配置以下两条静态路由。
图7-2 静态路由单向性示例
① ：在R1路由器上配置了到达PC2的正向静态路由（以PC2 10.16.3.2/24作为目标节点，以C节点IP地址10.16.2.2/24作为下一跳地址）；
② ：在R2路由器上配置到达PC1的回程静态路由（以PC1 10.16.1.1/24作为目标节点，以B节点IP地址10.16.2.1/24作为下一跳地址），以提供Ping过程回程ICMP消息的路由路径。
6、接力性
如果某条静态路由中间经过的跳数大于1（也就是整条路由路径经历了三个或以上路由器结点），则必须在除最后一个路由器外的其它路由器上依次配置到达相同目标节点或目标网络的静态路由，这就是静态路由的“接力”特性，否则仅在源路由器上配置这么静态路由还是不可达的。
如图7-3所示是一个三个路由器串联的简单的网络，各个路由器节点及PC机的IP地址均在图中进行了标注，PC1已配置好指向R1的A节点地址的网关，现假设要使PC1能ping得通PC2，则需要在各路由器上配置以下四条静态路由（两条正向，两条回程）：
图7-3 静态路由接力性示例
① ：在R1路由器上配置了到达PC2的正向静态路由（以PC2 10.16.4.0/24作为目标节点，以C节点IP地址10.16.2.2/24作为下一跳地址）；
② ：在R2路由器上配置了到达PC2的正向接力静态路由（同样以PC2 10.16.4.0/24作为目标节点，以E节点IP地址10.16.3.2/24作为下一跳地址）；
③ ：在R3路由器上配置到达PC1的回程静态路由（以PC1 10.16.1.1/24作为目标节点，以D节点IP地址10.16.3.1/24作为下一跳地址），以提供Ping通信回程ICMP消息的路由路径。
④ ：在R2路由器上配置到达PC1的回程接力静态路由（同样以PC1 10.16.1.1/24作为目标节点地址，以B节点IP地址10.16.2.1/24作为下一跳地址），以提供Ping通信回程ICMP消息的接力路由路径。
7、递归性
有时我们会存在错误的认识，认为静态路由的“下一跳”必须是与本地路由直接连接的下一个路由器接口，其实这是片面的。
前面说了，静态路由没有建立邻接关系的Hello包，静态路由也不会被通告邻居路由器，所以它的下一跳是路径中其它路由器中的任一一个接口， 只是能保证到达下一跳就行了。这就是静态路由的“递归性”。
8、优先级较高
因为静态路由明确指出了到达目标网络，或者目标节点的路由路径，所以在所有同目的地址的路由中，静态路由的优先级是除“直连路由”外最高的。
静态路由适用于小型网络，网络管理员易于清楚地了解网络的拓扑结构，便于设置正确的路由信息，其缺点在于：
需要在路由器上手动配置，如果网络结构复杂。跳数较多的话，仅通过静态路由来实现路由，还可能造成路由环路。
如果网络拓扑结构发生改变，路由器上的静态路由必须跟着改变，否则原来配置的静态路由将可能失效。
推荐 通信技术专栏</description></item></channel></rss>