<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>ljzsdut</title><link>https://note.ljzsdut.com/%E8%99%9A%E6%8B%9F%E5%8C%96/Openstack/01-openstack%E9%83%A8%E7%BD%B2/</link><description>Recent content on ljzsdut</description><generator>Hugo -- gohugo.io</generator><atom:link href="https://note.ljzsdut.com/%E8%99%9A%E6%8B%9F%E5%8C%96/Openstack/01-openstack%E9%83%A8%E7%BD%B2/index.xml" rel="self" type="application/rss+xml"/><item><title/><link>https://note.ljzsdut.com/%E8%99%9A%E6%8B%9F%E5%8C%96/Openstack/01-openstack%E9%83%A8%E7%BD%B2/00-packstack%E9%83%A8%E7%BD%B2OpenStack/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://note.ljzsdut.com/%E8%99%9A%E6%8B%9F%E5%8C%96/Openstack/01-openstack%E9%83%A8%E7%BD%B2/00-packstack%E9%83%A8%E7%BD%B2OpenStack/</guid><description>[toc]
零、packstack部署 参考链接：https://blog.51cto.com/u_14210294/2385696
节点规划：
controller 内存&amp;gt;4G
network 内存&amp;gt;2G
compute 内存&amp;gt;6G
内存不能低于以上配置，否则安装步骤可能会卡住。
网络规划：
eth0 （(NAT网络) 10.211.55.0/24 management管理网+API网络，需要配置IP eth1 （HOST网络） 10.37.129.0/24 外部网络（provider网络：flat、vlan），不配置IP eth2 （HOST网络） 10.37.132.0/24 隧道网络（data网络、vm网络），需要配置IP 网卡配置：如果是DHCP转换为静态配置
eth1网卡作为外部网络的网卡，虚拟化时，可以采用HOST网络或NAT网络，如果是NAT网络，可以实现虚机访问外网。即虚机能否上外网，取决于外部网络的网卡能否上外网。
时间同步、防火墙、selinux、hosts文件、packstack免密登录。
[root@controller ~]# cat /etc/hosts 127.0.0.1 localhost localhost.localdomain localhost4 localhost4.localdomain4 ::1 localhost localhost.localdomain localhost6 localhost6.localdomain6 10.211.55.68 controller controller.localdomain 10.211.55.69 network network.localdomain 10.211.55.70 compute01 compute01.localdomain 10.211.55.71 compute02 compute02.localdomain #所有节点配置类似： [root@compute02 network-scripts]# cat ifcfg-eth0 TYPE=Ethernet PROXY_METHOD=none BROWSER_ONLY=no BOOTPROTO=static DEFROUTE=yes IPV4_FAILURE_FATAL=no IPV6INIT=yes IPV6_AUTOCONF=yes IPV6_DEFROUTE=yes IPV6_FAILURE_FATAL=no IPV6_ADDR_GEN_MODE=stable-privacy NAME=eth0 #UUID=8b13e7d9-4b18-4d9c-b68e-c1cf1d156b62 DEVICE=eth0 ONBOOT=yes IPADDR=10.</description></item><item><title/><link>https://note.ljzsdut.com/%E8%99%9A%E6%8B%9F%E5%8C%96/Openstack/01-openstack%E9%83%A8%E7%BD%B2/01-openstack%E5%85%A5%E9%97%A8-horizon%E4%BD%BF%E7%94%A8/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://note.ljzsdut.com/%E8%99%9A%E6%8B%9F%E5%8C%96/Openstack/01-openstack%E9%83%A8%E7%BD%B2/01-openstack%E5%85%A5%E9%97%A8-horizon%E4%BD%BF%E7%94%A8/</guid><description>openstack配置桥 #eth0 10.211.55.0/24 management管理网（可选） #eth1 10.37.129.0/24 data数据网络（overlay network），answer文件中主要配置该网络（hosts文件中也要配置该网络） #eth2 10.37.132.0/24 external外部网络（静态IP，packstack会修改network节点上配置文件，配置ovs-bridge上）（provider network） 在网络节点配置ovs桥
[root@controller ~]# cd /etc/sysconfig/network-scripts/ [root@controller network-scripts]# ll total 256 -rw-r--r--. 1 root root 364 Aug 8 17:47 ifcfg-eth0 -rw-r--r--. 1 root root 174 Aug 8 17:49 ifcfg-eth1 -rw-r--r--. 1 root root 174 Aug 8 17:50 ifcfg-eth2 -rw-r--r--. 1 root root 254 Aug 19 2019 ifcfg-lo ...... [root@controller network-scripts]# cat ifcfg-eth0 TYPE=Ethernet PROXY_METHOD=none BROWSER_ONLY=no BOOTPROTO=static DEFROUTE=yes IPV4_FAILURE_FATAL=no IPV6INIT=yes IPV6_AUTOCONF=yes IPV6_DEFROUTE=yes IPV6_FAILURE_FATAL=no IPV6_ADDR_GEN_MODE=stable-privacy NAME=eth0 #UUID=8b13e7d9-4b18-4d9c-b68e-c1cf1d156b62 DEVICE=eth0 ONBOOT=yes IPADDR=10.</description></item><item><title/><link>https://note.ljzsdut.com/%E8%99%9A%E6%8B%9F%E5%8C%96/Openstack/01-openstack%E9%83%A8%E7%BD%B2/02-devstack%E9%83%A8%E7%BD%B2/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://note.ljzsdut.com/%E8%99%9A%E6%8B%9F%E5%8C%96/Openstack/01-openstack%E9%83%A8%E7%BD%B2/02-devstack%E9%83%A8%E7%BD%B2/</guid><description>配置pip源 mkdir .pip cat &amp;gt; ~/.pip/pip.conf &amp;lt;&amp;lt;&amp;#34;EOF&amp;#34; [global] trusted-host = mirrors.aliyun.com index-url = https://mirrors.aliyun.com/pypi/simple EOF 配置apt源 cp -rf /etc/apt/sources.list{,.bak} cat &amp;gt;/etc/apt/sources.list&amp;lt;&amp;lt;&amp;#34;EOF&amp;#34; deb http://repo.huaweicloud.com/ubuntu/ bionic main restricted deb http://repo.huaweicloud.com/ubuntu/ bionic-updates main restricted deb http://repo.huaweicloud.com/ubuntu/ bionic universe deb http://repo.huaweicloud.com/ubuntu/ bionic-updates universe deb http://repo.huaweicloud.com/ubuntu/ bionic multiverse deb http://repo.huaweicloud.com/ubuntu/ bionic-updates multiverse deb http://repo.huaweicloud.com/ubuntu/ bionic-backports main restricted universe multiverse deb http://repo.huaweicloud.com/ubuntu bionic-security main restricted deb http://repo.huaweicloud.com/ubuntu bionic-security universe deb http://repo.huaweicloud.com/ubuntu bionic-security multiverse deb http://archive.ubuntu.com/ubuntu bionic universe EOF 下载代码 git clone http://git.</description></item><item><title/><link>https://note.ljzsdut.com/%E8%99%9A%E6%8B%9F%E5%8C%96/Openstack/01-openstack%E9%83%A8%E7%BD%B2/03-OpenStack-rocky%E6%89%8B%E5%8A%A8%E9%83%A8%E7%BD%B2/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://note.ljzsdut.com/%E8%99%9A%E6%8B%9F%E5%8C%96/Openstack/01-openstack%E9%83%A8%E7%BD%B2/03-OpenStack-rocky%E6%89%8B%E5%8A%A8%E9%83%A8%E7%BD%B2/</guid><description>准备 网卡配置 网卡配置：network节点也使用controller Controller eth0 10.211.55.46 #管理网 eth1 none # provider接口，不分配IP eth2 10.37.132.12 Compute eth0 10.211.55.47 #管理网 eth1 none eth2 10.37.132.13 [root@controller ~]# cat /etc/sysconfig/network-scripts/ifcfg-eth1 TYPE=Ethernet PROXY_METHOD=none BROWSER_ONLY=no BOOTPROTO=&amp;#34;none&amp;#34; DEFROUTE=yes IPV4_FAILURE_FATAL=no IPV6INIT=yes IPV6_AUTOCONF=yes IPV6_DEFROUTE=yes IPV6_FAILURE_FATAL=no IPV6_ADDR_GEN_MODE=stable-privacy NAME=eth1 DEVICE=eth1 ONBOOT=yes 关闭防火墙和selinux（所有节点） systemctl disable NetworkManager systemctl stop NetworkManager systemctl disable firewalld.service systemctl stop firewalld.service setenforce 0 配置OpenStack仓库源 cat &amp;gt; /etc/yum.repos.d/openstack-rocky.repo &amp;lt;&amp;lt;EOF [openstack] name=opentack baseurl=https://mirrors.aliyun.com/centos/7/cloud/x86_64/openstack-rocky/ gpgcheck=0 [Virt] name=CentOS-$releasever - Base baseurl=https://mirrors.aliyun.com/centos/7/virt/x86_64/kvm-common/ gpgcheck=0 gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7 EOF 时间同步 安装openstack客户端 yum install -y python-openstackclient 通用组件 MariaDB https://docs.</description></item></channel></rss>