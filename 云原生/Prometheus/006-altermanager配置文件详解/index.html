<!doctype html><html lang=en class=color-toggle-hidden><head><meta charset=utf-8><meta name=referrer content="no-referrer"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=color-scheme content="light dark"><meta name=generator content="Hugo 0.102.3"><meta name=description content="Alertmanager简介 Alertmanager特性 分组 抑制 静默 Prometheus告警规则【扩展】 定义告警规则 annotations&label模板化 查看告警状态 实例：定义主机监控告警 Alertmanager配置概述 自定义altermanager告警模板 基于标签的告警路由 路由匹配 告警分组 Group By Group wait Group Interval Repeat Interval 告警接收器Receiver Email 企业微信 钉钉机器人(Webhook) 警报通知模板 开源警报组件推荐 告警通知屏蔽 抑制机制（inhibit_rules） 临时静默处理 使用Recoding Rules优化性能 定义Recoding rules alertmanager配置文件完整示例 示例1：官方示例 示例2：案例配置 示例3：简单配置 示例4：rancher alertmanager集群高可用部署 参考文档： Alertmanager简介 警报一直是整个监控系统中的重要组成部分，Prometheus监控系统中，警报是由独立的2部分组成，数据采集（Prometheus）与警报（Alertmanager）是分离的2个组件。警报规则在 Prometheus 定义，警报规则触发以后，才会将信息转发到给独立的组件Alertmanager ，经过 Alertmanager 对警报的信息处理后，最终通过接收器发送给指定用户。
Prometheus Server端通过静态或者动态配置去拉取部署在k8s或云主机上的各种类别的监控指标数据，然后基于PromQL 对这些已经存储在本地存储TSDB 中的指标，定义阈值警报规则 Rules 。Prometheus会根据配置的参数周期性的对警报规则进行计算， 如果满足警报条件(告警规则评估结果为True)，生产一条警报信息，将其推送到 Alertmanager 组件。
Alertmanager 收到警报信息之后，会对警告信息进行处理，进行 去重、分组 Group 并将它们通过定义好的路由 Routing 规则路由到正确的接收器 receiver， 比如 Email Slack 钉钉、企业微信 Robot（webhook） 企业微信等，最终异常事件 Warning、Error通知给定义好的接收人，其中如钉钉是基于第三方通知来实现的，对于通知人定义是在钉钉的第三方组件中配置。此外，它还负责静默和抑制警报。"><title>006 Altermanager配置文件详解 | ljzsdut</title><link rel=icon type=image/svg+xml href=/favicon/favicon.svg><link rel=icon type=image/png sizes=32x32 href=/favicon/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon/favicon-16x16.png><meta property="og:title" content="006 Altermanager配置文件详解"><meta property="og:site_name" content="ljzsdut"><meta property="og:description" content="Alertmanager简介 Alertmanager特性 分组 抑制 静默 Prometheus告警规则【扩展】 定义告警规则 annotations&label模板化 查看告警状态 实例：定义主机监控告警 Alertmanager配置概述 自定义altermanager告警模板 基于标签的告警路由 路由匹配 告警分组 Group By Group wait Group Interval Repeat Interval 告警接收器Receiver Email 企业微信 钉钉机器人(Webhook) 警报通知模板 开源警报组件推荐 告警通知屏蔽 抑制机制（inhibit_rules） 临时静默处理 使用Recoding Rules优化性能 定义Recoding rules alertmanager配置文件完整示例 示例1：官方示例 示例2：案例配置 示例3：简单配置 示例4：rancher alertmanager集群高可用部署 参考文档： Alertmanager简介 警报一直是整个监控系统中的重要组成部分，Prometheus监控系统中，警报是由独立的2部分组成，数据采集（Prometheus）与警报（Alertmanager）是分离的2个组件。警报规则在 Prometheus 定义，警报规则触发以后，才会将信息转发到给独立的组件Alertmanager ，经过 Alertmanager 对警报的信息处理后，最终通过接收器发送给指定用户。
Prometheus Server端通过静态或者动态配置去拉取部署在k8s或云主机上的各种类别的监控指标数据，然后基于PromQL 对这些已经存储在本地存储TSDB 中的指标，定义阈值警报规则 Rules 。Prometheus会根据配置的参数周期性的对警报规则进行计算， 如果满足警报条件(告警规则评估结果为True)，生产一条警报信息，将其推送到 Alertmanager 组件。
Alertmanager 收到警报信息之后，会对警告信息进行处理，进行 去重、分组 Group 并将它们通过定义好的路由 Routing 规则路由到正确的接收器 receiver， 比如 Email Slack 钉钉、企业微信 Robot（webhook） 企业微信等，最终异常事件 Warning、Error通知给定义好的接收人，其中如钉钉是基于第三方通知来实现的，对于通知人定义是在钉钉的第三方组件中配置。此外，它还负责静默和抑制警报。"><meta property="og:type" content="article"><meta property="og:url" content="https://note.ljzsdut.com/%E4%BA%91%E5%8E%9F%E7%94%9F/Prometheus/006-altermanager%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%A6%E8%A7%A3/"><meta property="article:section" content="云原生"><meta name=twitter:card content="summary"><meta name=twitter:title content="006 Altermanager配置文件详解"><meta name=twitter:description content="Alertmanager简介 Alertmanager特性 分组 抑制 静默 Prometheus告警规则【扩展】 定义告警规则 annotations&label模板化 查看告警状态 实例：定义主机监控告警 Alertmanager配置概述 自定义altermanager告警模板 基于标签的告警路由 路由匹配 告警分组 Group By Group wait Group Interval Repeat Interval 告警接收器Receiver Email 企业微信 钉钉机器人(Webhook) 警报通知模板 开源警报组件推荐 告警通知屏蔽 抑制机制（inhibit_rules） 临时静默处理 使用Recoding Rules优化性能 定义Recoding rules alertmanager配置文件完整示例 示例1：官方示例 示例2：案例配置 示例3：简单配置 示例4：rancher alertmanager集群高可用部署 参考文档： Alertmanager简介 警报一直是整个监控系统中的重要组成部分，Prometheus监控系统中，警报是由独立的2部分组成，数据采集（Prometheus）与警报（Alertmanager）是分离的2个组件。警报规则在 Prometheus 定义，警报规则触发以后，才会将信息转发到给独立的组件Alertmanager ，经过 Alertmanager 对警报的信息处理后，最终通过接收器发送给指定用户。
Prometheus Server端通过静态或者动态配置去拉取部署在k8s或云主机上的各种类别的监控指标数据，然后基于PromQL 对这些已经存储在本地存储TSDB 中的指标，定义阈值警报规则 Rules 。Prometheus会根据配置的参数周期性的对警报规则进行计算， 如果满足警报条件(告警规则评估结果为True)，生产一条警报信息，将其推送到 Alertmanager 组件。
Alertmanager 收到警报信息之后，会对警告信息进行处理，进行 去重、分组 Group 并将它们通过定义好的路由 Routing 规则路由到正确的接收器 receiver， 比如 Email Slack 钉钉、企业微信 Robot（webhook） 企业微信等，最终异常事件 Warning、Error通知给定义好的接收人，其中如钉钉是基于第三方通知来实现的，对于通知人定义是在钉钉的第三方组件中配置。此外，它还负责静默和抑制警报。"><script type=application/ld+json>{"@context":"http://schema.org","@type":"TechArticle","articleSection":"云原生","name":"006 Altermanager配置文件详解","url":"https://note.ljzsdut.com/%E4%BA%91%E5%8E%9F%E7%94%9F/Prometheus/006-altermanager%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%A6%E8%A7%A3/","headline":"006 Altermanager配置文件详解","description":"Alertmanager简介 Alertmanager特性 分组 抑制 静默 Prometheus告警规则【扩展】 定义告警规则 annotations\u0026label模板化 查看告警状态 实例：定义主机监控告警 Alertmanager配置概述 自定义altermanager告警模板 基于标签的告警路由 路由匹配 告警分组 Group By Group wait Group Interval Repeat Interval 告警接收器Receiver Email 企业微信 钉钉机器人(Webhook) 警报通知模板 开源警报组件推荐 告警通知屏蔽 抑制机制（inhibit_rules） 临时静默处理 使用Recoding Rules优化性能 定义Recoding rules alertmanager配置文件完整示例 示例1：官方示例 示例2：案例配置 示例3：简单配置 示例4：rancher alertmanager集群高可用部署 参考文档： Alertmanager简介 警报一直是整个监控系统中的重要组成部分，Prometheus监控系统中，警报是由独立的2部分组成，数据采集（Prometheus）与警报（Alertmanager）是分离的2个组件。警报规则在 Prometheus 定义，警报规则触发以后，才会将信息转发到给独立的组件Alertmanager ，经过 Alertmanager 对警报的信息处理后，最终通过接收器发送给指定用户。\nPrometheus Server端通过静态或者动态配置去拉取部署在k8s或云主机上的各种类别的监控指标数据，然后基于PromQL 对这些已经存储在本地存储TSDB 中的指标，定义阈值警报规则 Rules 。Prometheus会根据配置的参数周期性的对警报规则进行计算， 如果满足警报条件(告警规则评估结果为True)，生产一条警报信息，将其推送到 Alertmanager 组件。\nAlertmanager 收到警报信息之后，会对警告信息进行处理，进行 去重、分组 Group 并将它们通过定义好的路由 Routing 规则路由到正确的接收器 receiver， 比如 Email Slack 钉钉、企业微信 Robot（webhook） 企业微信等，最终异常事件 Warning、Error通知给定义好的接收人，其中如钉钉是基于第三方通知来实现的，对于通知人定义是在钉钉的第三方组件中配置。此外，它还负责静默和抑制警报。","wordCount":"3314","license":"CC BY-SA 4.0","inLanguage":"en","isFamilyFriendly":"true","mainEntityOfPage":{"@type":"WebPage","@id":"https://note.ljzsdut.com/%E4%BA%91%E5%8E%9F%E7%94%9F/Prometheus/006-altermanager%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%A6%E8%A7%A3/"},"copyrightHolder":"ljzsdut","copyrightYear":"0001","dateCreated":"0001-01-01T00:00:00.00Z","datePublished":"0001-01-01T00:00:00.00Z","dateModified":"0001-01-01T00:00:00.00Z","publisher":{"@type":"Organization","name":"ljzsdut","url":"https://note.ljzsdut.com/","logo":{"@type":"ImageObject","url":"https://note.ljzsdut.com/brand.svg","width":"32","height":"32"}}}</script><script src=/js/main-902b82d5.bundle.min.js></script>
<link rel=preload as=font href=/fonts/Metropolis.woff2 type=font/woff2 crossorigin=anonymous><link rel=preload as=font href=/fonts/LiberationSans.woff2 type=font/woff2 crossorigin=anonymous><link rel=preload href=/main-be78422f.min.css as=style><link rel=stylesheet href=/main-be78422f.min.css media=all><link rel=preload href=/mobile-c0e18b0e.min.css as=style><link rel=stylesheet href=/mobile-c0e18b0e.min.css media="screen and (max-width: 45rem)"><link rel=preload href=/print-19966b38.min.css as=style><link rel=stylesheet href=/print-19966b38.min.css media=print><link rel=preload href=/custom.css as=style><link rel=stylesheet href=/custom.css media=all><link href=https://note.ljzsdut.com/%E4%BA%91%E5%8E%9F%E7%94%9F/Prometheus/006-altermanager%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%A6%E8%A7%A3/ rel=canonical type=text/html></head><body itemscope itemtype=https://schema.org/WebPage><svg class="svg-sprite" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><svg viewBox="-7.27 -7.27 38.55 38.55" id="gdoc_arrow_back" xmlns="http://www.w3.org/2000/svg"><path d="M24 10.526v2.947H5.755l8.351 8.421-2.105 2.105-12-12 12-12 2.105 2.105-8.351 8.421H24z"/></svg><svg viewBox="-7.27 -7.27 38.55 38.55" id="gdoc_arrow_left_alt" xmlns="http://www.w3.org/2000/svg"><path d="M5.965 10.526V6.035L0 12l5.965 5.965v-4.491H24v-2.947H5.965z"/></svg><svg viewBox="-7.27 -7.27 38.55 38.55" id="gdoc_arrow_right_alt" xmlns="http://www.w3.org/2000/svg"><path d="M18.035 10.526V6.035L24 12l-5.965 5.965v-4.491H0v-2.947h18.035z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_bitbucket" xmlns="http://www.w3.org/2000/svg"><path d="M15.905 13.355c.189 1.444-1.564 2.578-2.784 1.839-1.375-.602-1.375-2.784-.034-3.403 1.151-.705 2.818.223 2.818 1.564zm1.907-.361c-.309-2.44-3.076-4.056-5.328-3.042-1.426.636-2.389 2.148-2.32 3.747.086 2.097 2.08 3.815 4.176 3.626s3.729-2.234 3.472-4.331zm4.108-9.315c-.756-.997-2.045-1.169-3.179-1.358-3.214-.516-6.513-.533-9.727.034-1.066.172-2.269.361-2.939 1.323 1.1 1.031 2.664 1.186 4.073 1.358 2.544.327 5.156.344 7.699.017 1.426-.172 3.008-.309 4.073-1.375zm.979 17.788c-.481 1.684-.206 3.953-1.994 4.932-3.076 1.701-6.806 1.89-10.191 1.289-1.787-.327-3.884-.894-4.864-2.578-.43-1.65-.705-3.334-.98-5.018l.103-.275.309-.155c5.121 3.386 12.288 3.386 17.427.0.808.241.206 1.22.189 1.805zM26.01 4.951c-.584 3.764-1.255 7.51-1.908 11.257-.189 1.1-1.255 1.719-2.148 2.183-3.214 1.615-6.96 1.89-10.483 1.512-2.389-.258-4.829-.894-6.771-2.389-.911-.705-.911-1.908-1.083-2.922-.602-3.523-1.289-7.046-1.719-10.604.206-1.547 1.942-2.217 3.231-2.698C6.848.654 8.686.362 10.508.19c3.884-.378 7.854-.241 11.618.859 1.341.395 2.784.945 3.695 2.097.412.533.275 1.203.189 1.805z"/></svg><svg viewBox="-7.27 -7.27 38.55 38.55" id="gdoc_bookmark" xmlns="http://www.w3.org/2000/svg"><path d="M15.268 4.392q.868.0 1.532.638t.664 1.506v17.463l-7.659-3.268-7.608 3.268V6.536q0-.868.664-1.506t1.532-.638h10.876zm4.34 14.144V4.392q0-.868-.638-1.532t-1.506-.664H6.537q0-.868.664-1.532T8.733.0h10.876q.868.0 1.532.664t.664 1.532v17.412z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_brightness_auto" xmlns="http://www.w3.org/2000/svg"><path d="M16.846 18.938h2.382L15.22 7.785h-2.44L8.772 18.938h2.382l.871-2.44h3.95zm7.087-9.062L27.999 14l-4.066 4.124v5.809h-5.809L14 27.999l-4.124-4.066H4.067v-5.809L.001 14l4.066-4.124V4.067h5.809L14 .001l4.124 4.066h5.809v5.809zm-11.385 4.937L14 10.282l1.452 4.531h-2.904z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_brightness_dark" xmlns="http://www.w3.org/2000/svg"><path d="M14 21.435q3.079.0 5.257-2.178T21.435 14t-2.178-5.257T14 6.565q-1.51.0-3.079.697 1.917.871 3.108 2.701T15.22 14t-1.191 4.037-3.108 2.701q1.568.697 3.079.697zm9.933-11.559L27.999 14l-4.066 4.124v5.809h-5.809L14 27.999l-4.124-4.066H4.067v-5.809L.001 14l4.066-4.124V4.067h5.809L14 .001l4.124 4.066h5.809v5.809z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_brightness_light" xmlns="http://www.w3.org/2000/svg"><path d="M14 21.435q3.079.0 5.257-2.178T21.435 14t-2.178-5.257T14 6.565 8.743 8.743 6.565 14t2.178 5.257T14 21.435zm9.933-3.311v5.809h-5.809L14 27.999l-4.124-4.066H4.067v-5.809L.001 14l4.066-4.124V4.067h5.809L14 .001l4.124 4.066h5.809v5.809L27.999 14z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_check" xmlns="http://www.w3.org/2000/svg"><path d="M8.885 20.197 25.759 3.323l2.24 2.24L8.885 24.677.0 15.792l2.24-2.24z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_check_circle_outline" xmlns="http://www.w3.org/2000/svg"><path d="M14 25.239q4.601.0 7.92-3.319T25.239 14 21.92 6.08 14 2.761 6.08 6.08 2.761 14t3.319 7.92T14 25.239zM14 0q5.784.0 9.892 4.108T28 14t-4.108 9.892T14 28t-9.892-4.108T0 14t4.108-9.892T14 0zm6.441 7.822 1.972 1.972-11.239 11.239L4.207 14l1.972-1.972 4.995 4.995z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_cloud_off" xmlns="http://www.w3.org/2000/svg"><path d="M9.023 10.5H7q-1.914.0-3.281 1.395t-1.367 3.309 1.367 3.281T7 19.852h11.375zM3.5 4.976l1.477-1.477L24.5 23.022l-1.477 1.477-2.352-2.297H6.999q-2.898.0-4.949-2.051t-2.051-4.949q0-2.844 1.969-4.867t4.758-2.133zm19.086 5.578q2.242.164 3.828 1.832T28 16.351q0 3.008-2.461 4.758l-1.695-1.695q1.805-.984 1.805-3.063.0-1.422-1.039-2.461t-2.461-1.039h-1.75v-.602q0-2.68-1.859-4.539t-4.539-1.859q-1.531.0-2.953.711l-1.75-1.695Q11.431 3.5 14.001 3.5q2.953.0 5.496 2.078t3.09 4.977z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_code" xmlns="http://www.w3.org/2000/svg"><path d="M9.917 24.5a1.75 1.75.0 10-3.501.001 1.75 1.75.0 003.501-.001zm0-21a1.75 1.75.0 10-3.501.001A1.75 1.75.0 009.917 3.5zm11.666 2.333a1.75 1.75.0 10-3.501.001 1.75 1.75.0 003.501-.001zm1.75.0a3.502 3.502.0 01-1.75 3.026c-.055 6.581-4.721 8.039-7.82 9.023-2.898.911-3.846 1.349-3.846 3.117v.474a3.502 3.502.0 011.75 3.026c0 1.932-1.568 3.5-3.5 3.5s-3.5-1.568-3.5-3.5c0-1.294.711-2.424 1.75-3.026V6.526A3.502 3.502.0 014.667 3.5c0-1.932 1.568-3.5 3.5-3.5s3.5 1.568 3.5 3.5a3.502 3.502.0 01-1.75 3.026v9.06c.93-.456 1.914-.766 2.807-1.039 3.391-1.075 5.323-1.878 5.359-5.687a3.502 3.502.0 01-1.75-3.026c0-1.932 1.568-3.5 3.5-3.5s3.5 1.568 3.5 3.5z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_copy" xmlns="http://www.w3.org/2000/svg"><path d="M23.502 25.438V7.626H9.562v17.812h13.94zm0-20.315q1.013.0 1.787.745t.774 1.757v17.812q0 1.013-.774 1.787t-1.787.774H9.562q-1.013.0-1.787-.774t-.774-1.787V7.625q0-1.013.774-1.757t1.787-.745h13.94zM19.689.0v2.562H4.438v17.812H1.936V2.562q0-1.013.745-1.787T4.438.001h15.251z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_dangerous" xmlns="http://www.w3.org/2000/svg"><path d="M21.802 19.833 15.969 14l5.833-5.833-1.969-1.969L14 12.031 8.167 6.198 6.198 8.167 12.031 14l-5.833 5.833 1.969 1.969L14 15.969l5.833 5.833zM19.833.0 28 8.167v11.666L19.833 28H8.167L0 19.833V8.167L8.167.0h11.666z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gdoc_date" xmlns="http://www.w3.org/2000/svg"><path d="M27.192 28.844V11.192H4.808v17.652h22.384zm0-25.689q1.277.0 2.253.976t.976 2.253v22.459q0 1.277-.976 2.216t-2.253.939H4.808q-1.352.0-2.291-.901t-.939-2.253V6.385q0-1.277.939-2.253t2.291-.976h1.577V.001h3.23v3.155h12.769V.001h3.23v3.155h1.577zm-3.155 11.267v3.155h-3.23v-3.155h3.23zm-6.46.0v3.155h-3.155v-3.155h3.155zm-6.384.0v3.155h-3.23v-3.155h3.23z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gdoc_download" xmlns="http://www.w3.org/2000/svg"><path d="M2.866 28.209h26.269v3.79H2.866v-3.79zm26.268-16.925L16 24.418 2.866 11.284h7.493V.001h11.283v11.283h7.493z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gdoc_email" xmlns="http://www.w3.org/2000/svg"><path d="M28.845 9.615v-3.23L16 14.422 3.155 6.385v3.23L16 17.577zm0-6.46q1.277.0 2.216.977T32 6.385v19.23q0 1.277-.939 2.253t-2.216.977H3.155q-1.277.0-2.216-.977T0 25.615V6.385q0-1.277.939-2.253t2.216-.977h25.69z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_error_outline" xmlns="http://www.w3.org/2000/svg"><path d="M14 25.239q4.601.0 7.92-3.319T25.239 14 21.92 6.08 14 2.761 6.08 6.08 2.761 14t3.319 7.92T14 25.239zM14 0q5.784.0 9.892 4.108T28 14t-4.108 9.892T14 28t-9.892-4.108T0 14t4.108-9.892T14 0zm-1.38 6.967h2.761v8.413H12.62V6.967zm0 11.239h2.761v2.826H12.62v-2.826z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_fire" xmlns="http://www.w3.org/2000/svg"><path d="M17.689 21.998q-.32.32-.8.576t-.864.384q-1.152.384-2.272.032t-1.888-.992q-.128-.128-.096-.256t.16-.192q1.216-.384 1.92-1.216t.96-1.792q.192-.896-.064-1.728t-.384-1.728q-.128-.704-.096-1.376t.288-1.312q0-.128.128-.128t.192.064q.384.832.992 1.472t1.28 1.216 1.216 1.248.672 1.568q.064.384.064.704.064.96-.32 1.92t-1.088 1.536zm3.84-10.944q-.768-.704-1.6-1.28t-1.6-1.344q-1.536-1.536-2.016-3.584t.16-4.16q.128-.32-.096-.544t-.544-.096q-.768.32-1.44.768t-1.312.896q-1.984 1.664-3.136 3.936T8.633 10.51t.8 5.088q0 .128.032.256t.032.256q0 .576-.512.832t-1.024-.192q-.128-.192-.192-.32-1.024-1.28-1.376-2.912t-.096-3.232q.064-.384-.288-.576t-.608.128q-1.28 1.664-1.856 3.68t-.448 4.064q0 .576.096 1.184t.288 1.184q.448 1.536 1.216 2.816 1.216 2.048 3.264 3.424t4.416 1.696q2.496.32 5.024-.256t4.448-2.304q1.408-1.344 2.208-3.104t.864-3.68-.704-3.712q-.064-.128-.096-.224t-.096-.224q-.576-1.088-1.28-1.984-.256-.384-.544-.704t-.672-.64z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_git" xmlns="http://www.w3.org/2000/svg"><path d="M27.472 12.753 15.247.529a1.803 1.803.0 00-2.55.0l-2.84 2.84 2.137 2.137a2.625 2.625.0 013.501 3.501l3.499 3.499a2.625 2.625.0 11-1.237 1.237l-3.499-3.499c-.083.04-.169.075-.257.106v7.3a2.626 2.626.0 11-1.75.0v-7.3a2.626 2.626.0 01-1.494-3.607L8.62 4.606l-8.09 8.09a1.805 1.805.0 000 2.551l12.225 12.224a1.803 1.803.0 002.55.0l12.168-12.168a1.805 1.805.0 000-2.551z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gdoc_gitea" xmlns="http://www.w3.org/2000/svg"><path d="M5.581 7.229c-2.46-.005-5.755 1.559-5.573 5.48.284 6.125 6.56 6.693 9.068 6.743.275 1.149 3.227 5.112 5.412 5.32h9.573c5.741-.381 10.04-17.363 6.853-17.427-5.271.248-8.395.373-11.073.395v5.3l-.835-.369-.005-4.928c-3.075-.001-5.781-.144-10.919-.397-.643-.004-1.539-.113-2.501-.116zm.348 2.166h.293c.349 3.14.917 4.976 2.067 7.781-2.933-.347-5.429-1.199-5.888-4.38-.237-1.647.563-3.365 3.528-3.401zm11.409 3.087c.2.003.404.04.596.128l.999.431-.716 1.305h-.007a.996.996.0 00-.321.053l.006-.002c-.349.114-.593.406-.593.749.0.097.019.189.055.275l-.002-.006a.767.767.0 00.151.233l-.001-.001-1.235 2.248a.99.99.0 00-.302.052l.006-.002c-.349.114-.593.406-.593.749.0.097.019.189.055.275l-.002-.006c.128.31.457.527.843.527a.987.987.0 00.31-.049l-.006.002c.348-.114.592-.406.592-.749.0-.097-.02-.19-.056-.277l.002.006a.784.784.0 00-.211-.293l1.203-2.189a.999.999.0 00.397-.041l-.006.002a.942.942.0 00.285-.15l-.001.001c.464.195.844.353 1.117.488.411.203.556.337.6.487.044.147-.004.429-.236.925-.173.369-.46.893-.799 1.511h-.02a.991.991.0 00-.321.053l.006-.002c-.349.114-.593.406-.593.749.0.097.019.189.055.275l-.002-.006c.128.31.457.527.843.527a.987.987.0 00.31-.049l-.006.002c.348-.114.592-.406.592-.749a.703.703.0 00-.055-.275l.002.006a.802.802.0 00-.183-.27l.001.001c.335-.611.623-1.136.808-1.531.251-.536.381-.935.267-1.32s-.467-.636-.933-.867c-.307-.151-.689-.311-1.147-.503a.723.723.0 00-.052-.324l.002.006a.792.792.0 00-.194-.279l.704-1.284 3.899 1.684c.704.305.995 1.053.653 1.68l-2.68 4.907c-.343.625-1.184.884-1.888.58l-5.516-2.384c-.704-.304-.996-1.053-.653-1.68l2.68-4.905c.235-.431.707-.687 1.207-.707z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gdoc_github" xmlns="http://www.w3.org/2000/svg"><path d="M16 .394c8.833.0 15.999 7.166 15.999 15.999.0 7.062-4.583 13.062-10.937 15.187-.813.146-1.104-.354-1.104-.771.0-.521.021-2.25.021-4.396.0-1.5-.5-2.458-1.083-2.958 3.562-.396 7.312-1.75 7.312-7.896.0-1.75-.625-3.167-1.646-4.291.167-.417.708-2.042-.167-4.25-1.333-.417-4.396 1.646-4.396 1.646a15.032 15.032.0 00-8 0S8.937 6.602 7.603 7.018c-.875 2.208-.333 3.833-.167 4.25-1.021 1.125-1.646 2.542-1.646 4.291.0 6.125 3.729 7.5 7.291 7.896-.458.417-.875 1.125-1.021 2.146-.917.417-3.25 1.125-4.646-1.333-.875-1.521-2.458-1.646-2.458-1.646-1.562-.021-.104.979-.104.979 1.042.479 1.771 2.333 1.771 2.333.938 2.854 5.396 1.896 5.396 1.896.0 1.333.021 2.583.021 2.979.0.417-.292.917-1.104.771C4.582 29.455-.001 23.455-.001 16.393-.001 7.56 7.165.394 15.998.394zM6.063 23.372c.042-.083-.021-.187-.146-.25-.125-.042-.229-.021-.271.042-.042.083.021.187.146.25.104.062.229.042.271-.042zm.646.709c.083-.062.062-.208-.042-.333-.104-.104-.25-.146-.333-.062-.083.062-.062.208.042.333.104.104.25.146.333.062zm.625.937c.104-.083.104-.25.0-.396-.083-.146-.25-.208-.354-.125-.104.062-.104.229.0.375s.271.208.354.146zm.875.875c.083-.083.042-.271-.083-.396-.146-.146-.333-.167-.417-.062-.104.083-.062.271.083.396.146.146.333.167.417.062zm1.187.521c.042-.125-.083-.271-.271-.333-.167-.042-.354.021-.396.146s.083.271.271.312c.167.062.354.0.396-.125zm1.313.104c0-.146-.167-.25-.354-.229-.187.0-.333.104-.333.229.0.146.146.25.354.229.187.0.333-.104.333-.229zm1.208-.208c-.021-.125-.187-.208-.375-.187-.187.042-.312.167-.292.312.021.125.187.208.375.167s.312-.167.292-.292z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_gitlab" xmlns="http://www.w3.org/2000/svg"><path d="M1.629 11.034 14 26.888.442 17.048a1.09 1.09.0 01-.39-1.203l1.578-4.811zm7.217.0h10.309l-5.154 15.854zM5.753 1.475l3.093 9.559H1.63l3.093-9.559a.548.548.0 011.031.0zm20.618 9.559 1.578 4.811c.141.437-.016.922-.39 1.203l-13.558 9.84 12.371-15.854zm0 0h-7.216l3.093-9.559a.548.548.0 011.031.0z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gdoc_heart" xmlns="http://www.w3.org/2000/svg"><path d="M16 29.714a1.11 1.11.0 01-.786-.321L4.072 18.643c-.143-.125-4.071-3.714-4.071-8 0-5.232 3.196-8.357 8.535-8.357 3.125.0 6.053 2.464 7.464 3.857 1.411-1.393 4.339-3.857 7.464-3.857 5.339.0 8.535 3.125 8.535 8.357.0 4.286-3.928 7.875-4.089 8.035L16.785 29.392c-.214.214-.5.321-.786.321z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_home" xmlns="http://www.w3.org/2000/svg"><path d="M24.003 15.695v8.336c0 .608-.504 1.111-1.111 1.111h-6.669v-6.669h-4.446v6.669H5.108a1.119 1.119.0 01-1.111-1.111v-8.336c0-.035.017-.069.017-.104L14 7.359l9.986 8.232a.224.224.0 01.017.104zm3.873-1.198-1.077 1.285a.578.578.0 01-.365.191h-.052a.547.547.0 01-.365-.122L14 5.831 1.983 15.851a.594.594.0 01-.417.122.578.578.0 01-.365-.191L.124 14.497a.57.57.0 01.069-.781L12.679 3.314c.729-.608 1.91-.608 2.64.0l4.237 3.543V3.471c0-.313.243-.556.556-.556h3.334c.313.0.556.243.556.556v7.085l3.803 3.161c.226.191.26.556.069.781z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_info_outline" xmlns="http://www.w3.org/2000/svg"><path d="M12.62 9.793V6.967h2.761v2.826H12.62zM14 25.239q4.601.0 7.92-3.319T25.239 14 21.92 6.08 14 2.761 6.08 6.08 2.761 14t3.319 7.92T14 25.239zM14 0q5.784.0 9.892 4.108T28 14t-4.108 9.892T14 28t-9.892-4.108T0 14t4.108-9.892T14 0zm-1.38 21.033V12.62h2.761v8.413H12.62z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_keyboard_arrow_down" xmlns="http://www.w3.org/2000/svg"><path d="M3.281 5.36 14 16.079 24.719 5.36 28 8.641l-14 14-14-14z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gdoc_keyboard_arrow_left" xmlns="http://www.w3.org/2000/svg"><path d="M25.875 28.25 22.125 32 6.126 16.001 22.125.002l3.75 3.75-12.25 12.25z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gdoc_keyboard_arrow_right" xmlns="http://www.w3.org/2000/svg"><path d="M6.125 28.25 18.375 16 6.125 3.75 9.875.0l15.999 15.999L9.875 31.998z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_keyboard_arrow_up" xmlns="http://www.w3.org/2000/svg"><path d="M24.719 22.64 14 11.921 3.281 22.64.0 19.359l14-14 14 14z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_language" xmlns="http://www.w3.org/2000/svg"><path d="M20.112 16.826h4.732q.394-1.84.394-2.826t-.394-2.826h-4.732q.197 1.38.197 2.826t-.197 2.826zm-2.497 7.756q1.643-.526 3.418-2.005t2.695-2.991h-4.141q-.657 2.629-1.972 4.995zm-.329-7.756q.197-1.38.197-2.826t-.197-2.826h-6.573q-.197 1.38-.197 2.826t.197 2.826h6.573zM14 25.173q1.84-2.695 2.695-5.587h-5.39q.854 2.892 2.695 5.587zM8.413 8.413q.789-2.826 1.972-4.995-1.643.526-3.451 2.005T4.272 8.414h4.141zM4.272 19.587q.854 1.512 2.662 2.991t3.451 2.005q-1.315-2.366-1.972-4.995H4.272zm-1.117-2.761h4.732Q7.69 15.446 7.69 14t.197-2.826H3.155q-.394 1.84-.394 2.826t.394 2.826zM14 2.826q-1.84 2.695-2.695 5.587h5.39Q15.841 5.521 14 2.826zm9.727 5.587q-.92-1.512-2.695-2.991t-3.418-2.005q1.183 2.169 1.972 4.995h4.141zM14 0q5.784.0 9.892 4.108T28 14t-4.108 9.892T14 28t-9.892-4.108T0 14t4.108-9.892T14 0z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gdoc_link" xmlns="http://www.w3.org/2000/svg"><path d="M24.037 7.963q3.305.0 5.634 2.366T32 16t-2.329 5.671-5.634 2.366h-6.46v-3.08h6.46q2.028.0 3.493-1.465t1.465-3.493-1.465-3.493-3.493-1.465h-6.46v-3.08h6.46zM9.615 17.578v-3.155h12.77v3.155H9.615zM3.005 16q0 2.028 1.465 3.493t3.493 1.465h6.46v3.08h-6.46q-3.305.0-5.634-2.366T0 16.001t2.329-5.671 5.634-2.366h6.46v3.08h-6.46q-2.028.0-3.493 1.465t-1.465 3.493z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gdoc_mastodon" xmlns="http://www.w3.org/2000/svg"><path d="M30.924 10.506c0-6.941-4.548-8.976-4.548-8.976C24.083.477 20.144.034 16.054.001h-.101C11.862.034 7.926.477 5.633 1.53c0 0-4.548 2.035-4.548 8.976.0 1.589-.031 3.491.02 5.505.165 6.79 1.245 13.479 7.522 15.14 2.893.765 5.379.927 7.38.816 3.629-.2 5.667-1.296 5.667-1.296l-.12-2.633s-2.593.817-5.505.719c-2.887-.099-5.932-.311-6.399-3.855a7.069 7.069.0 01-.064-.967v-.028.001s2.833.693 6.423.857c2.195.1 4.253-.129 6.344-.377 4.009-.479 7.5-2.949 7.939-5.207.689-3.553.633-8.676.633-8.676zm-5.366 8.945h-3.329v-8.159c0-1.72-.724-2.592-2.171-2.592-1.6.0-2.403 1.035-2.403 3.083v4.465h-3.311v-4.467c0-2.048-.803-3.083-2.403-3.083-1.447.0-2.171.873-2.171 2.592v8.159H6.441v-8.404c0-1.719.437-3.084 1.316-4.093.907-1.011 2.092-1.528 3.565-1.528 1.704.0 2.995.655 3.848 1.965l.828 1.391.829-1.391c.853-1.311 2.144-1.965 3.848-1.965 1.472.0 2.659.517 3.565 1.528.877 1.009 1.315 2.375 1.315 4.093z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gdoc_matrix" xmlns="http://www.w3.org/2000/svg"><path d="M.843.734v30.532H3.04v.733H0V0h3.04v.733zm9.391 9.68v1.543h.044a4.417 4.417.0 011.489-1.365c.577-.327 1.248-.487 2-.487.72.0 1.377.143 1.975.419.597.277 1.047.776 1.36 1.477.339-.499.8-.941 1.379-1.323.579-.383 1.267-.573 2.061-.573.604.0 1.163.075 1.68.223a3.34 3.34.0 011.324.707c.368.327.652.745.861 1.268.203.523.307 1.151.307 1.889v7.637h-3.132v-6.468c0-.381-.013-.745-.043-1.083a2.315 2.315.0 00-.246-.893l.006.013a1.484 1.484.0 00-.577-.593l-.007-.004c-.259-.147-.609-.221-1.047-.221-.443.0-.8.085-1.071.252-.267.166-.483.39-.635.656l-.005.009a2.558 2.558.0 00-.307.915l-.002.013a7.156 7.156.0 00-.08 1.044v6.359h-3.133v-6.4c0-.339-.005-.671-.024-1.003a2.772 2.772.0 00-.197-.936l.007.019a1.41 1.41.0 00-.548-.667l-.006-.003c-.259-.167-.635-.253-1.139-.253-.148.0-.345.032-.585.099-.24.068-.48.191-.707.376-.228.184-.425.449-.585.793-.16.345-.24.8-.24 1.36v6.621H7.279v-11.42zm20.923 20.852V.734H28.96V.001H32V32h-3.04v-.733z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gdoc_menu" xmlns="http://www.w3.org/2000/svg"><path d="M.001 5.334h31.998v3.583H.001V5.334zm0 12.416v-3.5h31.998v3.5H.001zm0 8.916v-3.583h31.998v3.583H.001z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_notification" xmlns="http://www.w3.org/2000/svg"><path d="M22.615 19.384l2.894 2.894v1.413H2.49v-1.413l2.894-2.894V12.25q0-3.365 1.716-5.856t4.745-3.231v-1.01q0-.875.606-1.514T13.999.0t1.548.639.606 1.514v1.01q3.029.74 4.745 3.231t1.716 5.856v7.134zM14 27.999q-1.211.0-2.053-.808t-.841-2.019h5.788q0 1.144-.875 1.986T14 27.999z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_path" xmlns="http://www.w3.org/2000/svg"><path d="M28 12.62h-9.793V8.414h-2.826v11.173h2.826v-4.206H28V26.62h-9.793v-4.206H12.62v-14H9.794v4.206H.001V1.381h9.793v4.206h8.413V1.381H28V12.62z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gdoc_person" xmlns="http://www.w3.org/2000/svg"><path d="M16 20.023q5.052.0 10.526 2.199t5.473 5.754v4.023H0v-4.023q0-3.555 5.473-5.754t10.526-2.199zM16 16q-3.275.0-5.614-2.339T8.047 8.047t2.339-5.661T16 0t5.614 2.386 2.339 5.661-2.339 5.614T16 16z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gdoc_search" xmlns="http://www.w3.org/2000/svg"><path d="M11.925 20.161q3.432.0 5.834-2.402t2.402-5.834-2.402-5.834-5.834-2.402-5.834 2.402-2.402 5.834 2.402 5.834 5.834 2.402zm10.981.0L32 29.255 29.255 32l-9.094-9.094v-1.458l-.515-.515q-3.26 2.831-7.721 2.831-4.976.0-8.45-3.432T.001 11.925t3.474-8.45 8.45-3.474 8.407 3.474 3.432 8.45q0 1.802-.858 4.075t-1.973 3.646l.515.515h1.458z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_shield" xmlns="http://www.w3.org/2000/svg"><path d="M22.167 15.166V3.5h-8.166v20.726c.93-.492 2.424-1.349 3.883-2.497 1.95-1.531 4.284-3.919 4.284-6.562zm3.499-13.999v14c0 7.674-10.737 12.523-11.192 12.724-.146.073-.31.109-.474.109s-.328-.036-.474-.109c-.456-.201-11.192-5.049-11.192-12.724v-14C2.334.529 2.863.0 3.501.0H24.5c.638.0 1.167.529 1.167 1.167z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_star" xmlns="http://www.w3.org/2000/svg"><path d="M14 22.052 5.324 27.31l2.3-9.859L0 10.813l10.056-.854L14 .692l3.944 9.267L28 10.813l-7.624 6.638 2.3 9.859z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_tag" xmlns="http://www.w3.org/2000/svg"><path d="M17.52 17.52v-7.041h-7.041v7.041h7.041zM28 10.479h-7.041v7.041H28v3.439h-7.041V28H17.52v-7.041h-7.041V28H7.04v-7.041H-.001V17.52H7.04v-7.041H-.001V7.04H7.04V-.001h3.439V7.04h7.041V-.001h3.439V7.04H28v3.439z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gdoc_timer" xmlns="http://www.w3.org/2000/svg"><path d="M16 29q4.428.0 7.536-3.143t3.107-7.571-3.107-7.536T16 7.643 8.464 10.75t-3.107 7.536 3.107 7.571T16 29zM26.714 9.786q1.214 1.571 2.107 4.036t.893 4.464q0 5.643-4 9.678T16 32t-9.714-4.036-4-9.678 4-9.678T16 4.572q1.929.0 4.464.929t4.107 2.143l2.143-2.214q1.143.929 2.143 2.143zM14.5 19.857v-9.143h3v9.143h-3zM20.571.001v3.071h-9.143V.001h9.143z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gdoc_xmpp" xmlns="http://www.w3.org/2000/svg"><path d="M31.995 4.237c-.449.175-1.12.433-1.936.745-1.544.591-2.328.891-2.924 1.093-.613.208-1.287.409-2.635.813-.911.272-1.672.495-2.212.651-.031.875.0 2.177-.292 3.635a21.837 21.837.0 01-2.016 5.765c-1.496 2.944-3.236 4.817-3.88 5.476-.056-.059-.112-.117-.168-.179-.707-.763-2.403-2.703-3.815-5.683-1.053-2.223-1.484-4.044-1.605-4.584-.356-1.589-.427-2.955-.427-4.117.0-.075-.036-.129-.101-.149-.721-.223-1.765-.519-2.887-.853-1.271-.379-2.193-.744-3.408-1.2-.493-.185-1.409-.547-2.217-.859C.723 4.499.113 4.236.041 4.236c-.005.0-.015.0-.023.012a.131.131.0 00-.019.076c.009.593.08 1.361.256 2.365.615 3.503 2.688 7.061 4.36 9.244.0.0 3.717 5.035 9.128 8.144l.303.176c-.009.008-.02.015-.028.021-1.717 1.316-3.201 1.977-3.579 2.14a15.71 15.71.0 01-2.219.772v.407a25.31 25.31.0 002.72-.487 26.72 26.72.0 005.075-1.792c.136.067.276.136.42.204 1.527.725 3.571 1.627 6.073 2.048.613.103 1.136.165 1.507.195a.109.109.0 00.115-.091.55.55.0 00.004-.217.107.107.0 00-.063-.073c-.505-.209-1.201-.4-1.983-.719-.935-.381-2.241-1.067-3.648-2.128a13.528 13.528.0 01-.367-.287c4.64-2.656 7.989-6.588 7.989-6.588 1.735-2.036 4.441-5.623 5.431-9.795.349-1.473.539-2.741.5-3.628z"/></svg></defs></svg><div class=wrapper><input type=checkbox class=hidden id=menu-control>
<input type=checkbox class=hidden id=menu-header-control><header class=gdoc-header><div class="container flex align-center justify-between"><label for=menu-control class=gdoc-nav__control tabindex=0><svg class="gdoc-icon gdoc_menu"><title>Open Navigation</title><use xlink:href="#gdoc_menu"/></svg><svg class="gdoc-icon gdoc_arrow_back"><title>Close Navigation</title><use xlink:href="#gdoc_arrow_back"/></svg></label><div><a class="gdoc-brand gdoc-header__link" href=https://note.ljzsdut.com/><span class="flex align-center"><img class=gdoc-brand__img src=/logo.png alt>
<span class=gdoc-brand__title>ljzsdut</span></span></a></div><div class=gdoc-menu-header><span class=gdoc-menu-header__items><span><a href=https://github.com/ljzsdut class=gdoc-header__link><svg class="gdoc-icon gdoc_github"><title>GitHub</title><use xlink:href="#gdoc_github"/></svg></a></span><span id=gdoc-color-theme><svg class="gdoc-icon gdoc_brightness_dark"><title>Toggle Dark/Light/Auto mode</title><use xlink:href="#gdoc_brightness_dark"/></svg><svg class="gdoc-icon gdoc_brightness_light"><title>Toggle Dark/Light/Auto mode</title><use xlink:href="#gdoc_brightness_light"/></svg><svg class="gdoc-icon gdoc_brightness_auto"><title>Toggle Dark/Light/Auto mode</title><use xlink:href="#gdoc_brightness_auto"/></svg></span><span class=gdoc-menu-header__home><a href=https://note.ljzsdut.com/ class=gdoc-header__link><svg class="gdoc-icon gdoc_home"><title>Back to homepage</title><use xlink:href="#gdoc_home"/></svg></a></span><span class=gdoc-menu-header__control><label for=menu-header-control><svg class="gdoc-icon gdoc_keyboard_arrow_right"><use xlink:href="#gdoc_keyboard_arrow_right"/><title>Close Menu Bar</title></svg></label></span></span><label for=menu-header-control class=gdoc-menu-header__control><svg class="gdoc-icon gdoc_keyboard_arrow_left"><use xlink:href="#gdoc_keyboard_arrow_left"/><title>Open Menu Bar</title></svg></label></div></div></header><main class="container flex flex-even"><aside class=gdoc-nav><nav><div class="gdoc-search flex align-center"><svg class="gdoc-icon gdoc_search"><use xlink:href="#gdoc_search"/></svg><input type=text id=gdoc-search-input class=gdoc-search__input placeholder=Search aria-label=Search maxlength=64 data-site-base-url=https://note.ljzsdut.com/ data-site-lang=en><div class="gdoc-search__spinner spinner hidden"></div><ul id=gdoc-search-results class=gdoc-search__list></ul></div><section class=gdoc-nav--main><h2>Navigation</h2><ul class=gdoc-nav__list><li><input type=checkbox class=gdoc-nav__toggle id=navtree-65e396ce checked>
<label for=navtree-65e396ce class="flex justify-between align-center"><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/ class=gdoc-nav__entry>云原生</a></span><svg class="gdoc-icon toggle gdoc_keyboard_arrow_left"><use xlink:href="#gdoc_keyboard_arrow_left"/></svg><svg class="gdoc-icon toggle gdoc_keyboard_arrow_down"><use xlink:href="#gdoc_keyboard_arrow_down"/></svg></label><ul class=gdoc-nav__list><li><input type=checkbox class=gdoc-nav__toggle id=navtree-9bf03378>
<label for=navtree-9bf03378 class="flex justify-between align-center"><span class=flex>Kubernetes</span><svg class="gdoc-icon toggle gdoc_keyboard_arrow_left"><use xlink:href="#gdoc_keyboard_arrow_left"/></svg><svg class="gdoc-icon toggle gdoc_keyboard_arrow_down"><use xlink:href="#gdoc_keyboard_arrow_down"/></svg></label><ul class=gdoc-nav__list><li><input type=checkbox class=gdoc-nav__toggle id=navtree-36a3fcd8>
<label for=navtree-36a3fcd8 class="flex justify-between align-center"><span class=flex>Network</span><svg class="gdoc-icon toggle gdoc_keyboard_arrow_left"><use xlink:href="#gdoc_keyboard_arrow_left"/></svg><svg class="gdoc-icon toggle gdoc_keyboard_arrow_down"><use xlink:href="#gdoc_keyboard_arrow_down"/></svg></label><ul class=gdoc-nav__list><li><input type=checkbox class=gdoc-nav__toggle id=navtree-17115102>
<label for=navtree-17115102 class="flex justify-between align-center"><span class=flex>Calico网络</span><svg class="gdoc-icon toggle gdoc_keyboard_arrow_left"><use xlink:href="#gdoc_keyboard_arrow_left"/></svg><svg class="gdoc-icon toggle gdoc_keyboard_arrow_down"><use xlink:href="#gdoc_keyboard_arrow_down"/></svg></label><ul class=gdoc-nav__list><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/k8s%E7%BD%91%E7%BB%9C/%E8%AE%BF%E9%97%AEPod-Calico%E7%BD%91%E7%BB%9C/001-Calico%E5%8F%82%E8%80%83%E6%9E%B6%E6%9E%84/ class=gdoc-nav__entry>001 Calico参考架构</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex>001 的副本</span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex>001 的副本2</span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex>001 的副本3</span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex>001 的副本4</span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex>001 的副本5</span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex>001 的副本6</span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/k8s%E7%BD%91%E7%BB%9C/%E8%AE%BF%E9%97%AEPod-Calico%E7%BD%91%E7%BB%9C/1-Calico%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1%E5%8E%9F%E7%90%86%E6%8F%AD%E7%A7%98-Pod%E6%B5%81%E9%87%8F%E5%A6%82%E4%BD%95%E8%BF%9B%E5%85%A5%E5%AE%BF%E4%B8%BB%E6%9C%BA%E7%BD%91%E5%8D%A1/ class=gdoc-nav__entry>1 Calico网络通信原理揭秘 Pod流量如何进入宿主机网卡</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/k8s%E7%BD%91%E7%BB%9C/%E8%AE%BF%E9%97%AEPod-Calico%E7%BD%91%E7%BB%9C/2-Calico%E7%BD%91%E7%BB%9C%E5%AE%9E%E7%8E%B0%E7%9A%84%E4%B8%A4%E7%A7%8D%E6%A8%A1%E5%BC%8F/ class=gdoc-nav__entry>2 Calico网络实现的两种模式</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/k8s%E7%BD%91%E7%BB%9C/%E8%AE%BF%E9%97%AEPod-Calico%E7%BD%91%E7%BB%9C/3-Calico-IPIP%E6%A8%A1%E5%BC%8F%E6%B7%B1%E5%85%A5%E5%88%86%E6%9E%90/ class=gdoc-nav__entry>3 Calico IP Ip模式深入分析</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/k8s%E7%BD%91%E7%BB%9C/%E8%AE%BF%E9%97%AEPod-Calico%E7%BD%91%E7%BB%9C/4-calico%E7%BD%91%E7%BB%9C%E6%8F%92%E4%BB%B6%E8%BF%90%E7%BB%B4/ class=gdoc-nav__entry>4 Calico网络插件运维</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/k8s%E7%BD%91%E7%BB%9C/%E8%AE%BF%E9%97%AEPod-Calico%E7%BD%91%E7%BB%9C/calicoctl/ class=gdoc-nav__entry>Calicoctl</a></span></label></li></ul></li><li><input type=checkbox class=gdoc-nav__toggle id=navtree-61b90bf3>
<label for=navtree-61b90bf3 class="flex justify-between align-center"><span class=flex>Cilium网络</span><svg class="gdoc-icon toggle gdoc_keyboard_arrow_left"><use xlink:href="#gdoc_keyboard_arrow_left"/></svg><svg class="gdoc-icon toggle gdoc_keyboard_arrow_down"><use xlink:href="#gdoc_keyboard_arrow_down"/></svg></label><ul class=gdoc-nav__list><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/k8s%E7%BD%91%E7%BB%9C/CNI-Cilium%E6%8F%92%E4%BB%B6/01-Cilium%E9%83%A8%E7%BD%B2/ class=gdoc-nav__entry>01 Cilium部署</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/k8s%E7%BD%91%E7%BB%9C/CNI-Cilium%E6%8F%92%E4%BB%B6/02-HostRouting/ class=gdoc-nav__entry>02 Host Routing</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/k8s%E7%BD%91%E7%BB%9C/CNI-Cilium%E6%8F%92%E4%BB%B6/03-Cilium%E4%B9%8BVXLAN%E5%90%8C%E8%8A%82%E7%82%B9Pod%E9%80%9A%E4%BF%A1/ class=gdoc-nav__entry>03 Cilium之 Vxlan同节点 Pod通信</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/k8s%E7%BD%91%E7%BB%9C/CNI-Cilium%E6%8F%92%E4%BB%B6/04-Cilium%E4%B9%8BVXLAN%E8%B7%A8%E8%8A%82%E7%82%B9Pod%E9%80%9A%E4%BF%A1/ class=gdoc-nav__entry>04 Cilium之 Vxlan跨节点 Pod通信</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/k8s%E7%BD%91%E7%BB%9C/CNI-Cilium%E6%8F%92%E4%BB%B6/05-Cilium%E4%B9%8BNative-Routing/ class=gdoc-nav__entry>05 Cilium之 Native Routing</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/k8s%E7%BD%91%E7%BB%9C/CNI-Cilium%E6%8F%92%E4%BB%B6/06-Cilium%E4%B9%8BHost-Reachable_Service/ class=gdoc-nav__entry>06 Cilium之 Host Reachable Service</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/k8s%E7%BD%91%E7%BB%9C/CNI-Cilium%E6%8F%92%E4%BB%B6/07-Cilium%E4%B9%8BDirect_Server_Return/ class=gdoc-nav__entry>07 Cilium之 Direct Server Return</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/k8s%E7%BD%91%E7%BB%9C/CNI-Cilium%E6%8F%92%E4%BB%B6/08-Cilium%E4%B9%8BClusterMesh/ class=gdoc-nav__entry>08 Cilium之 Cluster Mesh</a></span></label></li></ul></li><li><input type=checkbox class=gdoc-nav__toggle id=navtree-e13ce9f2>
<label for=navtree-e13ce9f2 class="flex justify-between align-center"><span class=flex>CNI</span><svg class="gdoc-icon toggle gdoc_keyboard_arrow_left"><use xlink:href="#gdoc_keyboard_arrow_left"/></svg><svg class="gdoc-icon toggle gdoc_keyboard_arrow_down"><use xlink:href="#gdoc_keyboard_arrow_down"/></svg></label><ul class=gdoc-nav__list><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/k8s%E7%BD%91%E7%BB%9C/Pod%E7%BD%91%E7%BB%9C%E4%B9%8BCNI/01-%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3CNI-%E9%80%9A%E7%94%A8%E8%AE%BE%E8%AE%A1%E8%A7%84%E8%8C%83/ class=gdoc-nav__entry>01 深入理解 Cni 通用设计规范</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/k8s%E7%BD%91%E7%BB%9C/Pod%E7%BD%91%E7%BB%9C%E4%B9%8BCNI/02-k8s%E4%B9%8Bpod%E5%A4%9A%E7%BD%91%E5%8D%A1%E6%96%B9%E6%A1%88multus-cni/ class=gdoc-nav__entry>02 K8s之pod多网卡方案multus Cni</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/k8s%E7%BD%91%E7%BB%9C/Pod%E7%BD%91%E7%BB%9C%E4%B9%8BCNI/03-k8s%E4%B9%8Bovs-cni/ class=gdoc-nav__entry>03 K8s之ovs Cni</a></span></label></li></ul></li><li><input type=checkbox class=gdoc-nav__toggle id=navtree-5d231f60>
<label for=navtree-5d231f60 class="flex justify-between align-center"><span class=flex>Flannel网络</span><svg class="gdoc-icon toggle gdoc_keyboard_arrow_left"><use xlink:href="#gdoc_keyboard_arrow_left"/></svg><svg class="gdoc-icon toggle gdoc_keyboard_arrow_down"><use xlink:href="#gdoc_keyboard_arrow_down"/></svg></label><ul class=gdoc-nav__list><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/k8s%E7%BD%91%E7%BB%9C/%E8%AE%BF%E9%97%AEPod-Flannel%E7%BD%91%E7%BB%9C/flannel%E7%BD%91%E7%BB%9C%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86/ class=gdoc-nav__entry>Flannel网络实现原理</a></span></label></li></ul></li><li><input type=checkbox class=gdoc-nav__toggle id=navtree-0c55d68d>
<label for=navtree-0c55d68d class="flex justify-between align-center"><span class=flex>kube-ovn</span><svg class="gdoc-icon toggle gdoc_keyboard_arrow_left"><use xlink:href="#gdoc_keyboard_arrow_left"/></svg><svg class="gdoc-icon toggle gdoc_keyboard_arrow_down"><use xlink:href="#gdoc_keyboard_arrow_down"/></svg></label><ul class=gdoc-nav__list><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/k8s%E7%BD%91%E7%BB%9C/CNI-kube-ovn%E6%8F%92%E4%BB%B6/%E5%AE%98%E6%96%B9%E6%96%87%E6%A1%A3/ class=gdoc-nav__entry>官方文档</a></span></label></li></ul></li><li><input type=checkbox class=gdoc-nav__toggle id=navtree-9cef11b2>
<label for=navtree-9cef11b2 class="flex justify-between align-center"><span class=flex>如何访问Service</span><svg class="gdoc-icon toggle gdoc_keyboard_arrow_left"><use xlink:href="#gdoc_keyboard_arrow_left"/></svg><svg class="gdoc-icon toggle gdoc_keyboard_arrow_down"><use xlink:href="#gdoc_keyboard_arrow_down"/></svg></label><ul class=gdoc-nav__list><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/k8s%E7%BD%91%E7%BB%9C/%E8%AE%BF%E9%97%AEService/%E8%AE%BF%E9%97%AEiptables_svc%E5%90%84%E6%83%85%E5%BD%A2%E5%88%86%E6%9E%90/ class=gdoc-nav__entry>访问iptables Svc各情形分析</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/k8s%E7%BD%91%E7%BB%9C/%E8%AE%BF%E9%97%AEService/%E8%AE%BF%E9%97%AEservice%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86-iptables%E6%A8%A1%E5%BC%8F/ class=gdoc-nav__entry>访问service实现原理 Iptables模式</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/k8s%E7%BD%91%E7%BB%9C/%E8%AE%BF%E9%97%AEService/%E8%AE%BF%E9%97%AEservice%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86-ipvs%E6%A8%A1%E5%BC%8F/ class=gdoc-nav__entry>访问service实现原理 Ipvs模式</a></span></label></li></ul></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/k8s%E7%BD%91%E7%BB%9C/01-K8s%E6%89%81%E5%B9%B3%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%9E%8B%E6%BC%AB%E8%B0%88/ class=gdoc-nav__entry>01 K8s扁平网络模型漫谈</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/k8s%E7%BD%91%E7%BB%9C/%E6%89%8B%E5%8A%A8%E5%86%85%E6%A0%B8%E5%AE%9E%E7%8E%B0VXLAN/ class=gdoc-nav__entry>手动内核实现 Vxlan</a></span></label></li></ul></li><li><input type=checkbox class=gdoc-nav__toggle id=navtree-baec8738>
<label for=navtree-baec8738 class="flex justify-between align-center"><span class=flex>运维实战</span><svg class="gdoc-icon toggle gdoc_keyboard_arrow_left"><use xlink:href="#gdoc_keyboard_arrow_left"/></svg><svg class="gdoc-icon toggle gdoc_keyboard_arrow_down"><use xlink:href="#gdoc_keyboard_arrow_down"/></svg></label><ul class=gdoc-nav__list><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/%E8%BF%90%E7%BB%B4%E5%AE%9E%E6%88%98/%E9%9B%86%E7%BE%A4node%E7%9A%84load%E8%BF%87%E9%AB%98%E6%8E%92%E6%9F%A5/ class=gdoc-nav__entry>集群node的load过高排查</a></span></label></li></ul></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/0-k8s%E9%83%A8%E7%BD%B2%E4%B9%8B%E6%A6%82%E8%BF%B0%E5%85%A5%E9%97%A8/ class=gdoc-nav__entry>0 K8s部署之概述入门</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/1.0-k8s%E9%83%A8%E7%BD%B2%E4%B9%8BKubernetes%E9%9B%86%E7%BE%A4%E4%B8%ADhttps%E9%80%9A%E4%BF%A1/ class=gdoc-nav__entry>1.0 K8s部署之 Kubernetes集群中https通信</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/1.1-k8s%E9%83%A8%E7%BD%B2%E4%B9%8Bkubeadm%E5%8D%95master/ class=gdoc-nav__entry>1.1 K8s部署之kubeadm单master</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/1.2-k8s%E9%83%A8%E7%BD%B2%E4%B9%8Bkubeadm%E9%AB%98%E5%8F%AF%E7%94%A8/ class=gdoc-nav__entry>1.2 K8s部署之kubeadm高可用</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/1.3-k8s%E9%83%A8%E7%BD%B2%E4%B9%8B%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%AB%98%E5%8F%AF%E7%94%A8/ class=gdoc-nav__entry>1.3 K8s部署之二进制高可用</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/1.4-k8s%E9%83%A8%E7%BD%B2%E4%B9%8BDashboard/ class=gdoc-nav__entry>1.4 K8s部署之 Dashboard</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/1.5-k8s%E9%83%A8%E7%BD%B2%E4%B9%8Bmetric-servercadvisor/ class=gdoc-nav__entry>1.5 K8s部署之metric Server&cadvisor</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/1.6-k8s%E9%83%A8%E7%BD%B2%E4%B9%8B%E9%83%A8%E7%BD%B2heketi+glusterfs%E5%AE%9E%E7%8E%B0%E5%AD%98%E5%82%A8%E7%B1%BB/ class=gdoc-nav__entry>1.6 K8s部署之部署heketi Glusterfs实现存储类</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/1.7-k8s%E9%83%A8%E7%BD%B2%E4%B9%8Brke%E9%9B%86%E7%BE%A4%E9%83%A8%E7%BD%B2+%E7%BB%B4%E6%8A%A4%E6%96%87%E6%A1%A3/ class=gdoc-nav__entry>1.7 K8s部署之rke集群部署 维护文档</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/1.8-k8s%E9%83%A8%E7%BD%B2%E4%B9%8B%E6%9C%AC%E5%9C%B0%E9%9B%86%E7%BE%A4%E4%BD%BF%E7%94%A8OpenELB%E5%AE%9E%E7%8E%B0Load-Balancer/ class=gdoc-nav__entry>1.8 K8s部署之本地集群使用 Open Elb实现 Load Balancer</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/11.1-k8s%E4%B9%8BEFK%E6%97%A5%E5%BF%97%E7%B3%BB%E7%BB%9F/ class=gdoc-nav__entry>11.1 K8s之 Efk日志系统</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/11.2-Fluentd%E7%AE%80%E6%98%8E%E6%95%99%E7%A8%8B/ class=gdoc-nav__entry>11.2 Fluentd简明教程</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/12-cordondrainuncordon/ class=gdoc-nav__entry>12 Cordon&drain&uncordon</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/12-k8s%E7%9A%84CICD/ class=gdoc-nav__entry>12 K8s的 Cicd</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/13-k8s%E4%B9%8BPodPreset/ class=gdoc-nav__entry>13 K8s之 Pod Preset</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/2.1-k8s%E8%B5%84%E6%BA%90%E5%AF%B9%E8%B1%A1%E4%B9%8B%E6%A6%82%E8%BF%B0/ class=gdoc-nav__entry>2.1 K8s资源对象之概述</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/2.2-k8s%E8%B5%84%E6%BA%90%E5%AF%B9%E8%B1%A1%E4%B9%8BPod/ class=gdoc-nav__entry>2.2 K8s资源对象之 Pod</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/2.3-k8s%E6%8E%A7%E5%88%B6%E5%99%A8%E8%B5%84%E6%BA%90%E5%AF%B9%E8%B1%A1%E4%B9%8B%E6%A6%82%E8%BF%B0/ class=gdoc-nav__entry>2.3 K8s控制器资源对象之概述</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/2.4-k8s%E6%8E%A7%E5%88%B6%E5%99%A8%E8%B5%84%E6%BA%90%E5%AF%B9%E8%B1%A1%E4%B9%8BRSDeployment/ class=gdoc-nav__entry>2.4 K8s控制器资源对象之 Rs& Deployment</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/2.5-k8s%E6%8E%A7%E5%88%B6%E5%99%A8%E8%B5%84%E6%BA%90%E5%AF%B9%E8%B1%A1%E4%B9%8BDaemonSet/ class=gdoc-nav__entry>2.5 K8s控制器资源对象之 Daemon Set</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/2.6-k8s%E6%8E%A7%E5%88%B6%E5%99%A8%E8%B5%84%E6%BA%90%E5%AF%B9%E8%B1%A1%E4%B9%8BjobCronjob/ class=gdoc-nav__entry>2.6 K8s控制器资源对象之job& Cronjob</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/2.7-k8s%E6%8E%A7%E5%88%B6%E5%99%A8%E8%B5%84%E6%BA%90%E5%AF%B9%E8%B1%A1%E4%B9%8BStatefulSet/ class=gdoc-nav__entry>2.7 K8s控制器资源对象之 Stateful Set</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/2.8-k8s%E6%8E%A7%E5%88%B6%E5%99%A8%E8%B5%84%E6%BA%90%E5%AF%B9%E8%B1%A1%E4%B9%8BHPA/ class=gdoc-nav__entry>2.8 K8s控制器资源对象之 Hpa</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/21.1-CoreDNS%E5%85%A5%E9%97%A8/ class=gdoc-nav__entry>21.1 Core Dns入门</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/22.1-K8S_Runtime%E4%B9%8BContainerd%E6%95%99%E7%A8%8B/ class=gdoc-nav__entry>22.1 K8 S Runtime之 Containerd教程</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/23.1-kubectl%E7%9A%84%E6%A0%87%E7%AD%BE%E9%80%89%E6%8B%A9%E5%99%A8/ class=gdoc-nav__entry>23.1 Kubectl的标签选择器</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/23.2-kubectl-patch%E5%91%BD%E4%BB%A4/ class=gdoc-nav__entry>23.2 Kubectl Patch命令</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/23.3-kubectl%E8%BF%87%E6%BB%A4%E4%B9%8BJSONPath/ class=gdoc-nav__entry>23.3 Kubectl过滤之 JSON Path</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/23.4-kubectl%E4%B9%8BKustomize/ class=gdoc-nav__entry>23.4 Kubectl之 Kustomize</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/23.5-kubectl-label%E5%91%BD%E4%BB%A4%E4%B9%8B%E8%AE%BE%E7%BD%AEnode%E8%8A%82%E7%82%B9ROLES%E5%B1%9E%E6%80%A7/ class=gdoc-nav__entry>23.5 Kubectl Label命令之设置node节点 Roles属性</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/24-%E4%BD%BF%E7%94%A8Kubevirt%E7%AE%A1%E7%90%86%E8%99%9A%E6%8B%9F%E6%9C%BA/ class=gdoc-nav__entry>24 使用 Kubevirt管理虚拟机</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/3.1-k8s%E6%9C%8D%E5%8A%A1%E5%8F%91%E7%8E%B0%E4%B9%8BService/ class=gdoc-nav__entry>3.1 K8s服务发现之 Service</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/3.2-k8s%E5%A6%82%E4%BD%95%E5%BC%95%E5%85%A5%E5%A4%96%E9%83%A8%E6%9C%8D%E5%8A%A1/ class=gdoc-nav__entry>3.2 K8s如何引入外部服务</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/3.3-K8s%E7%9A%84svc%E4%B8%AD%E7%9A%84external-traffic-policy%E6%98%AF%E4%BB%80%E4%B9%88/ class=gdoc-nav__entry>3.3 K8s的svc中的external Traffic Policy是什么</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/3.4-k8s%E6%9C%8D%E5%8A%A1%E5%8F%91%E7%8E%B0%E4%B9%8BIngress/ class=gdoc-nav__entry>3.4 K8s服务发现之 Ingress</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/4.1-k8s%E5%AD%98%E5%82%A8%E4%B9%8BVolume/ class=gdoc-nav__entry>4.1 K8s存储之 Volume</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/4.2-k8s%E5%AD%98%E5%82%A8%E4%B9%8BPVPVC/ class=gdoc-nav__entry>4.2 K8s存储之 Pv& Pvc</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/4.3-k8s%E5%AD%98%E5%82%A8%E4%B9%8BStorageClass/ class=gdoc-nav__entry>4.3 K8s存储之 Storage Class</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/4.4-k8s%E5%AD%98%E5%82%A8%E4%B9%8B%E6%9C%AC%E5%9C%B0%E6%8C%81%E4%B9%85%E5%8C%96%E5%AD%98%E5%82%A8Local-PV/ class=gdoc-nav__entry>4.4 K8s存储之本地持久化存储 Local Pv</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/5.1-k8s%E9%85%8D%E7%BD%AE%E4%B8%AD%E5%BF%83%E4%B9%8BConfigMap/ class=gdoc-nav__entry>5.1 K8s配置中心之 Config Map</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/5.2-k8s%E9%85%8D%E7%BD%AE%E4%B8%AD%E5%BF%83%E4%B9%8BSecret/ class=gdoc-nav__entry>5.2 K8s配置中心之 Secret</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/6.1-k8s%E8%AE%A4%E8%AF%81%E6%8E%88%E6%9D%83%E5%87%86%E5%85%A5%E6%8E%A7%E5%88%B6/ class=gdoc-nav__entry>6.1 K8s认证&授权&准入控制</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/6.2-ServiceAccount%E5%92%8C%E5%85%B6secrets%E4%BD%9C%E7%94%A8%E5%92%8C%E5%9C%BA%E6%99%AF/ class=gdoc-nav__entry>6.2 Service Account和其secrets作用和场景</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/6.3-bootstrap-tokens%E5%92%8Ctls-bootstrapping/ class=gdoc-nav__entry>6.3 Bootstrap Tokens和tls Bootstrapping</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/7.1-k8s%E7%BD%91%E7%BB%9C%E6%8F%92%E4%BB%B6%E4%B9%8Bflannelcanal/ class=gdoc-nav__entry>7.1 K8s网络插件之flannel&canal</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/7.2-k8s%E7%BD%91%E7%BB%9C%E6%8F%92%E4%BB%B6%E4%B9%8BNetworkPolicy/ class=gdoc-nav__entry>7.2 K8s网络插件之 Network Policy</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/8.1-k8s%E8%B0%83%E5%BA%A6%E7%AD%96%E7%95%A5%E4%B9%8BScheduler/ class=gdoc-nav__entry>8.1 K8s调度策略之 Scheduler</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/9.1-k8s%E8%B5%84%E6%BA%90%E9%99%90%E5%88%B6/ class=gdoc-nav__entry>9.1 K8s资源限制</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/9.2-k8s%E8%B5%84%E6%BA%90%E5%AF%B9%E8%B1%A1LimitRange%E4%B8%8E%E5%90%8D%E7%A7%B0%E7%A9%BA%E9%97%B4%E7%9A%84%E9%85%8D%E9%A2%9DResourceQuota/ class=gdoc-nav__entry>9.2 K8s资源对象 Limit Range与名称空间的配额 Resource Quota</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/etcd-fio%E6%B5%8B%E8%AF%95/ class=gdoc-nav__entry>Etcd Fio测试</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/Linux_CAP%E8%83%BD%E5%8A%9B%E4%B8%8Epod%E5%AE%89%E5%85%A8%E4%B8%8A%E4%B8%8B%E6%96%87/ class=gdoc-nav__entry>Linux Cap能力与pod安全上下文</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/%E5%A6%82%E4%BD%95%E7%94%A8Kubernetes%E8%87%AA%E5%AE%9A%E4%B9%89%E8%B5%84%E6%BA%90CRD/ class=gdoc-nav__entry>如何用 Kubernetes自定义资源 Crd</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/%E6%8E%A8%E8%8D%90%E5%A5%BD%E6%96%87/ class=gdoc-nav__entry>推荐好文</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Kubernetes/22.2-K8S_Runtime%E4%B9%8BCRIOCIcontaineddockershim%E7%9A%84%E7%90%86%E8%A7%A3/ class=gdoc-nav__entry>k8s运行时</a></span></label></li></ul></li><li><input type=checkbox class=gdoc-nav__toggle id=navtree-cfe445a1 checked>
<label for=navtree-cfe445a1 class="flex justify-between align-center"><span class=flex>Prometheus</span><svg class="gdoc-icon toggle gdoc_keyboard_arrow_left"><use xlink:href="#gdoc_keyboard_arrow_left"/></svg><svg class="gdoc-icon toggle gdoc_keyboard_arrow_down"><use xlink:href="#gdoc_keyboard_arrow_down"/></svg></label><ul class=gdoc-nav__list><li><input type=checkbox class=gdoc-nav__toggle id=navtree-9787a108>
<label for=navtree-9787a108 class="flex justify-between align-center"><span class=flex>Prometheus Operator</span><svg class="gdoc-icon toggle gdoc_keyboard_arrow_left"><use xlink:href="#gdoc_keyboard_arrow_left"/></svg><svg class="gdoc-icon toggle gdoc_keyboard_arrow_down"><use xlink:href="#gdoc_keyboard_arrow_down"/></svg></label><ul class=gdoc-nav__list><li><input type=checkbox class=gdoc-nav__toggle id=navtree-2c0d15b3>
<label for=navtree-2c0d15b3 class="flex justify-between align-center"><span class=flex>监控项配置</span><svg class="gdoc-icon toggle gdoc_keyboard_arrow_left"><use xlink:href="#gdoc_keyboard_arrow_left"/></svg><svg class="gdoc-icon toggle gdoc_keyboard_arrow_down"><use xlink:href="#gdoc_keyboard_arrow_down"/></svg></label><ul class=gdoc-nav__list><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Prometheus/Prometheus-operator/%E7%9B%91%E6%8E%A7%E9%A1%B9%E9%85%8D%E7%BD%AE/blackbox-exporter/blackbox-exporter%E7%9B%91%E6%8E%A7%E6%96%87%E6%A1%A3/ class=gdoc-nav__entry>Blackbox Exporter监控文档</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Prometheus/Prometheus-operator/%E7%9B%91%E6%8E%A7%E9%A1%B9%E9%85%8D%E7%BD%AE/etcd-monitor-rancher/etcd%E7%9B%91%E6%8E%A7/ class=gdoc-nav__entry>Etcd监控</a></span></label></li></ul></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Prometheus/Prometheus-operator/00-Prometheus-operater-%E7%9B%91%E6%8E%A7%E4%BD%93%E7%B3%BB%E5%8E%9F%E7%90%86%E6%A2%B3%E7%90%86%E6%96%87%E6%A1%A3/ class=gdoc-nav__entry>00 Prometheus Operater 监控体系原理梳理文档</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Prometheus/Prometheus-operator/01-alert-rules%E6%95%B4%E7%90%86/ class=gdoc-nav__entry>01 Alert Rules整理</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Prometheus/Prometheus-operator/02-dingtalk-webhook%E9%83%A8%E7%BD%B2/ class=gdoc-nav__entry>02 Dingtalk Webhook部署</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Prometheus/Prometheus-operator/03-golang%E5%BC%80%E5%8F%91%E9%92%89%E9%92%89web-server%E4%BA%86%E8%A7%A3%E9%92%89%E9%92%89%E9%80%9A%E7%9F%A5%E7%9A%84%E5%8E%9F%E7%90%86/ class=gdoc-nav__entry>03 Golang开发钉钉web Server(了解钉钉通知的原理)</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Prometheus/Prometheus-operator/04-Prometheus-Operator-%E7%9B%91%E6%8E%A7%E5%A4%96%E7%BD%AEETCD%E9%9B%86%E7%BE%A4/ class=gdoc-nav__entry>04 Prometheus Operator 监控外置 Etcd集群</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Prometheus/Prometheus-operator/%E5%8F%82%E8%80%83%E6%96%87%E6%A1%A3/ class=gdoc-nav__entry>参考文档</a></span></label></li></ul></li><li><input type=checkbox class=gdoc-nav__toggle id=navtree-198df06b>
<label for=navtree-198df06b class="flex justify-between align-center"><span class=flex>Telegraf</span><svg class="gdoc-icon toggle gdoc_keyboard_arrow_left"><use xlink:href="#gdoc_keyboard_arrow_left"/></svg><svg class="gdoc-icon toggle gdoc_keyboard_arrow_down"><use xlink:href="#gdoc_keyboard_arrow_down"/></svg></label><ul class=gdoc-nav__list><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Prometheus/Telegraf/01-Telegraf%E5%AF%B9%E6%AF%94Exporter%E7%9A%84%E4%BC%98%E5%8A%BF/ class=gdoc-nav__entry>01 Telegraf对比 Exporter的优势</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Prometheus/Telegraf/02-telegraf%E5%AE%89%E8%A3%85%E4%B8%8E%E5%85%A5%E9%97%A8/ class=gdoc-nav__entry>02 Telegraf安装与入门</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Prometheus/Telegraf/03-CPUMEMDISKIO%E7%9B%B8%E5%85%B3%E6%8C%87%E6%A0%87%E9%87%87%E9%9B%86/ class=gdoc-nav__entry>03 Cpu、 Mem、 Disk、 Io相关指标采集</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Prometheus/Telegraf/04-kernelsystemprocesses%E7%9B%B8%E5%85%B3%E6%8C%87%E6%A0%87%E9%87%87%E9%9B%86/ class=gdoc-nav__entry>04 Kernel、system、processes相关指标采集</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Prometheus/Telegraf/05-%E6%9C%AC%E5%9C%B0%E7%AB%AF%E5%8F%A3%E7%9B%91%E6%8E%A7%E8%BF%9C%E7%A8%8BTCP%E6%8E%A2%E6%B5%8B/ class=gdoc-nav__entry>05 本地端口监控&远程 Tcp探测</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Prometheus/Telegraf/06-PING%E7%9B%91%E6%8E%A7%E8%BF%9B%E7%A8%8B%E7%9B%91%E6%8E%A7/ class=gdoc-nav__entry>06 Ping监控、进程监控</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Prometheus/Telegraf/07-Telegraf%E6%8F%92%E4%BB%B6%E8%AE%BE%E8%AE%A1/ class=gdoc-nav__entry>07 Telegraf插件设计</a></span></label></li></ul></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Prometheus/001-Prometheus%E5%85%A5%E9%97%A8%E6%A6%82%E8%BF%B0/ class=gdoc-nav__entry>001 Prometheus入门概述</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Prometheus/002-Prometheus2.5-Grafana5.4%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%83%A8%E7%BD%B2/ class=gdoc-nav__entry>002 Prometheus2.5 Grafana5.4二进制部署</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Prometheus/003-Prometheus%E7%9A%84%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B/ class=gdoc-nav__entry>003 Prometheus的数据模型</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Prometheus/004-PromQL%E8%AF%A6%E8%A7%A3/ class=gdoc-nav__entry>004 Prom Ql详解</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Prometheus/005-prometheus%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%A6%E8%A7%A3/ class=gdoc-nav__entry>005 Prometheus配置文件详解</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Prometheus/006-altermanager%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%A6%E8%A7%A3/ class="gdoc-nav__entry is-active">006 Altermanager配置文件详解</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Prometheus/007-Prometheus%E7%9A%84%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/ class=gdoc-nav__entry>007 Prometheus的数据存储</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Prometheus/008-Prometheus%E9%9B%86%E7%BE%A4/ class=gdoc-nav__entry>008 Prometheus集群</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Prometheus/009-grafana/ class=gdoc-nav__entry>009 Grafana</a></span></label></li></ul></li><li><input type=checkbox class=gdoc-nav__toggle id=navtree-c8574360>
<label for=navtree-c8574360 class="flex justify-between align-center"><span class=flex>Helm</span><svg class="gdoc-icon toggle gdoc_keyboard_arrow_left"><use xlink:href="#gdoc_keyboard_arrow_left"/></svg><svg class="gdoc-icon toggle gdoc_keyboard_arrow_down"><use xlink:href="#gdoc_keyboard_arrow_down"/></svg></label><ul class=gdoc-nav__list><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/helm/00-Helm2%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8/ class=gdoc-nav__entry>00 Helm2基础使用</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/helm/00-Helm3%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8/ class=gdoc-nav__entry>00 Helm3基础使用</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/helm/01-%E8%87%AA%E5%AE%9A%E4%B9%89chart%E5%85%A5%E9%97%A8/ class=gdoc-nav__entry>01 自定义chart入门</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/helm/02-helm%E6%A8%A1%E6%9D%BF%E4%B9%8B%E5%86%85%E7%BD%AE%E5%AF%B9%E8%B1%A1%E5%92%8CValue%E5%AF%B9%E8%B1%A1/ class=gdoc-nav__entry>02 Helm模板之内置对象和 Value对象</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/helm/03-helm%E6%A8%A1%E6%9D%BF%E4%B9%8B%E5%87%BD%E6%95%B0%E5%92%8C%E7%AE%A1%E9%81%93/ class=gdoc-nav__entry>03 Helm模板之函数和管道</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/helm/04-helm%E6%A8%A1%E6%9D%BF%E4%B9%8B%E6%8E%A7%E5%88%B6%E6%B5%81%E7%A8%8B%E5%92%8C%E5%8F%98%E9%87%8F/ class=gdoc-nav__entry>04 Helm模板之控制流程和变量</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/helm/05-helm%E6%A8%A1%E6%9D%BF%E4%B9%8B%E5%91%BD%E5%90%8D%E6%A8%A1%E6%9D%BF/ class=gdoc-nav__entry>05 Helm模板之命名模板</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/helm/06-helm%E6%A8%A1%E6%9D%BF%E4%B9%8B%E5%85%B6%E4%BB%96%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9/ class=gdoc-nav__entry>06 Helm模板之其他注意事项</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/helm/07-helm%E4%B9%8Bhooks/ class=gdoc-nav__entry>07 Helm之hooks</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/helm/08-%E5%A6%82%E4%BD%95%E5%9C%A8HelmChart%E4%B8%AD%E5%85%BC%E5%AE%B9%E4%B8%8D%E5%90%8CKubernetes%E7%89%88%E6%9C%AC/ class=gdoc-nav__entry>08 如何在 Helm Chart中兼容不同 Kubernetes版本</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/helm/09-Helm-Charts-%E5%BC%80%E5%8F%91%E5%AE%8C%E6%95%B4%E7%A4%BA%E4%BE%8B/ class=gdoc-nav__entry>09 Helm Charts 开发完整示例</a></span></label></li></ul></li><li><input type=checkbox class=gdoc-nav__toggle id=navtree-19fb5513>
<label for=navtree-19fb5513 class="flex justify-between align-center"><span class=flex>Istio</span><svg class="gdoc-icon toggle gdoc_keyboard_arrow_left"><use xlink:href="#gdoc_keyboard_arrow_left"/></svg><svg class="gdoc-icon toggle gdoc_keyboard_arrow_down"><use xlink:href="#gdoc_keyboard_arrow_down"/></svg></label><ul class=gdoc-nav__list><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Istio/00-istio%E5%85%A5%E9%97%A8/ class=gdoc-nav__entry>00 Istio入门</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Istio/00-%E6%9D%82%E8%AE%B0/ class=gdoc-nav__entry>00 杂记</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Istio/01-istio-CRD/ class=gdoc-nav__entry>01 Istio Crd</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Istio/02-virtualService/ class=gdoc-nav__entry>02 Virtual Service</a></span></label></li></ul></li><li><input type=checkbox class=gdoc-nav__toggle id=navtree-04b2caf9>
<label for=navtree-04b2caf9 class="flex justify-between align-center"><span class=flex>Envoy</span><svg class="gdoc-icon toggle gdoc_keyboard_arrow_left"><use xlink:href="#gdoc_keyboard_arrow_left"/></svg><svg class="gdoc-icon toggle gdoc_keyboard_arrow_down"><use xlink:href="#gdoc_keyboard_arrow_down"/></svg></label><ul class=gdoc-nav__list><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Envoy/01-Envoy%E5%9F%BA%E7%A1%80-%E7%90%86%E8%AE%BA/ class=gdoc-nav__entry>01 Envoy基础 理论</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Envoy/02-%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/ class=gdoc-nav__entry>02 使用入门</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Envoy/03-%E7%AE%A1%E7%90%86%E6%8E%A5%E5%8F%A3/ class=gdoc-nav__entry>03 管理接口</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Envoy/04-front-proxy-and-tls/ class=gdoc-nav__entry>04 Front Proxy and Tls</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Envoy/05-xDS-API%E7%90%86%E8%AE%BA%E5%9F%BA%E7%A1%80/ class=gdoc-nav__entry>05 X Ds Api理论基础</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Envoy/06-xDS%E4%B9%8B%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E8%AE%A2%E9%98%85/ class=gdoc-nav__entry>06 X Ds之文件系统订阅</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Envoy/07-xDS%E4%B9%8B%E5%9F%BA%E4%BA%8EREST%E7%AE%A1%E7%90%86%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%AE%A2%E9%98%85/ class=gdoc-nav__entry>07 X Ds之基于 Rest管理服务器订阅</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Envoy/08-xDS%E4%B9%8B%E5%9F%BA%E4%BA%8Egrpc%E7%AE%A1%E7%90%86%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%AE%A2%E9%98%85/ class=gdoc-nav__entry>08 X Ds之基于grpc管理服务器订阅</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Envoy/09-ADS/ class=gdoc-nav__entry>09 Ads</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Envoy/10-cluster%E7%AE%A1%E7%90%86/ class=gdoc-nav__entry>10 Cluster管理</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Envoy/11-HTTP%E6%B5%81%E9%87%8F%E7%AE%A1%E7%90%86/ class=gdoc-nav__entry>11 Http流量管理</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex>12 可观测性应用</span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Envoy/13-Envoy%E6%9C%8D%E5%8A%A1%E7%BD%91%E6%A0%BC%E5%AE%89%E5%85%A8/ class=gdoc-nav__entry>13 Envoy服务网格安全</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Envoy/others/ class=gdoc-nav__entry>Others</a></span></label></li></ul></li><li><input type=checkbox class=gdoc-nav__toggle id=navtree-3cf8fb7f>
<label for=navtree-3cf8fb7f class="flex justify-between align-center"><span class=flex>Traefik</span><svg class="gdoc-icon toggle gdoc_keyboard_arrow_left"><use xlink:href="#gdoc_keyboard_arrow_left"/></svg><svg class="gdoc-icon toggle gdoc_keyboard_arrow_down"><use xlink:href="#gdoc_keyboard_arrow_down"/></svg></label><ul class=gdoc-nav__list><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Traefik/1-KubernetesCRD-provider%E4%BD%BF%E7%94%A8/ class=gdoc-nav__entry>1 Kubernetes Crd Provider使用</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Traefik/2-traefik%E4%BD%BF%E7%94%A8%E6%96%B9%E5%BC%8F/ class=gdoc-nav__entry>2 Traefik使用方式</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Traefik/3-Cert-manager%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%8A%A8%E8%AF%81%E4%B9%A6%E7%94%B3%E8%AF%B7/ class=gdoc-nav__entry>3 Cert Manager实现自动证书申请</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Traefik/0-traefik%E5%9F%BA%E7%A1%80%E5%9F%BA%E4%BA%8Efile-provider/ class=gdoc-nav__entry>0-traefik基础(基于file-provider)</a></span></label></li></ul></li><li><input type=checkbox class=gdoc-nav__toggle id=navtree-a441bac2>
<label for=navtree-a441bac2 class="flex justify-between align-center"><span class=flex>Harbor</span><svg class="gdoc-icon toggle gdoc_keyboard_arrow_left"><use xlink:href="#gdoc_keyboard_arrow_left"/></svg><svg class="gdoc-icon toggle gdoc_keyboard_arrow_down"><use xlink:href="#gdoc_keyboard_arrow_down"/></svg></label><ul class=gdoc-nav__list><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Harbor/harbor%E9%95%9C%E5%83%8F%E4%BB%93%E5%BA%93%E9%83%A8%E7%BD%B2/ class=gdoc-nav__entry>Harbor镜像仓库部署</a></span></label></li></ul></li><li><input type=checkbox class=gdoc-nav__toggle id=navtree-867f5e4c>
<label for=navtree-867f5e4c class="flex justify-between align-center"><span class=flex>Docker</span><svg class="gdoc-icon toggle gdoc_keyboard_arrow_left"><use xlink:href="#gdoc_keyboard_arrow_left"/></svg><svg class="gdoc-icon toggle gdoc_keyboard_arrow_down"><use xlink:href="#gdoc_keyboard_arrow_down"/></svg></label><ul class=gdoc-nav__list><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Docker/docker_registry%E9%95%9C%E5%83%8F%E5%AD%98%E5%82%A8%E6%A0%BC%E5%BC%8F/ class=gdoc-nav__entry>Docker Registry镜像存储格式</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Docker/docker%E5%85%A5%E9%97%A8/ class=gdoc-nav__entry>Docker入门</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Docker/%E4%B8%80%E6%96%87%E5%B8%A6%E4%BD%A0%E5%BD%BB%E5%BA%95%E6%90%9E%E6%87%82Docker%E4%B8%AD%E7%9A%84cgroup%E7%9A%84%E5%85%B7%E4%BD%93%E4%BD%BF%E7%94%A8/ class=gdoc-nav__entry>一文带你彻底搞懂 Docker中的cgroup的具体使用</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Docker/%E5%8F%8C%E6%9E%B6%E6%9E%84%E9%95%9C%E5%83%8F%E6%9E%84%E5%BB%BA%E6%96%B9%E6%B3%95/ class=gdoc-nav__entry>双架构镜像构建方法</a></span></label></li></ul></li></ul></li><li><input type=checkbox class=gdoc-nav__toggle id=navtree-f25abbce>
<label for=navtree-f25abbce class="flex justify-between align-center"><span class=flex>虚拟化</span><svg class="gdoc-icon toggle gdoc_keyboard_arrow_left"><use xlink:href="#gdoc_keyboard_arrow_left"/></svg><svg class="gdoc-icon toggle gdoc_keyboard_arrow_down"><use xlink:href="#gdoc_keyboard_arrow_down"/></svg></label><ul class=gdoc-nav__list><li><input type=checkbox class=gdoc-nav__toggle id=navtree-de295e00>
<label for=navtree-de295e00 class="flex justify-between align-center"><span class=flex>Openstack</span><svg class="gdoc-icon toggle gdoc_keyboard_arrow_left"><use xlink:href="#gdoc_keyboard_arrow_left"/></svg><svg class="gdoc-icon toggle gdoc_keyboard_arrow_down"><use xlink:href="#gdoc_keyboard_arrow_down"/></svg></label><ul class=gdoc-nav__list><li><input type=checkbox class=gdoc-nav__toggle id=navtree-b9471b50>
<label for=navtree-b9471b50 class="flex justify-between align-center"><span class=flex>01 Openstack部署</span><svg class="gdoc-icon toggle gdoc_keyboard_arrow_left"><use xlink:href="#gdoc_keyboard_arrow_left"/></svg><svg class="gdoc-icon toggle gdoc_keyboard_arrow_down"><use xlink:href="#gdoc_keyboard_arrow_down"/></svg></label><ul class=gdoc-nav__list><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E8%99%9A%E6%8B%9F%E5%8C%96/Openstack/01-openstack%E9%83%A8%E7%BD%B2/00-packstack%E9%83%A8%E7%BD%B2OpenStack/ class=gdoc-nav__entry>00 Packstack部署 Open Stack</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E8%99%9A%E6%8B%9F%E5%8C%96/Openstack/01-openstack%E9%83%A8%E7%BD%B2/01-openstack%E5%85%A5%E9%97%A8-horizon%E4%BD%BF%E7%94%A8/ class=gdoc-nav__entry>01 Openstack入门 Horizon使用</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E8%99%9A%E6%8B%9F%E5%8C%96/Openstack/01-openstack%E9%83%A8%E7%BD%B2/02-devstack%E9%83%A8%E7%BD%B2/ class=gdoc-nav__entry>02 Devstack部署</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E8%99%9A%E6%8B%9F%E5%8C%96/Openstack/01-openstack%E9%83%A8%E7%BD%B2/03-OpenStack-rocky%E6%89%8B%E5%8A%A8%E9%83%A8%E7%BD%B2/ class=gdoc-nav__entry>03 Open Stack Rocky手动部署</a></span></label></li></ul></li><li><input type=checkbox class=gdoc-nav__toggle id=navtree-9e66f28a>
<label for=navtree-9e66f28a class="flex justify-between align-center"><span class=flex>02 网络</span><svg class="gdoc-icon toggle gdoc_keyboard_arrow_left"><use xlink:href="#gdoc_keyboard_arrow_left"/></svg><svg class="gdoc-icon toggle gdoc_keyboard_arrow_down"><use xlink:href="#gdoc_keyboard_arrow_down"/></svg></label><ul class=gdoc-nav__list><li><input type=checkbox class=gdoc-nav__toggle id=navtree-c927a799>
<label for=navtree-c927a799 class="flex justify-between align-center"><span class=flex>Dvr分析 抓包分析</span><svg class="gdoc-icon toggle gdoc_keyboard_arrow_left"><use xlink:href="#gdoc_keyboard_arrow_left"/></svg><svg class="gdoc-icon toggle gdoc_keyboard_arrow_down"><use xlink:href="#gdoc_keyboard_arrow_down"/></svg></label><ul class=gdoc-nav__list><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E8%99%9A%E6%8B%9F%E5%8C%96/Openstack/02-%E7%BD%91%E7%BB%9C/dvr%E5%88%86%E6%9E%90-%E6%8A%93%E5%8C%85%E5%88%86%E6%9E%90/01-floatingIP%E4%B8%8E%E5%A4%96%E7%BD%91%E4%BA%92%E8%AE%BF%E6%8A%93%E5%8C%85%E5%88%86%E6%9E%90/ class=gdoc-nav__entry>01 Floating Ip与外网互访抓包分析</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E8%99%9A%E6%8B%9F%E5%8C%96/Openstack/02-%E7%BD%91%E7%BB%9C/dvr%E5%88%86%E6%9E%90-%E6%8A%93%E5%8C%85%E5%88%86%E6%9E%90/02-%E6%97%A0floatingIP%E8%AE%BF%E9%97%AE%E5%A4%96%E7%BD%91vm%E8%AE%BF%E9%97%AEservice-data%E7%BD%91%E6%8A%93%E5%8C%85%E5%88%86%E6%9E%90/ class=gdoc-nav__entry>02 无floating Ip访问外网(vm访问service Data网)抓包分析</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E8%99%9A%E6%8B%9F%E5%8C%96/Openstack/02-%E7%BD%91%E7%BB%9C/dvr%E5%88%86%E6%9E%90-%E6%8A%93%E5%8C%85%E5%88%86%E6%9E%90/03-%E5%90%8C%E8%8A%82%E7%82%B9%E4%B8%9C%E8%A5%BF%E5%90%91%E8%B7%A8%E5%AD%90%E7%BD%91/ class=gdoc-nav__entry>03 同节点东西向跨子网</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E8%99%9A%E6%8B%9F%E5%8C%96/Openstack/02-%E7%BD%91%E7%BB%9C/dvr%E5%88%86%E6%9E%90-%E6%8A%93%E5%8C%85%E5%88%86%E6%9E%90/04-%E4%B8%8D%E5%90%8C%E8%8A%82%E7%82%B9%E4%B8%9C%E8%A5%BF%E5%90%91%E8%B7%A8%E5%AD%90%E7%BD%91/ class=gdoc-nav__entry>04 不同节点东西向跨子网</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E8%99%9A%E6%8B%9F%E5%8C%96/Openstack/02-%E7%BD%91%E7%BB%9C/dvr%E5%88%86%E6%9E%90-%E6%8A%93%E5%8C%85%E5%88%86%E6%9E%90/05-%E5%90%8C%E5%AD%90%E7%BD%91%E4%B8%9C%E8%A5%BF%E5%90%91/ class=gdoc-nav__entry>05 同子网东西向</a></span></label></li></ul></li></ul></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E8%99%9A%E6%8B%9F%E5%8C%96/Openstack/cinder/ class=gdoc-nav__entry>Cinder</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E8%99%9A%E6%8B%9F%E5%8C%96/Openstack/dhcp/ class=gdoc-nav__entry>DHCP</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E8%99%9A%E6%8B%9F%E5%8C%96/Openstack/nova/ class=gdoc-nav__entry>Nova</a></span></label></li></ul></li><li><input type=checkbox class=gdoc-nav__toggle id=navtree-83a031e4>
<label for=navtree-83a031e4 class="flex justify-between align-center"><span class=flex>Pve虚拟化</span><svg class="gdoc-icon toggle gdoc_keyboard_arrow_left"><use xlink:href="#gdoc_keyboard_arrow_left"/></svg><svg class="gdoc-icon toggle gdoc_keyboard_arrow_down"><use xlink:href="#gdoc_keyboard_arrow_down"/></svg></label><ul class=gdoc-nav__list><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E8%99%9A%E6%8B%9F%E5%8C%96/PVE%E8%99%9A%E6%8B%9F%E5%8C%96/01-pve%E5%8D%95%E6%9C%BA%E9%83%A8%E7%BD%B2/ class=gdoc-nav__entry>01 Pve单机部署</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E8%99%9A%E6%8B%9F%E5%8C%96/PVE%E8%99%9A%E6%8B%9F%E5%8C%96/02-%E5%88%9B%E5%BB%BA%E9%9B%86%E7%BE%A4/ class=gdoc-nav__entry>02 创建集群</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E8%99%9A%E6%8B%9F%E5%8C%96/PVE%E8%99%9A%E6%8B%9F%E5%8C%96/03-%E5%AE%89%E8%A3%85ceph%E9%9B%86%E7%BE%A4/ class=gdoc-nav__entry>03 安装ceph集群</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E8%99%9A%E6%8B%9F%E5%8C%96/PVE%E8%99%9A%E6%8B%9F%E5%8C%96/04-Promox%E7%9A%84HA%E9%85%8D%E7%BD%AE/ class=gdoc-nav__entry>04 Promox的 Ha配置</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E8%99%9A%E6%8B%9F%E5%8C%96/PVE%E8%99%9A%E6%8B%9F%E5%8C%96/05-%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AE%A1%E7%90%86/ class=gdoc-nav__entry>05 虚拟机管理</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E8%99%9A%E6%8B%9F%E5%8C%96/PVE%E8%99%9A%E6%8B%9F%E5%8C%96/06-%E7%94%A8%E6%88%B7%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86/ class=gdoc-nav__entry>06 用户权限管理</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E8%99%9A%E6%8B%9F%E5%8C%96/PVE%E8%99%9A%E6%8B%9F%E5%8C%96/07-%E9%9B%86%E7%BE%A4%E7%AE%A1%E7%90%86/ class=gdoc-nav__entry>07 集群管理</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E8%99%9A%E6%8B%9F%E5%8C%96/PVE%E8%99%9A%E6%8B%9F%E5%8C%96/08-pve%E6%8A%80%E5%B7%A7/ class=gdoc-nav__entry>08 Pve技巧</a></span></label></li></ul></li></ul></li><li><input type=checkbox class=gdoc-nav__toggle id=navtree-d61f1d8f>
<label for=navtree-d61f1d8f class="flex justify-between align-center"><span class=flex>前端系列</span><svg class="gdoc-icon toggle gdoc_keyboard_arrow_left"><use xlink:href="#gdoc_keyboard_arrow_left"/></svg><svg class="gdoc-icon toggle gdoc_keyboard_arrow_down"><use xlink:href="#gdoc_keyboard_arrow_down"/></svg></label><ul class=gdoc-nav__list><li><input type=checkbox class=gdoc-nav__toggle id=navtree-0b14b256>
<label for=navtree-0b14b256 class="flex justify-between align-center"><span class=flex>HTML</span><svg class="gdoc-icon toggle gdoc_keyboard_arrow_left"><use xlink:href="#gdoc_keyboard_arrow_left"/></svg><svg class="gdoc-icon toggle gdoc_keyboard_arrow_down"><use xlink:href="#gdoc_keyboard_arrow_down"/></svg></label><ul class=gdoc-nav__list><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%89%8D%E7%AB%AF/%E5%90%8E%E7%9B%BE%E4%BA%BAHTML/1-%E9%A1%B5%E9%9D%A2%E7%BB%93%E6%9E%84/ class=gdoc-nav__entry>1 页面结构</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%89%8D%E7%AB%AF/%E5%90%8E%E7%9B%BE%E4%BA%BAHTML/2-%E6%96%87%E6%9C%AC%E7%9B%B8%E5%85%B3/ class=gdoc-nav__entry>2 文本相关</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%89%8D%E7%AB%AF/%E5%90%8E%E7%9B%BE%E4%BA%BAHTML/3-%E9%93%BE%E6%8E%A5%E4%B8%8E%E5%9B%BE%E7%89%87/ class=gdoc-nav__entry>3 链接与图片</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%89%8D%E7%AB%AF/%E5%90%8E%E7%9B%BE%E4%BA%BAHTML/4-%E8%A1%A8%E5%8D%95%E4%B8%8E%E5%88%97%E8%A1%A8/ class=gdoc-nav__entry>4 表单与列表</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%89%8D%E7%AB%AF/%E5%90%8E%E7%9B%BE%E4%BA%BAHTML/5-%E8%A1%A8%E6%A0%BC%E4%B8%8E%E5%A4%9A%E5%AA%92%E4%BD%93/ class=gdoc-nav__entry>5 表格与多媒体</a></span></label></li></ul></li><li><input type=checkbox class=gdoc-nav__toggle id=navtree-c232c304>
<label for=navtree-c232c304 class="flex justify-between align-center"><span class=flex><a href=/%E5%89%8D%E7%AB%AF/%E5%90%8E%E7%9B%BE%E4%BA%BACSS/ class=gdoc-nav__entry>CSS</a></span><svg class="gdoc-icon toggle gdoc_keyboard_arrow_left"><use xlink:href="#gdoc_keyboard_arrow_left"/></svg><svg class="gdoc-icon toggle gdoc_keyboard_arrow_down"><use xlink:href="#gdoc_keyboard_arrow_down"/></svg></label><ul class=gdoc-nav__list><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%89%8D%E7%AB%AF/%E5%90%8E%E7%9B%BE%E4%BA%BACSS/1-CSS3%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/ class=gdoc-nav__entry>1 Css3基础知识</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%89%8D%E7%AB%AF/%E5%90%8E%E7%9B%BE%E4%BA%BACSS/2-CSS3%E9%80%89%E6%8B%A9%E5%99%A8/ class=gdoc-nav__entry>2 Css3选择器</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%89%8D%E7%AB%AF/%E5%90%8E%E7%9B%BE%E4%BA%BACSS/3-CSS3%E5%85%83%E7%B4%A0%E6%9D%83%E9%87%8D/ class=gdoc-nav__entry>3 Css3元素权重</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%89%8D%E7%AB%AF/%E5%90%8E%E7%9B%BE%E4%BA%BACSS/4-CSS3%E6%96%87%E6%9C%AC%E6%8E%A7%E5%88%B6/ class=gdoc-nav__entry>4 Css3文本控制</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%89%8D%E7%AB%AF/%E5%90%8E%E7%9B%BE%E4%BA%BACSS/5-CSS3%E7%9B%92%E5%AD%90%E6%A8%A1%E5%9E%8B%E5%85%A8%E9%9D%A2%E6%8E%8C%E6%8F%A1/ class=gdoc-nav__entry>5 Css3盒子模型全面掌握</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%89%8D%E7%AB%AF/%E5%90%8E%E7%9B%BE%E4%BA%BACSS/6-CSS3%E8%83%8C%E6%99%AF%E4%B8%8E%E6%B8%90%E5%8F%98/ class=gdoc-nav__entry>6 Css3背景与渐变</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%89%8D%E7%AB%AF/%E5%90%8E%E7%9B%BE%E4%BA%BACSS/7-CSS3%E6%93%8D%E4%BD%9C%E6%95%B0%E6%8D%AE%E5%86%85%E5%AE%B9%E6%A0%B7%E5%BC%8F/ class=gdoc-nav__entry>7 Css3操作数据内容样式</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%89%8D%E7%AB%AF/%E5%90%8E%E7%9B%BE%E4%BA%BACSS/8-CSS3%E6%B5%AE%E5%8A%A8%E5%B8%83%E5%B1%80/ class=gdoc-nav__entry>8 Css3浮动布局</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%89%8D%E7%AB%AF/%E5%90%8E%E7%9B%BE%E4%BA%BACSS/9-CSS3%E5%AE%9A%E4%BD%8D%E5%B8%83%E5%B1%80/ class=gdoc-nav__entry>9 Css3定位布局</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%89%8D%E7%AB%AF/%E5%90%8E%E7%9B%BE%E4%BA%BACSS/10-CSS3%E5%BC%B9%E6%80%A7%E5%B8%83%E5%B1%80/ class=gdoc-nav__entry>10 Css3弹性布局</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%89%8D%E7%AB%AF/%E5%90%8E%E7%9B%BE%E4%BA%BACSS/11-CSS%E6%A0%85%E6%A0%BC%E7%B3%BB%E7%BB%9F/ class=gdoc-nav__entry>11 Css栅格系统</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%89%8D%E7%AB%AF/%E5%90%8E%E7%9B%BE%E4%BA%BACSS/12-CSS3%E5%8F%98%E5%BD%A2%E5%8A%A8%E7%94%BB/ class=gdoc-nav__entry>12 Css3变形动画</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%89%8D%E7%AB%AF/%E5%90%8E%E7%9B%BE%E4%BA%BACSS/13-CSS3%E8%BF%87%E6%B8%A1%E5%BB%B6%E8%BF%9F/ class=gdoc-nav__entry>13 Css3过渡延迟</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%89%8D%E7%AB%AF/%E5%90%8E%E7%9B%BE%E4%BA%BACSS/14-CSS3%E5%B8%A7%E5%8A%A8%E7%94%BB/ class=gdoc-nav__entry>14 Css3帧动画</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%89%8D%E7%AB%AF/%E5%90%8E%E7%9B%BE%E4%BA%BACSS/15-CSS3%E5%AA%92%E4%BD%93%E6%9F%A5%E8%AF%A2/ class=gdoc-nav__entry>15 Css3媒体查询</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%89%8D%E7%AB%AF/%E5%90%8E%E7%9B%BE%E4%BA%BACSS/16-%E5%93%8D%E5%BA%94%E5%B0%BA%E5%AF%B8/ class=gdoc-nav__entry>16 响应尺寸</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%89%8D%E7%AB%AF/%E5%90%8E%E7%9B%BE%E4%BA%BACSS/17-%E5%AD%97%E4%BD%93%E5%9B%BE%E6%A0%87/ class=gdoc-nav__entry>17 字体图标</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex>18 常用技巧</span></label></li></ul></li><li><input type=checkbox class=gdoc-nav__toggle id=navtree-5e6b8e5c>
<label for=navtree-5e6b8e5c class="flex justify-between align-center"><span class=flex>JS</span><svg class="gdoc-icon toggle gdoc_keyboard_arrow_left"><use xlink:href="#gdoc_keyboard_arrow_left"/></svg><svg class="gdoc-icon toggle gdoc_keyboard_arrow_down"><use xlink:href="#gdoc_keyboard_arrow_down"/></svg></label><ul class=gdoc-nav__list><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%89%8D%E7%AB%AF/%E5%90%8E%E7%AB%AF%E4%BA%BAJS/01-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/ class=gdoc-nav__entry>01 基础知识</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%89%8D%E7%AB%AF/%E5%90%8E%E7%AB%AF%E4%BA%BAJS/02-%E8%BF%90%E7%AE%97%E7%AC%A6%E4%B8%8E%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/ class=gdoc-nav__entry>02 运算符与流程控制</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%89%8D%E7%AB%AF/%E5%90%8E%E7%AB%AF%E4%BA%BAJS/03-%E5%9F%BA%E6%9C%AC%E7%B1%BB%E5%9E%8B/ class=gdoc-nav__entry>03 基本类型</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%89%8D%E7%AB%AF/%E5%90%8E%E7%AB%AF%E4%BA%BAJS/04-%E6%95%B0%E7%BB%84%E7%B1%BB%E5%9E%8B/ class=gdoc-nav__entry>04 数组类型</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%89%8D%E7%AB%AF/%E5%90%8E%E7%AB%AF%E4%BA%BAJS/05-symbol/ class=gdoc-nav__entry>05 Symbol</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%89%8D%E7%AB%AF/%E5%90%8E%E7%AB%AF%E4%BA%BAJS/06-Set/ class=gdoc-nav__entry>06 Set</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%89%8D%E7%AB%AF/%E5%90%8E%E7%AB%AF%E4%BA%BAJS/07-Map/ class=gdoc-nav__entry>07 Map</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%89%8D%E7%AB%AF/%E5%90%8E%E7%AB%AF%E4%BA%BAJS/08-%E5%87%BD%E6%95%B0%E8%BF%9B%E9%98%B6/ class=gdoc-nav__entry>08 函数进阶</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%89%8D%E7%AB%AF/%E5%90%8E%E7%AB%AF%E4%BA%BAJS/09-%E4%BD%9C%E7%94%A8%E5%9F%9F%E4%B8%8E%E9%97%AD%E5%8C%85/ class=gdoc-nav__entry>09 作用域与闭包</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%89%8D%E7%AB%AF/%E5%90%8E%E7%AB%AF%E4%BA%BAJS/10-%E5%AF%B9%E8%B1%A1/ class=gdoc-nav__entry>10 对象</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%89%8D%E7%AB%AF/%E5%90%8E%E7%AB%AF%E4%BA%BAJS/11-%E5%8E%9F%E5%9E%8B%E4%B8%8E%E7%BB%A7%E6%89%BF/ class=gdoc-nav__entry>11 原型与继承</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%89%8D%E7%AB%AF/%E5%90%8E%E7%AB%AF%E4%BA%BAJS/12-%E7%B1%BB/ class=gdoc-nav__entry>12 类</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%89%8D%E7%AB%AF/%E5%90%8E%E7%AB%AF%E4%BA%BAJS/13-%E6%A8%A1%E5%9D%97%E8%AE%BE%E8%AE%A1/ class=gdoc-nav__entry>13 模块设计</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%89%8D%E7%AB%AF/%E5%90%8E%E7%AB%AF%E4%BA%BAJS/14-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/ class=gdoc-nav__entry>14 正则表达式</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%89%8D%E7%AB%AF/%E5%90%8E%E7%AB%AF%E4%BA%BAJS/15-Promise/ class=gdoc-nav__entry>15 Promise</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%89%8D%E7%AB%AF/%E5%90%8E%E7%AB%AF%E4%BA%BAJS/16-%E4%BB%BB%E5%8A%A1%E7%AE%A1%E7%90%86/ class=gdoc-nav__entry>16 任务管理</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%89%8D%E7%AB%AF/%E5%90%8E%E7%AB%AF%E4%BA%BAJS/17-Promise%E6%A0%B8%E5%BF%83/ class=gdoc-nav__entry>17 Promise核心</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%89%8D%E7%AB%AF/%E5%90%8E%E7%AB%AF%E4%BA%BAJS/18-DOM/ class=gdoc-nav__entry>18 Dom</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%89%8D%E7%AB%AF/%E5%90%8E%E7%AB%AF%E4%BA%BAJS/19-%E7%A9%BA%E9%97%B4%E5%9D%90%E6%A0%87/ class=gdoc-nav__entry>19 空间坐标</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%89%8D%E7%AB%AF/%E5%90%8E%E7%AB%AF%E4%BA%BAJS/20-%E4%BA%8B%E4%BB%B6/ class=gdoc-nav__entry>20 事件</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%89%8D%E7%AB%AF/%E5%90%8E%E7%AB%AF%E4%BA%BAJS/21-%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82/ class=gdoc-nav__entry>21 网络请求</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%89%8D%E7%AB%AF/%E5%90%8E%E7%AB%AF%E4%BA%BAJS/22-canvas/ class=gdoc-nav__entry>22 Canvas</a></span></label></li></ul></li></ul></li><li><input type=checkbox class=gdoc-nav__toggle id=navtree-dbc822db>
<label for=navtree-dbc822db class="flex justify-between align-center"><span class=flex>后端系列</span><svg class="gdoc-icon toggle gdoc_keyboard_arrow_left"><use xlink:href="#gdoc_keyboard_arrow_left"/></svg><svg class="gdoc-icon toggle gdoc_keyboard_arrow_down"><use xlink:href="#gdoc_keyboard_arrow_down"/></svg></label><ul class=gdoc-nav__list><li><input type=checkbox class=gdoc-nav__toggle id=navtree-4511e5d4>
<label for=navtree-4511e5d4 class="flex justify-between align-center"><span class=flex>Golang</span><svg class="gdoc-icon toggle gdoc_keyboard_arrow_left"><use xlink:href="#gdoc_keyboard_arrow_left"/></svg><svg class="gdoc-icon toggle gdoc_keyboard_arrow_down"><use xlink:href="#gdoc_keyboard_arrow_down"/></svg></label><ul class=gdoc-nav__list><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Golang/00-%E6%8E%A8%E8%8D%90%E9%98%85%E8%AF%BB/ class=gdoc-nav__entry>00 推荐阅读</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Golang/01-1_Golang%E4%B8%AD%E7%9A%84%E5%8F%98%E9%87%8F%E5%A3%B0%E6%98%8E%E4%B8%8E%E8%B5%8B%E5%80%BC/ class=gdoc-nav__entry>01 1 Golang中的变量声明与赋值</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Golang/01_%E5%8F%98%E9%87%8F%E4%B8%8E%E5%B8%B8%E9%87%8F/ class=gdoc-nav__entry>01 变量与常量</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Golang/02_%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/ class=gdoc-nav__entry>02 基本数据类型</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Golang/03_%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%9A%84%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/ class=gdoc-nav__entry>03 基本数据类型的类型转换</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Golang/04_%E8%BF%90%E7%AE%97%E7%AC%A6/ class=gdoc-nav__entry>04 运算符</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Golang/05_%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/ class=gdoc-nav__entry>05 流程控制</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex>06 函数</span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Golang/Gin%E6%A1%86%E6%9E%B6%E4%BB%8B%E7%BB%8D%E5%8F%8A%E4%BD%BF%E7%94%A8/ class=gdoc-nav__entry>Gin框架介绍及使用</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Golang/go_template/ class=gdoc-nav__entry>Go Template</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Golang/GO%E4%BE%9D%E8%B5%96%E5%8C%85%E7%AE%A1%E7%90%86/ class=gdoc-nav__entry>Go依赖包管理</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Golang/go%E8%AF%AD%E8%A8%80%E6%93%8D%E4%BD%9Cmongodb/ class=gdoc-nav__entry>Go语言操作mongodb</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Golang/%E5%8F%8D%E5%B0%84reflect/ class=gdoc-nav__entry>反射reflect</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Golang/%E6%96%87%E4%BB%B6%E6%93%8D%E8%AF%BB%E5%86%99%E4%BD%9C/ class=gdoc-nav__entry>文件操读写作</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Golang/%E7%B1%BB%E5%9E%8B%E6%96%AD%E8%A8%80/ class=gdoc-nav__entry>类型断言</a></span></label></li></ul></li><li><input type=checkbox class=gdoc-nav__toggle id=navtree-ee81b072>
<label for=navtree-ee81b072 class="flex justify-between align-center"><span class=flex>Java</span><svg class="gdoc-icon toggle gdoc_keyboard_arrow_left"><use xlink:href="#gdoc_keyboard_arrow_left"/></svg><svg class="gdoc-icon toggle gdoc_keyboard_arrow_down"><use xlink:href="#gdoc_keyboard_arrow_down"/></svg></label><ul class=gdoc-nav__list><li><input type=checkbox class=gdoc-nav__toggle id=navtree-b444b88e>
<label for=navtree-b444b88e class="flex justify-between align-center"><span class=flex>Jvm</span><svg class="gdoc-icon toggle gdoc_keyboard_arrow_left"><use xlink:href="#gdoc_keyboard_arrow_left"/></svg><svg class="gdoc-icon toggle gdoc_keyboard_arrow_down"><use xlink:href="#gdoc_keyboard_arrow_down"/></svg></label><ul class=gdoc-nav__list><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Java/JVM/00-JVM%E8%B0%83%E4%BC%98JVM-GC-and-Tuning/ class=gdoc-nav__entry>00 [ Jvm调优] Jvm Gc and Tuning</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Java/JVM/01-%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8/ class=gdoc-nav__entry>01 类加载器</a></span></label></li></ul></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Java/00-idea%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE%E6%AD%A5%E9%AA%A4/ class=gdoc-nav__entry>00 Idea创建项目步骤</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Java/01-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E4%B8%8E%E5%8F%98%E9%87%8F%E5%B8%B8%E9%87%8F/ class=gdoc-nav__entry>01 数据类型与变量常量</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Java/02-%E8%BF%90%E7%AE%97%E7%AC%A6/ class=gdoc-nav__entry>02 运算符</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Java/03-%E6%95%B0%E6%8D%AE%E8%BE%93%E5%85%A5/ class=gdoc-nav__entry>03 数据输入</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Java/04-%E6%8E%A7%E5%88%B6%E8%AF%AD%E5%8F%A5/ class=gdoc-nav__entry>04 控制语句</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Java/05-%E6%95%B0%E7%BB%84/ class=gdoc-nav__entry>05 数组</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Java/%E9%9A%8F%E7%AC%94/ class=gdoc-nav__entry>随笔</a></span></label></li></ul></li><li><input type=checkbox class=gdoc-nav__toggle id=navtree-c8b97c18>
<label for=navtree-c8b97c18 class="flex justify-between align-center"><span class=flex>Python</span><svg class="gdoc-icon toggle gdoc_keyboard_arrow_left"><use xlink:href="#gdoc_keyboard_arrow_left"/></svg><svg class="gdoc-icon toggle gdoc_keyboard_arrow_down"><use xlink:href="#gdoc_keyboard_arrow_down"/></svg></label><ul class=gdoc-nav__list><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Python/01-%E6%A6%82%E8%BF%B0/ class=gdoc-nav__entry>01 概述</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Python/02-%E5%AF%B9%E8%B1%A1%E4%BB%8B%E7%BB%8D/ class=gdoc-nav__entry>02 对象介绍</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Python/03-%E5%8F%98%E9%87%8F/ class=gdoc-nav__entry>03 变量</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Python/03.1-%E5%90%84%E7%A7%8D%E8%B5%8B%E5%80%BC%E8%AF%AD%E5%8F%A5/ class=gdoc-nav__entry>03.1 各种赋值语句</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Python/04-%E5%86%85%E7%BD%AE%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E6%A6%82%E8%BF%B0/ class=gdoc-nav__entry>04 内置数据类型概述</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Python/05-%E6%95%B0%E5%AD%97%E7%B1%BB%E5%9E%8B/ class=gdoc-nav__entry>05 数字类型</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Python/06-%E5%BA%8F%E5%88%97%E6%A6%82%E8%BF%B0/ class=gdoc-nav__entry>06 序列概述</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Python/07-%E5%AD%97%E7%AC%A6%E4%B8%B2/ class=gdoc-nav__entry>07 字符串</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Python/08-%E5%88%97%E8%A1%A8/ class=gdoc-nav__entry>08 列表</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Python/09-%E5%AD%97%E5%85%B8/ class=gdoc-nav__entry>09 字典</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Python/10-%E5%85%83%E7%BB%84/ class=gdoc-nav__entry>10 元组</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Python/11-%E9%9B%86%E5%90%88set/ class=gdoc-nav__entry>11 集合set</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Python/12-%E6%96%87%E4%BB%B6file/ class=gdoc-nav__entry>12 文件file</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Python/13-%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/ class=gdoc-nav__entry>13 流程控制</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Python/13-%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/ class=gdoc-nav__entry>13 类型转换</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Python/14-%E5%87%BD%E6%95%B0/ class=gdoc-nav__entry>14 函数</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Python/14.1-%E8%A3%85%E9%A5%B0%E5%99%A8/ class=gdoc-nav__entry>14.1 装饰器</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Python/14.2-%E8%BF%AD%E4%BB%A3%E5%99%A8%E4%B8%8E%E7%94%9F%E6%88%90%E5%99%A8/ class=gdoc-nav__entry>14.2 迭代器与生成器</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Python/15-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/ class=gdoc-nav__entry>15 面向对象</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Python/16-%E5%BC%82%E5%B8%B8%E4%B8%8E%E6%96%AD%E8%A8%80/ class=gdoc-nav__entry>16 异常与断言</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Python/17-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/ class=gdoc-nav__entry>17 并发编程</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Python/18-%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/ class=gdoc-nav__entry>18 网络编程</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Python/19-%E4%B8%8A%E4%B8%8B%E6%96%87%E7%AE%A1%E7%90%86%E5%99%A8/ class=gdoc-nav__entry>19 上下文管理器</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Python/20-%E6%A8%A1%E5%9D%97/20.1-%E6%A8%A1%E5%9D%97/ class=gdoc-nav__entry>20.1 模块</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex>20.10 Requests模块(推荐)</span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex>20.10 Yaml模块 配置文件解析</span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex>20.11 Configparser模块 Cnf配置文件解析</span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex>20.12 Xml配置文件解析</span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex>20.13 Toml配置文件解析</span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex>20.14 Subprocess模块 执行操作系统命令</span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex>20.15 Signal模块 信号处理模块</span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex>20.16 Logging模块</span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Python/20-%E6%A8%A1%E5%9D%97/20.17-psutil%E6%A8%A1%E5%9D%97%E8%AF%A6%E8%A7%A3/ class=gdoc-nav__entry>20.17 Psutil模块详解</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex>20.18 Paramiko模块 Ssh协议客户端</span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex>20.19 Lxml模块 Xpath</span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Python/20-%E6%A8%A1%E5%9D%97/20.2-os%E6%A8%A1%E5%9D%97/ class=gdoc-nav__entry>20.2 Os模块</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Python/20-%E6%A8%A1%E5%9D%97/20.20-platform%E6%A8%A1%E5%9D%97/ class=gdoc-nav__entry>20.20 Platform模块</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Python/20-%E6%A8%A1%E5%9D%97/20.21-PrettyTable%E6%A8%A1%E5%9D%97-%E8%A1%A8%E6%A0%BC%E8%BE%93%E5%87%BA/ class=gdoc-nav__entry>20.21 Pretty Table模块 表格输出</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Python/20-%E6%A8%A1%E5%9D%97/20.22-rich%E6%A8%A1%E5%9D%97-%E6%8E%A7%E5%88%B6%E5%8F%B0%E6%A0%BC%E5%BC%8F%E5%8C%96/ class=gdoc-nav__entry>20.22 Rich模块 控制台格式化</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Python/20-%E6%A8%A1%E5%9D%97/20.23-pexcept%E6%A8%A1%E5%9D%97/ class=gdoc-nav__entry>20.23 Pexcept模块</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Python/20-%E6%A8%A1%E5%9D%97/20.3-sys%E6%A8%A1%E5%9D%97/ class=gdoc-nav__entry>20.3 Sys模块</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Python/20-%E6%A8%A1%E5%9D%97/20.4-shutil-zipfile-tarfile%E6%A8%A1%E5%9D%97-%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/ class=gdoc-nav__entry>20.4 Shutil Zipfile Tarfile模块 文件操作</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Python/20-%E6%A8%A1%E5%9D%97/20.5-random%E6%A8%A1%E5%9D%97/ class=gdoc-nav__entry>20.5 Random模块</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Python/20-%E6%A8%A1%E5%9D%97/20.5-time%E6%A8%A1%E5%9D%97/ class=gdoc-nav__entry>20.5 Time模块</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Python/20-%E6%A8%A1%E5%9D%97/20.6-re%E6%A8%A1%E5%9D%97-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/ class=gdoc-nav__entry>20.6 Re模块 正则表达式</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Python/20-%E6%A8%A1%E5%9D%97/20.7-pickle-json-shelve%E5%BA%8F%E5%88%97%E5%8C%96%E6%A8%A1%E5%9D%97/ class=gdoc-nav__entry>20.7 Pickle JSON Shelve序列化模块</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Python/20-%E6%A8%A1%E5%9D%97/20.8-hashlib/ class=gdoc-nav__entry>20.8 Hashlib</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex>20.9 Urllib.request Http请求</span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Python/20-%E6%A8%A1%E5%9D%97/%E6%89%A7%E8%A1%8C%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%91%BD%E4%BB%A4/ class=gdoc-nav__entry>执行操作系统命令</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Python/21-Python3%E6%93%8D%E4%BD%9CMySQL/ class=gdoc-nav__entry>21 Python3操作 My SQL</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Python/22-pymongo%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/ class=gdoc-nav__entry>22 Pymongo使用方法</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Python/7.1-%E6%A0%BC%E5%BC%8F%E5%8C%96%E5%AD%97%E7%AC%A6%E4%B8%B2/ class=gdoc-nav__entry>7.1 格式化字符串</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Python/%E5%B0%8F%E7%9F%A5%E8%AF%86/pip%E9%85%8D%E7%BD%AE%E9%98%BF%E9%87%8C%E6%BA%90/ class=gdoc-nav__entry>Pip配置阿里源</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Python/%E5%B0%8F%E7%9F%A5%E8%AF%86/python%E4%B8%AD%E5%A6%82%E4%BD%95%E8%8E%B7%E5%8F%96%E5%B8%AE%E5%8A%A9/ class=gdoc-nav__entry>Python中如何获取帮助</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Python/%E5%B0%8F%E7%9F%A5%E8%AF%86/python%E7%9A%84%E7%9C%9F%E4%B8%8E%E5%81%87/ class=gdoc-nav__entry>Python的真与假</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Python/%E5%B0%8F%E7%9F%A5%E8%AF%86/python%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/ class=gdoc-nav__entry>Python虚拟环境</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Python/%E5%B0%8F%E7%9F%A5%E8%AF%86/%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85Python/ class=gdoc-nav__entry>编译安装 Python</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Python/%E6%8E%A8%E8%8D%90%E5%8D%9A%E5%AE%A2/ class=gdoc-nav__entry>推荐博客</a></span></label></li></ul></li></ul></li><li><input type=checkbox class=gdoc-nav__toggle id=navtree-24df5c4c>
<label for=navtree-24df5c4c class="flex justify-between align-center"><span class=flex>存储系列</span><svg class="gdoc-icon toggle gdoc_keyboard_arrow_left"><use xlink:href="#gdoc_keyboard_arrow_left"/></svg><svg class="gdoc-icon toggle gdoc_keyboard_arrow_down"><use xlink:href="#gdoc_keyboard_arrow_down"/></svg></label><ul class=gdoc-nav__list><li><input type=checkbox class=gdoc-nav__toggle id=navtree-c8473515>
<label for=navtree-c8473515 class="flex justify-between align-center"><span class=flex>Ceph</span><svg class="gdoc-icon toggle gdoc_keyboard_arrow_left"><use xlink:href="#gdoc_keyboard_arrow_left"/></svg><svg class="gdoc-icon toggle gdoc_keyboard_arrow_down"><use xlink:href="#gdoc_keyboard_arrow_down"/></svg></label><ul class=gdoc-nav__list><li><input type=checkbox class=gdoc-nav__toggle id=navtree-e835a315>
<label for=navtree-e835a315 class="flex justify-between align-center"><span class=flex>01 Ceph 基础</span><svg class="gdoc-icon toggle gdoc_keyboard_arrow_left"><use xlink:href="#gdoc_keyboard_arrow_left"/></svg><svg class="gdoc-icon toggle gdoc_keyboard_arrow_down"><use xlink:href="#gdoc_keyboard_arrow_down"/></svg></label><ul class=gdoc-nav__list><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/Ceph/01-ceph-%E5%9F%BA%E7%A1%80/00-Ceph%E6%A6%82%E5%BF%B5%E4%B8%8E%E5%8E%9F%E7%90%86/ class=gdoc-nav__entry>00 Ceph概念与原理</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/Ceph/01-ceph-%E5%9F%BA%E7%A1%80/02-ceph%E7%AE%A1%E7%90%86%E4%BB%8B%E7%BB%8D/ class=gdoc-nav__entry>02 Ceph管理介绍</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/Ceph/01-ceph-%E5%9F%BA%E7%A1%80/02-ceph%E9%9B%86%E7%BE%A4%E8%BF%90%E7%BB%B4/ class=gdoc-nav__entry>02 Ceph集群运维</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/Ceph/01-ceph-%E5%9F%BA%E7%A1%80/03-CephX%E8%AE%A4%E8%AF%81%E4%B8%8E%E6%8E%88%E6%9D%83/ class=gdoc-nav__entry>03 Ceph X认证与授权</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/Ceph/01-ceph-%E5%9F%BA%E7%A1%80/04-%E5%AD%98%E5%82%A8%E6%B1%A0Pool%E6%93%8D%E4%BD%9C/ class=gdoc-nav__entry>04 存储池 Pool操作</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/Ceph/01-ceph-%E5%9F%BA%E7%A1%80/05-RBD/ class=gdoc-nav__entry>05 Rbd</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/Ceph/01-ceph-%E5%9F%BA%E7%A1%80/06-CephFS/ class=gdoc-nav__entry>06 Ceph Fs</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/Ceph/01-ceph-%E5%9F%BA%E7%A1%80/07-RadosGW/ class=gdoc-nav__entry>07 Rados Gw</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/Ceph/01-ceph-%E5%9F%BA%E7%A1%80/08-%E8%B0%83%E5%88%B6CRUSH/ class=gdoc-nav__entry>08 调制 Crush</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/Ceph/01-ceph-%E5%9F%BA%E7%A1%80/09-OSD%E6%89%A9%E5%AE%B9%E4%B8%8E%E6%8D%A2%E7%9B%98/ class=gdoc-nav__entry>09 Osd扩容与换盘</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/Ceph/01-ceph-%E5%9F%BA%E7%A1%80/10-%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4/ class=gdoc-nav__entry>10 高可用集群</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/Ceph/01-ceph-%E5%9F%BA%E7%A1%80/11-%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95/ class=gdoc-nav__entry>11 性能测试</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/Ceph/01-ceph-%E5%9F%BA%E7%A1%80/12-ceph%E5%AF%B9%E6%8E%A5k8s/ class=gdoc-nav__entry>12 Ceph对接k8s</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/Ceph/01-ceph-%E5%9F%BA%E7%A1%80/13-ceph-dashboard/ class=gdoc-nav__entry>13 Ceph Dashboard</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/Ceph/01-ceph-%E5%9F%BA%E7%A1%80/15-cache_tier/ class=gdoc-nav__entry>15 Cache Tier</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/Ceph/01-ceph-%E5%9F%BA%E7%A1%80/16-Bluestore%E4%B8%8B%E7%9A%84OSD%E5%BC%80%E6%9C%BA%E8%87%AA%E5%90%AF%E5%8A%A8%E5%88%86%E6%9E%90/ class=gdoc-nav__entry>16 Bluestore下的 Osd开机自启动分析</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/Ceph/01-ceph-%E5%9F%BA%E7%A1%80/01-ceph-deploy%E9%83%A8%E7%BD%B2cephadm%E7%94%A8%E6%88%B7/ class=gdoc-nav__entry>01 ceph-deploy部署</a></span></label></li></ul></li><li><input type=checkbox class=gdoc-nav__toggle id=navtree-203f856e>
<label for=navtree-203f856e class="flex justify-between align-center"><span class=flex>02 Ceph Handbook</span><svg class="gdoc-icon toggle gdoc_keyboard_arrow_left"><use xlink:href="#gdoc_keyboard_arrow_left"/></svg><svg class="gdoc-icon toggle gdoc_keyboard_arrow_down"><use xlink:href="#gdoc_keyboard_arrow_down"/></svg></label><ul class=gdoc-nav__list><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/Ceph/02-ceph-handbook/Advance_usage/advanced_usage/ class=gdoc-nav__entry>Advanced Usage</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/Ceph/02-ceph-handbook/Advance_usage/cal_pg_per_osd/ class=gdoc-nav__entry>Cal Pg per Osd</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/Ceph/02-ceph-handbook/Advance_usage/change_fd/ class=gdoc-nav__entry>Change Fd</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/Ceph/02-ceph-handbook/Advance_usage/change_osd_journal/ class=gdoc-nav__entry>Change Osd Journal</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/Ceph/02-ceph-handbook/Advance_usage/find_rbd_data_loc/ class=gdoc-nav__entry>Find Rbd Data Loc</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/Ceph/02-ceph-handbook/Advance_usage/list_rbd_watcher/ class=gdoc-nav__entry>List Rbd Watcher</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/Ceph/02-ceph-handbook/Advance_usage/mon_backup/ class=gdoc-nav__entry>Mon Backup</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/Ceph/02-ceph-handbook/Advance_usage/pg_active_remapped/ class=gdoc-nav__entry>Pg Active Remapped</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/Ceph/02-ceph-handbook/Advance_usage/pg_pgp/ class=gdoc-nav__entry>Pg Pgp</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/Ceph/02-ceph-handbook/Advance_usage/rbd_real_size/ class=gdoc-nav__entry>Rbd Real Size</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/Ceph/02-ceph-handbook/Advance_usage/rescue_osd_parted/ class=gdoc-nav__entry>Rescue Osd Parted</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/Ceph/02-ceph-handbook/Operation/add_rm_mon/ class=gdoc-nav__entry>Add Rm Mon</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/Ceph/02-ceph-handbook/Operation/add_rm_osd/ class=gdoc-nav__entry>Add Rm Osd</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/Ceph/02-ceph-handbook/Operation/change_cluster_conf/ class=gdoc-nav__entry>Change Cluster Conf</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/Ceph/02-ceph-handbook/Operation/common_operations/ class=gdoc-nav__entry>Common Operations</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/Ceph/02-ceph-handbook/Operation/log_debug/ class=gdoc-nav__entry>Log Debug</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/Ceph/02-ceph-handbook/Operation/manage_crushmap/ class=gdoc-nav__entry>Manage Crushmap</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/Ceph/02-ceph-handbook/Operation/modify_mon_ip/ class=gdoc-nav__entry>Modify Mon IP</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/Ceph/02-ceph-handbook/Operation/monitor_cluster/ class=gdoc-nav__entry>Monitor Cluster</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/Ceph/02-ceph-handbook/Operation/monitor_osd/ class=gdoc-nav__entry>Monitor Osd</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/Ceph/02-ceph-handbook/Operation/monitor_pg/ class=gdoc-nav__entry>Monitor Pg</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/Ceph/02-ceph-handbook/Operation/operate_cluster/ class=gdoc-nav__entry>Operate Cluster</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/Ceph/02-ceph-handbook/Operation/operate_pool/ class=gdoc-nav__entry>Operate Pool</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/Ceph/02-ceph-handbook/Operation/user_management/ class=gdoc-nav__entry>User Management</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/Ceph/02-ceph-handbook/README/ class=gdoc-nav__entry>Readme</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/Ceph/02-ceph-handbook/SUMMARY/ class=gdoc-nav__entry>Summary</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/Ceph/02-ceph-handbook/Troubleshooting/troubleshooting/ class=gdoc-nav__entry>Troubleshooting</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/Ceph/02-ceph-handbook/Troubleshooting/troubleshooting_lost_power/ class=gdoc-nav__entry>Troubleshooting Lost Power</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/Ceph/02-ceph-handbook/Troubleshooting/troubleshooting_mon/ class=gdoc-nav__entry>Troubleshooting Mon</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/Ceph/02-ceph-handbook/Troubleshooting/troubleshooting_osd/ class=gdoc-nav__entry>Troubleshooting Osd</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/Ceph/02-ceph-handbook/Troubleshooting/troubleshooting_pg/ class=gdoc-nav__entry>Troubleshooting Pg</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/Ceph/02-ceph-handbook/Troubleshooting/troubleshooting_single_lost_power/ class=gdoc-nav__entry>Troubleshooting Single Lost Power</a></span></label></li></ul></li><li><input type=checkbox class=gdoc-nav__toggle id=navtree-61981c17>
<label for=navtree-61981c17 class="flex justify-between align-center"><span class=flex>03 Ceph 徐小胖blog</span><svg class="gdoc-icon toggle gdoc_keyboard_arrow_left"><use xlink:href="#gdoc_keyboard_arrow_left"/></svg><svg class="gdoc-icon toggle gdoc_keyboard_arrow_down"><use xlink:href="#gdoc_keyboard_arrow_down"/></svg></label><ul class=gdoc-nav__list><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/Ceph/03-ceph-%E5%BE%90%E5%B0%8F%E8%83%96blog/00-README/ class=gdoc-nav__entry>00 Readme</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/Ceph/03-ceph-%E5%BE%90%E5%B0%8F%E8%83%96blog/01-Ceph%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87--%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%90%AD%E5%BB%BA/ class=gdoc-nav__entry>01 Ceph环境准备 虚拟机搭建</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/Ceph/03-ceph-%E5%BE%90%E5%B0%8F%E8%83%96blog/02-Ceph%E5%BF%AB%E9%80%9F%E9%83%A8%E7%BD%B2Centos7+Jewel/ class=gdoc-nav__entry>02 Ceph快速部署( Centos7 Jewel)</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/Ceph/03-ceph-%E5%BE%90%E5%B0%8F%E8%83%96blog/03-%E5%A4%A7%E8%AF%9DCeph--PG%E9%82%A3%E7%82%B9%E4%BA%8B%E5%84%BF/ class=gdoc-nav__entry>03 大话 Ceph Pg那点事儿</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/Ceph/03-ceph-%E5%BE%90%E5%B0%8F%E8%83%96blog/04-Ceph-%E9%83%A8%E7%BD%B2%E5%AE%8C%E6%95%B4%E7%89%88el7+jewel/ class=gdoc-nav__entry>04 Ceph 部署完整版(el7 Jewel)</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/Ceph/03-ceph-%E5%BE%90%E5%B0%8F%E8%83%96blog/05-Ceph%E8%AF%95%E9%AA%8C/ class=gdoc-nav__entry>05 Ceph试验</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/Ceph/03-ceph-%E5%BE%90%E5%B0%8F%E8%83%96blog/06-%E5%A4%A7%E8%AF%9DCeph--RBD%E9%82%A3%E7%82%B9%E4%BA%8B%E5%84%BF/ class=gdoc-nav__entry>06 大话 Ceph Rbd那点事儿</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/Ceph/03-ceph-%E5%BE%90%E5%B0%8F%E8%83%96blog/07-osdmap%E6%8F%90%E5%8F%96crushmap-/ class=gdoc-nav__entry>07 Osdmap提取crushmap</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/Ceph/03-ceph-%E5%BE%90%E5%B0%8F%E8%83%96blog/08-monitor%E7%9A%84%E5%A2%9E%E5%88%A0%E6%94%B9%E5%A4%87/ class=gdoc-nav__entry>08 Monitor的增删改备</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/Ceph/03-ceph-%E5%BE%90%E5%B0%8F%E8%83%96blog/09-Ceph-%E5%92%8C%E9%98%B2%E7%81%AB%E5%A2%99%E7%9A%84%E6%95%85%E4%BA%8B/ class=gdoc-nav__entry>09 Ceph 和防火墙的故事</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/Ceph/03-ceph-%E5%BE%90%E5%B0%8F%E8%83%96blog/10-%E5%A4%A7%E8%AF%9DCeph--CRUSH%E9%82%A3%E7%82%B9%E4%BA%8B%E5%84%BF/ class=gdoc-nav__entry>10 大话 Ceph Crush那点事儿</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/Ceph/03-ceph-%E5%BE%90%E5%B0%8F%E8%83%96blog/11-Ceph%E5%B8%B8%E7%94%A8%E8%A1%A8%E6%A0%BC%E6%B1%87%E6%80%BB/ class=gdoc-nav__entry>11 Ceph常用表格汇总</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/Ceph/03-ceph-%E5%BE%90%E5%B0%8F%E8%83%96blog/12-PG%E5%A6%82%E4%BD%95%E5%BD%B1%E5%93%8D%E6%95%B0%E6%8D%AE%E5%88%86%E5%B8%83/ class=gdoc-nav__entry>12 Pg如何影响数据分布</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/Ceph/03-ceph-%E5%BE%90%E5%B0%8F%E8%83%96blog/13-Ceph%E7%9A%84Json%E6%A0%BC%E5%BC%8F%E8%BE%93%E5%87%BA%E8%A7%A3%E6%9E%90/ class=gdoc-nav__entry>13 Ceph的 Json格式输出解析</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/Ceph/03-ceph-%E5%BE%90%E5%B0%8F%E8%83%96blog/14-%E9%80%9A%E8%BF%87ganesha-nfs%E5%B0%86-Ceph-%E5%AF%BC%E5%87%BA%E4%B8%BA-NFS/ class=gdoc-nav__entry>14 通过ganesha Nfs将 Ceph 导出为 Nfs</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/Ceph/03-ceph-%E5%BE%90%E5%B0%8F%E8%83%96blog/15-%E5%A4%A7%E8%AF%9D-Ceph--CephX-%E9%82%A3%E7%82%B9%E4%BA%8B%E5%84%BF/ class=gdoc-nav__entry>15 大话 Ceph Ceph X 那点事儿</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/Ceph/03-ceph-%E5%BE%90%E5%B0%8F%E8%83%96blog/16-Ceph-%E9%9B%86%E7%BE%A4%E6%95%B4%E4%BD%93%E8%BF%81%E7%A7%BB%E6%96%B9%E6%A1%88/ class=gdoc-nav__entry>16 Ceph 集群整体迁移方案</a></span></label></li></ul></li><li><input type=checkbox class=gdoc-nav__toggle id=navtree-b35c4f44>
<label for=navtree-b35c4f44 class="flex justify-between align-center"><span class=flex>04 Ceph Rook</span><svg class="gdoc-icon toggle gdoc_keyboard_arrow_left"><use xlink:href="#gdoc_keyboard_arrow_left"/></svg><svg class="gdoc-icon toggle gdoc_keyboard_arrow_down"><use xlink:href="#gdoc_keyboard_arrow_down"/></svg></label><ul class=gdoc-nav__list><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/Ceph/04-ceph-rook/rook-ceph/ class=gdoc-nav__entry>Rook Ceph</a></span></label></li></ul></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/Ceph/rbd%E8%AF%95%E9%AA%8C%E8%87%AA%E6%B5%8B/ class=gdoc-nav__entry>Rbd试验(自测)</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/Ceph/%E5%85%B6%E4%BB%96%E6%8E%A8%E8%8D%90/ class=gdoc-nav__entry>其他推荐</a></span></label></li></ul></li><li><input type=checkbox class=gdoc-nav__toggle id=navtree-df6592ff>
<label for=navtree-df6592ff class="flex justify-between align-center"><span class=flex>drbd</span><svg class="gdoc-icon toggle gdoc_keyboard_arrow_left"><use xlink:href="#gdoc_keyboard_arrow_left"/></svg><svg class="gdoc-icon toggle gdoc_keyboard_arrow_down"><use xlink:href="#gdoc_keyboard_arrow_down"/></svg></label><ul class=gdoc-nav__list><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/drbd-%E7%BD%91%E7%BB%9CRAID1/001-%E7%AE%80%E4%BB%8B%E5%92%8C%E5%AE%89%E8%A3%85-/ class=gdoc-nav__entry>001 简介和安装</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/drbd-%E7%BD%91%E7%BB%9CRAID1/002-%E9%85%8D%E7%BD%AE%E5%92%8C%E4%BD%BF%E7%94%A8-/ class=gdoc-nav__entry>002 配置和使用</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/drbd-%E7%BD%91%E7%BB%9CRAID1/003-drbd%E7%9A%84%E7%8A%B6%E6%80%81%E8%AF%B4%E6%98%8E-/ class=gdoc-nav__entry>003 Drbd的状态说明</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/drbd-%E7%BD%91%E7%BB%9CRAID1/004-drbd%E5%A4%9A%E8%8A%82%E7%82%B9drbd9-/ class=gdoc-nav__entry>004 Drbd多节点(drbd9)</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/drbd-%E7%BD%91%E7%BB%9CRAID1/01-drbd%E5%AE%89%E8%A3%85/ class=gdoc-nav__entry>01 Drbd安装</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/drbd-%E7%BD%91%E7%BB%9CRAID1/02-drbd%E7%90%86%E8%AE%BA%E5%9F%BA%E7%A1%80/ class=gdoc-nav__entry>02 Drbd理论基础</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/drbd-%E7%BD%91%E7%BB%9CRAID1/03-drbd%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9/ class=gdoc-nav__entry>03 Drbd注意事项</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/drbd-%E7%BD%91%E7%BB%9CRAID1/04-split_brain%E8%84%91%E8%A3%82%E5%A4%84%E7%90%86/ class=gdoc-nav__entry>04 Split Brain脑裂处理</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/drbd-%E7%BD%91%E7%BB%9CRAID1/0715-%E8%B7%A8%E9%9B%86%E7%BE%A4etcd%E4%B8%BB%E5%A4%87%E6%95%B0%E6%8D%AE%E5%90%8C%E6%AD%A5%E5%AE%9E%E6%96%BD%E6%96%B9%E6%A1%88/ class=gdoc-nav__entry>0715 跨集群etcd主备数据同步实施方案</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/drbd-%E7%BD%91%E7%BB%9CRAID1/drbd/ class=gdoc-nav__entry>Drbd</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/drbd-%E7%BD%91%E7%BB%9CRAID1/drbd%E6%8E%A8%E8%8D%90%E9%98%85%E8%AF%BB/ class=gdoc-nav__entry>Drbd推荐阅读</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/drbd-%E7%BD%91%E7%BB%9CRAID1/mariadb-galera%E9%9B%86%E7%BE%A4drbd%E4%B8%BB%E5%A4%87%E5%AE%B9%E7%81%BE%E6%B5%8B%E8%AF%95/ class=gdoc-nav__entry>Mariadb Galera集群drbd主备容灾测试</a></span></label></li></ul></li><li><input type=checkbox class=gdoc-nav__toggle id=navtree-058ca5f9>
<label for=navtree-058ca5f9 class="flex justify-between align-center"><span class=flex>iscsi</span><svg class="gdoc-icon toggle gdoc_keyboard_arrow_left"><use xlink:href="#gdoc_keyboard_arrow_left"/></svg><svg class="gdoc-icon toggle gdoc_keyboard_arrow_down"><use xlink:href="#gdoc_keyboard_arrow_down"/></svg></label><ul class=gdoc-nav__list><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/ISCSI/Linux%E4%B8%8A%E9%85%8D%E7%BD%AE%E4%BD%BF%E7%94%A8iSCSI%E8%AF%A6%E7%BB%86%E8%AF%B4%E6%98%8E-%E4%B8%BB/ class=gdoc-nav__entry>Linux上配置使用i Scsi详细说明 主</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E5%AD%98%E5%82%A8/ISCSI/Linux%E4%B8%8B%E6%90%AD%E5%BB%BAiSCSI%E5%85%B1%E4%BA%AB%E5%AD%98%E5%82%A8%E7%9A%84%E6%96%B9%E6%B3%95TGT%E6%96%B9%E5%BC%8F-%E6%AC%A1/ class=gdoc-nav__entry>Linux下搭建i Scsi共享存储的方法 Tgt方式 次</a></span></label></li></ul></li></ul></li><li><input type=checkbox class=gdoc-nav__toggle id=navtree-d52b185c>
<label for=navtree-d52b185c class="flex justify-between align-center"><span class=flex>数据库系列</span><svg class="gdoc-icon toggle gdoc_keyboard_arrow_left"><use xlink:href="#gdoc_keyboard_arrow_left"/></svg><svg class="gdoc-icon toggle gdoc_keyboard_arrow_down"><use xlink:href="#gdoc_keyboard_arrow_down"/></svg></label><ul class=gdoc-nav__list><li><input type=checkbox class=gdoc-nav__toggle id=navtree-26737b5e>
<label for=navtree-26737b5e class="flex justify-between align-center"><span class=flex>ElasticSearch</span><svg class="gdoc-icon toggle gdoc_keyboard_arrow_left"><use xlink:href="#gdoc_keyboard_arrow_left"/></svg><svg class="gdoc-icon toggle gdoc_keyboard_arrow_down"><use xlink:href="#gdoc_keyboard_arrow_down"/></svg></label><ul class=gdoc-nav__list><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E6%95%B0%E6%8D%AE%E5%BA%93/ElasticSearch/01-1-%E8%AF%A6%E8%A7%A3ES/ class=gdoc-nav__entry>01 1 详解 Es</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E6%95%B0%E6%8D%AE%E5%BA%93/ElasticSearch/01-ES%E5%85%A5%E9%97%A8%E4%BB%8B%E7%BB%8D/ class=gdoc-nav__entry>01 Es入门介绍</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E6%95%B0%E6%8D%AE%E5%BA%93/ElasticSearch/02-shard%E4%B8%8Ereplicas/ class=gdoc-nav__entry>02 Shard与replicas</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E6%95%B0%E6%8D%AE%E5%BA%93/ElasticSearch/03-es%E6%90%9C%E7%B4%A2%E8%AF%AD%E6%B3%95/ class=gdoc-nav__entry>03 Es搜索语法</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E6%95%B0%E6%8D%AE%E5%BA%93/ElasticSearch/03-%E6%90%9C%E7%B4%A2api/ class=gdoc-nav__entry>03 搜索api</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E6%95%B0%E6%8D%AE%E5%BA%93/ElasticSearch/04-%E7%B4%A2%E5%BC%95%E5%85%83%E6%95%B0%E6%8D%AE/ class=gdoc-nav__entry>04 索引元数据</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E6%95%B0%E6%8D%AE%E5%BA%93/ElasticSearch/05-document%E8%B7%AF%E7%94%B1%E5%8E%9F%E7%90%86/ class=gdoc-nav__entry>05 Document路由原理</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E6%95%B0%E6%8D%AE%E5%BA%93/ElasticSearch/06-%E8%87%AA%E5%AE%9A%E4%B9%89%E5%88%86%E8%AF%8D%E5%99%A8/ class=gdoc-nav__entry>06 自定义分词器</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E6%95%B0%E6%8D%AE%E5%BA%93/ElasticSearch/07-%E9%87%8D%E5%BB%BA%E7%B4%A2%E5%BC%95/ class=gdoc-nav__entry>07 重建索引</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E6%95%B0%E6%8D%AE%E5%BA%93/ElasticSearch/08-%E9%9B%86%E7%BE%A4shard%E5%9D%87%E8%A1%A1%E7%AD%96%E7%95%A5-ilm/ class=gdoc-nav__entry>08 集群shard均衡策略 Ilm</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E6%95%B0%E6%8D%AE%E5%BA%93/ElasticSearch/09-%E5%87%A0%E7%A7%8D%E5%B8%B8%E7%94%A8%E7%9A%84Elasticsearch%E6%95%B0%E6%8D%AE%E8%BF%81%E7%A7%BB%E6%96%B9%E6%A1%88/ class=gdoc-nav__entry>09 几种常用的 Elasticsearch数据迁移方案</a></span></label></li></ul></li><li><input type=checkbox class=gdoc-nav__toggle id=navtree-1816b821>
<label for=navtree-1816b821 class="flex justify-between align-center"><span class=flex>MySQL</span><svg class="gdoc-icon toggle gdoc_keyboard_arrow_left"><use xlink:href="#gdoc_keyboard_arrow_left"/></svg><svg class="gdoc-icon toggle gdoc_keyboard_arrow_down"><use xlink:href="#gdoc_keyboard_arrow_down"/></svg></label><ul class=gdoc-nav__list><li><input type=checkbox class=gdoc-nav__toggle id=navtree-59b5994b>
<label for=navtree-59b5994b class="flex justify-between align-center"><span class=flex>Xenon</span><svg class="gdoc-icon toggle gdoc_keyboard_arrow_left"><use xlink:href="#gdoc_keyboard_arrow_left"/></svg><svg class="gdoc-icon toggle gdoc_keyboard_arrow_down"><use xlink:href="#gdoc_keyboard_arrow_down"/></svg></label><ul class=gdoc-nav__list><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL/Xenon/xenon_on_MySQL5.7/ class=gdoc-nav__entry>Xenon on My Sql5.7</a></span></label></li></ul></li></ul></li><li><input type=checkbox class=gdoc-nav__toggle id=navtree-28ad690b>
<label for=navtree-28ad690b class="flex justify-between align-center"><span class=flex>Postgresql</span><svg class="gdoc-icon toggle gdoc_keyboard_arrow_left"><use xlink:href="#gdoc_keyboard_arrow_left"/></svg><svg class="gdoc-icon toggle gdoc_keyboard_arrow_down"><use xlink:href="#gdoc_keyboard_arrow_down"/></svg></label><ul class=gdoc-nav__list><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E6%95%B0%E6%8D%AE%E5%BA%93/Postgresql/01-postgresql%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8/ class=gdoc-nav__entry>01 Postgresql基础入门</a></span></label></li></ul></li></ul></li><li><input type=checkbox class=gdoc-nav__toggle id=navtree-26f9a940>
<label for=navtree-26f9a940 class="flex justify-between align-center"><span class=flex>测试系列</span><svg class="gdoc-icon toggle gdoc_keyboard_arrow_left"><use xlink:href="#gdoc_keyboard_arrow_left"/></svg><svg class="gdoc-icon toggle gdoc_keyboard_arrow_down"><use xlink:href="#gdoc_keyboard_arrow_down"/></svg></label><ul class=gdoc-nav__list><li><input type=checkbox class=gdoc-nav__toggle id=navtree-daaf8602>
<label for=navtree-daaf8602 class="flex justify-between align-center"><span class=flex>Jmeter</span><svg class="gdoc-icon toggle gdoc_keyboard_arrow_left"><use xlink:href="#gdoc_keyboard_arrow_left"/></svg><svg class="gdoc-icon toggle gdoc_keyboard_arrow_down"><use xlink:href="#gdoc_keyboard_arrow_down"/></svg></label><ul class=gdoc-nav__list><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E6%B5%8B%E8%AF%95/Jmeter/00-Jmeter%E5%85%A5%E9%97%A8%E4%BB%8B%E7%BB%8D/ class=gdoc-nav__entry>00 Jmeter入门介绍</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E6%B5%8B%E8%AF%95/Jmeter/01-Jmeter%E5%85%83%E4%BB%B6%E4%BD%9C%E7%94%A8%E5%9F%9F%E4%B8%8E%E5%8F%98%E9%87%8F/ class=gdoc-nav__entry>01 Jmeter元件作用域与变量</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E6%B5%8B%E8%AF%95/Jmeter/02-Jmeter%E8%84%9A%E6%9C%AC%E5%BD%95%E5%88%B6/ class=gdoc-nav__entry>02 Jmeter脚本录制</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E6%B5%8B%E8%AF%95/Jmeter/03-Jmeter%E9%9B%86%E5%90%88%E7%82%B9%E6%8A%80%E6%9C%AF/ class=gdoc-nav__entry>03 Jmeter集合点技术</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E6%B5%8B%E8%AF%95/Jmeter/04-Jmeter%E6%A3%80%E6%9F%A5%E7%82%B9-%E6%96%AD%E8%A8%80/ class=gdoc-nav__entry>04 Jmeter检查点 断言</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E6%B5%8B%E8%AF%95/Jmeter/05-Jmeter%E7%9B%91%E5%90%AC%E5%99%A8/ class=gdoc-nav__entry>05 Jmeter监听器</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E6%B5%8B%E8%AF%95/Jmeter/06-%E9%85%8D%E7%BD%AE%E5%85%83%E4%BB%B6-%E5%8F%82%E6%95%B0%E5%8C%96-CSV%E6%96%87%E4%BB%B6/ class=gdoc-nav__entry>06 配置元件 参数化 Csv文件</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E6%B5%8B%E8%AF%95/Jmeter/07-%E9%85%8D%E7%BD%AE%E5%85%83%E4%BB%B6-HTTP%E4%BF%A1%E6%81%AF%E5%A4%B4%E9%85%8D%E7%BD%AE%E5%85%83%E4%BB%B6/ class=gdoc-nav__entry>07 配置元件 Http信息头配置元件</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E6%B5%8B%E8%AF%95/Jmeter/08-%E9%85%8D%E7%BD%AE%E5%85%83%E4%BB%B6-HTTPCookie%E7%AE%A1%E7%90%86%E5%99%A8/ class=gdoc-nav__entry>08 配置元件 HTTP Cookie管理器</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E6%B5%8B%E8%AF%95/Jmeter/09-%E9%85%8D%E7%BD%AE%E5%85%83%E4%BB%B6-HTTP%E7%BC%93%E5%AD%98%E7%AE%A1%E7%90%86%E5%99%A8/ class=gdoc-nav__entry>09 配置元件 Http缓存管理器</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E6%B5%8B%E8%AF%95/Jmeter/10-%E9%85%8D%E7%BD%AE%E5%85%83%E4%BB%B6-HTTP%E8%AF%B7%E6%B1%82%E9%BB%98%E8%AE%A4%E5%80%BC/ class=gdoc-nav__entry>10 配置元件 Http请求默认值</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E6%B5%8B%E8%AF%95/Jmeter/11-%E9%85%8D%E7%BD%AE%E5%85%83%E4%BB%B6-%E8%AE%A1%E6%95%B0%E5%99%A8/ class=gdoc-nav__entry>11 配置元件 计数器</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E6%B5%8B%E8%AF%95/Jmeter/12-%E9%80%BB%E8%BE%91%E6%8E%A7%E5%88%B6%E5%99%A8/ class=gdoc-nav__entry>12 逻辑控制器</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E6%B5%8B%E8%AF%95/Jmeter/13-%E5%85%B3%E8%81%94%E6%8A%80%E6%9C%AF-%E6%AD%A3%E5%88%99%E5%8C%B9%E9%85%8D%E6%8F%90%E5%8F%96%E5%99%A8/ class=gdoc-nav__entry>13 关联技术 正则匹配提取器</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E6%B5%8B%E8%AF%95/Jmeter/14-JDBC-%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/ class=gdoc-nav__entry>14 Jdbc 连接数据库</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E6%B5%8B%E8%AF%95/Jmeter/15-%E8%B0%83%E7%94%A8OS%E7%B3%BB%E7%BB%9F%E5%91%BD%E4%BB%A4-OS%E8%BF%9B%E7%A8%8B%E5%8F%96%E6%A0%B7%E5%99%A8/ class=gdoc-nav__entry>15 调用 Os系统命令 Os进程取样器</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E6%B5%8B%E8%AF%95/Jmeter/16-%E6%8F%92%E4%BB%B6%E6%8A%80%E6%9C%AF/ class=gdoc-nav__entry>16 插件技术</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E6%B5%8B%E8%AF%95/Jmeter/17-%E5%85%B6%E4%BB%96/ class=gdoc-nav__entry>17 其他</a></span></label></li></ul></li></ul></li><li><input type=checkbox class=gdoc-nav__toggle id=navtree-bd19e54f>
<label for=navtree-bd19e54f class="flex justify-between align-center"><span class=flex>网络系列</span><svg class="gdoc-icon toggle gdoc_keyboard_arrow_left"><use xlink:href="#gdoc_keyboard_arrow_left"/></svg><svg class="gdoc-icon toggle gdoc_keyboard_arrow_down"><use xlink:href="#gdoc_keyboard_arrow_down"/></svg></label><ul class=gdoc-nav__list><li><input type=checkbox class=gdoc-nav__toggle id=navtree-2a86f350>
<label for=navtree-2a86f350 class="flex justify-between align-center"><span class=flex>01 网络配置工具</span><svg class="gdoc-icon toggle gdoc_keyboard_arrow_left"><use xlink:href="#gdoc_keyboard_arrow_left"/></svg><svg class="gdoc-icon toggle gdoc_keyboard_arrow_down"><use xlink:href="#gdoc_keyboard_arrow_down"/></svg></label><ul class=gdoc-nav__list><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BD%91%E7%BB%9C/01-%E7%BD%91%E7%BB%9C%E9%85%8D%E7%BD%AE%E5%B7%A5%E5%85%B7/01-ip-%E5%91%BD%E4%BB%A4%E7%94%A8%E6%B3%95%E5%BD%92%E7%BA%B3/ class=gdoc-nav__entry>01 IP 命令用法归纳</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BD%91%E7%BB%9C/01-%E7%BD%91%E7%BB%9C%E9%85%8D%E7%BD%AE%E5%B7%A5%E5%85%B7/02-ip%E5%91%BD%E4%BB%A4%E4%B9%8BLinux%E7%AD%96%E7%95%A5%E8%B7%AF%E7%94%B1ip-rule-ip-route/ class=gdoc-nav__entry>02 Ip命令之 Linux策略路由ip Rule IP Route</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BD%91%E7%BB%9C/01-%E7%BD%91%E7%BB%9C%E9%85%8D%E7%BD%AE%E5%B7%A5%E5%85%B7/03-ip%E5%91%BD%E4%BB%A4%E4%B9%8Broute%E8%B7%AF%E7%94%B1%E6%9D%A1%E7%9B%AE%E7%9A%84%E5%90%AB%E4%B9%89/ class=gdoc-nav__entry>03 Ip命令之route路由条目的含义</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BD%91%E7%BB%9C/01-%E7%BD%91%E7%BB%9C%E9%85%8D%E7%BD%AE%E5%B7%A5%E5%85%B7/04-nmcli%E5%91%BD%E4%BB%A4/ class=gdoc-nav__entry>04 Nmcli命令</a></span></label></li></ul></li><li><input type=checkbox class=gdoc-nav__toggle id=navtree-28df12dd>
<label for=navtree-28df12dd class="flex justify-between align-center"><span class=flex>02 Iptables系列</span><svg class="gdoc-icon toggle gdoc_keyboard_arrow_left"><use xlink:href="#gdoc_keyboard_arrow_left"/></svg><svg class="gdoc-icon toggle gdoc_keyboard_arrow_down"><use xlink:href="#gdoc_keyboard_arrow_down"/></svg></label><ul class=gdoc-nav__list><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BD%91%E7%BB%9C/02-Iptables%E7%B3%BB%E5%88%97/01-iptables%E6%A6%82%E5%BF%B5/ class=gdoc-nav__entry>01 Iptables概念</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BD%91%E7%BB%9C/02-Iptables%E7%B3%BB%E5%88%97/02-iptables%E4%B9%8B%E8%A7%84%E5%88%99%E6%9F%A5%E8%AF%A2/ class=gdoc-nav__entry>02 Iptables之规则查询</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BD%91%E7%BB%9C/02-Iptables%E7%B3%BB%E5%88%97/03-iptables%E4%B9%8B%E8%A7%84%E5%88%99%E7%AE%A1%E7%90%86-%E5%A2%9E%E5%88%A0%E6%94%B9/ class=gdoc-nav__entry>03 Iptables之规则管理 增删改</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BD%91%E7%BB%9C/02-Iptables%E7%B3%BB%E5%88%97/04-iptables%E4%B9%8B%E5%8C%B9%E9%85%8D%E6%9D%A1%E4%BB%B6%E5%8F%8Atcp%E6%89%A9%E5%B1%95%E6%A8%A1%E5%9D%97multiport%E6%89%A9%E5%B1%95%E6%A8%A1%E5%9D%97/ class=gdoc-nav__entry>04 Iptables之匹配条件及tcp扩展模块multiport扩展模块</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BD%91%E7%BB%9C/02-Iptables%E7%B3%BB%E5%88%97/05-iptables%E4%B9%8B%E5%B8%B8%E7%94%A8%E6%89%A9%E5%B1%95%E6%A8%A1%E5%9D%97/ class=gdoc-nav__entry>05 Iptables之常用扩展模块</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BD%91%E7%BB%9C/02-Iptables%E7%B3%BB%E5%88%97/06-iptables%E4%B9%8Btcp%E6%A8%A1%E5%9D%97%E6%89%A9%E5%B1%95%E5%8C%B9%E9%85%8D%E6%9D%A1%E4%BB%B6tcp-flags/ class=gdoc-nav__entry>06 Iptables之tcp模块扩展匹配条件tcp Flags</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BD%91%E7%BB%9C/02-Iptables%E7%B3%BB%E5%88%97/07-iptables%E4%B9%8Budp%E6%89%A9%E5%B1%95%E6%A8%A1%E5%9D%97%E4%B8%8Eicmp%E6%89%A9%E5%B1%95%E6%A8%A1%E5%9D%97/ class=gdoc-nav__entry>07 Iptables之udp扩展模块与icmp扩展模块</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BD%91%E7%BB%9C/02-Iptables%E7%B3%BB%E5%88%97/08-iptables%E4%B9%8Bstate%E6%89%A9%E5%B1%95%E6%A8%A1%E5%9D%97/ class=gdoc-nav__entry>08 Iptables之state扩展模块</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BD%91%E7%BB%9C/02-Iptables%E7%B3%BB%E5%88%97/09-iptables%E4%B9%8B%E9%BB%91%E7%99%BD%E5%90%8D%E5%8D%95%E6%9C%BA%E5%88%B6/ class=gdoc-nav__entry>09 Iptables之黑白名单机制</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BD%91%E7%BB%9C/02-Iptables%E7%B3%BB%E5%88%97/10-iptables%E4%B9%8B%E8%87%AA%E5%AE%9A%E4%B9%89%E9%93%BE/ class=gdoc-nav__entry>10 Iptables之自定义链</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BD%91%E7%BB%9C/02-Iptables%E7%B3%BB%E5%88%97/11-iptables%E4%B9%8B%E7%BD%91%E7%BB%9C%E9%98%B2%E7%81%AB%E5%A2%99/ class=gdoc-nav__entry>11 Iptables之网络防火墙</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BD%91%E7%BB%9C/02-Iptables%E7%B3%BB%E5%88%97/12-iptables%E4%B9%8B%E5%8A%A8%E4%BD%9C%E6%80%BB%E7%BB%93md/ class=gdoc-nav__entry>12 Iptables之动作总结md</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BD%91%E7%BB%9C/02-Iptables%E7%B3%BB%E5%88%97/13-iptables%E4%B9%8B%E5%B8%B8%E7%94%A8%E5%A5%97%E8%B7%AF/ class=gdoc-nav__entry>13 Iptables之常用套路</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BD%91%E7%BB%9C/02-Iptables%E7%B3%BB%E5%88%97/14-%E5%85%B6%E4%BB%96%E6%89%A9%E5%B1%95%E6%A8%A1%E5%9D%97/ class=gdoc-nav__entry>14 其他扩展模块</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BD%91%E7%BB%9C/02-Iptables%E7%B3%BB%E5%88%97/15-iptables-ipset%E6%A8%A1%E5%9D%97%E5%8F%8Aipset%E4%BD%BF%E7%94%A8/ class=gdoc-nav__entry>15 Iptables Ipset模块及ipset使用</a></span></label></li></ul></li><li><input type=checkbox class=gdoc-nav__toggle id=navtree-65d18051>
<label for=navtree-65d18051 class="flex justify-between align-center"><span class=flex>03 Tcpdump及抓包专题</span><svg class="gdoc-icon toggle gdoc_keyboard_arrow_left"><use xlink:href="#gdoc_keyboard_arrow_left"/></svg><svg class="gdoc-icon toggle gdoc_keyboard_arrow_down"><use xlink:href="#gdoc_keyboard_arrow_down"/></svg></label><ul class=gdoc-nav__list><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BD%91%E7%BB%9C/03-Tcpdump%E5%8F%8A%E6%8A%93%E5%8C%85%E4%B8%93%E9%A2%98/02-tcpdump%E9%AB%98%E7%BA%A7%E8%BF%87%E6%BB%A4/ class=gdoc-nav__entry>02 Tcpdump高级过滤</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BD%91%E7%BB%9C/03-Tcpdump%E5%8F%8A%E6%8A%93%E5%8C%85%E4%B8%93%E9%A2%98/03-Wireshark%E8%AE%BE%E7%BD%AE%E8%A7%A3%E6%9E%90%E5%B1%95%E7%A4%BAVxlan%E5%8D%8F%E8%AE%AE/ class=gdoc-nav__entry>03 Wireshark设置解析展示 Vxlan协议</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BD%91%E7%BB%9C/03-Tcpdump%E5%8F%8A%E6%8A%93%E5%8C%85%E4%B8%93%E9%A2%98/04-tshark/ class=gdoc-nav__entry>04 Tshark</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BD%91%E7%BB%9C/03-Tcpdump%E5%8F%8A%E6%8A%93%E5%8C%85%E4%B8%93%E9%A2%98/01-tcpdump%E5%88%9D%E7%BA%A7/ class=gdoc-nav__entry>01-tcmpdump初级使用</a></span></label></li></ul></li><li><input type=checkbox class=gdoc-nav__toggle id=navtree-1ac268fb>
<label for=navtree-1ac268fb class="flex justify-between align-center"><span class=flex>04 Tcp Ip网络通信协议</span><svg class="gdoc-icon toggle gdoc_keyboard_arrow_left"><use xlink:href="#gdoc_keyboard_arrow_left"/></svg><svg class="gdoc-icon toggle gdoc_keyboard_arrow_down"><use xlink:href="#gdoc_keyboard_arrow_down"/></svg></label><ul class=gdoc-nav__list><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BD%91%E7%BB%9C/04-TCP-IP%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/1-TCP%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E4%B8%8E%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B%E8%AF%A6%E8%A7%A3%E5%8A%A8%E7%94%BB/ class=gdoc-nav__entry>1 Tcp三次握手与四次挥手详解[动画]</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BD%91%E7%BB%9C/04-TCP-IP%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/2-OSI%E5%8F%82%E8%80%83%E6%A8%A1%E5%9E%8B%E4%B8%8ETCPIP%E6%A8%A1%E5%9E%8B/ class=gdoc-nav__entry>2 Osi参考模型与 Tcp Ip模型</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BD%91%E7%BB%9C/04-TCP-IP%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/3-%E8%AE%B0%E4%B8%80%E6%AC%A1TCPIP%E5%AE%8C%E6%95%B4%E7%9A%84%E6%95%B0%E6%8D%AE%E5%8C%85%E4%BC%A0%E8%BE%93%E8%BF%87%E7%A8%8B/ class=gdoc-nav__entry>3 记一次 Tcp Ip完整的数据包传输过程</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BD%91%E7%BB%9C/04-TCP-IP%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/TIME_WAIT%E7%8A%B6%E6%80%81%E8%BF%9E%E6%8E%A5%E8%BF%87%E5%A4%9A/ class=gdoc-nav__entry>Time Wait状态连接过多</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BD%91%E7%BB%9C/04-TCP-IP%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/%E5%86%85%E6%A0%B8%E5%8F%82%E6%95%B0ip_forward%E5%88%A8%E6%A0%B9%E9%97%AE%E5%BA%95/ class=gdoc-nav__entry>内核参数ip Forward刨根问底</a></span></label></li></ul></li><li><input type=checkbox class=gdoc-nav__toggle id=navtree-35f32e09>
<label for=navtree-35f32e09 class="flex justify-between align-center"><span class=flex>05 网络虚拟化 Linux Bridge Ovs Netns Veth Pair</span><svg class="gdoc-icon toggle gdoc_keyboard_arrow_left"><use xlink:href="#gdoc_keyboard_arrow_left"/></svg><svg class="gdoc-icon toggle gdoc_keyboard_arrow_down"><use xlink:href="#gdoc_keyboard_arrow_down"/></svg></label><ul class=gdoc-nav__list><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BD%91%E7%BB%9C/05-%E7%BD%91%E7%BB%9C%E8%99%9A%E6%8B%9F%E5%8C%96-linuxBridge-ovs-netns-vethPair/00-ovs%E9%A2%84%E5%A4%87%E7%9F%A5%E8%AF%86/ class=gdoc-nav__entry>00 Ovs预备知识</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BD%91%E7%BB%9C/05-%E7%BD%91%E7%BB%9C%E8%99%9A%E6%8B%9F%E5%8C%96-linuxBridge-ovs-netns-vethPair/00-%E7%BD%91%E7%BB%9C%E8%99%9A%E6%8B%9F%E5%8C%96%E9%A2%84%E5%A4%87%E7%9F%A5%E8%AF%86/ class=gdoc-nav__entry>00 网络虚拟化预备知识</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BD%91%E7%BB%9C/05-%E7%BD%91%E7%BB%9C%E8%99%9A%E6%8B%9F%E5%8C%96-linuxBridge-ovs-netns-vethPair/01-LinuxBridge%E5%AE%9E%E7%8E%B0%E5%8D%95%E5%AE%BF%E4%B8%BB%E6%9C%BA%E4%B8%8A%E5%A4%9A%E4%B8%AA%E8%99%9A%E6%8B%9F%E6%9C%BA%E9%80%9A%E4%BF%A1/ class=gdoc-nav__entry>01 Linux Bridge实现单宿主机上多个虚拟机通信</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BD%91%E7%BB%9C/05-%E7%BD%91%E7%BB%9C%E8%99%9A%E6%8B%9F%E5%8C%96-linuxBridge-ovs-netns-vethPair/02-ovs%E6%A1%A5%E4%B8%8EVLAN/ class=gdoc-nav__entry>02 Ovs桥与 VLAN</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BD%91%E7%BB%9C/05-%E7%BD%91%E7%BB%9C%E8%99%9A%E6%8B%9F%E5%8C%96-linuxBridge-ovs-netns-vethPair/03-ovs%E6%A1%A5%E4%B8%8EGRE%E9%9A%A7%E9%81%93/ class=gdoc-nav__entry>03 Ovs桥与 Gre隧道</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BD%91%E7%BB%9C/05-%E7%BD%91%E7%BB%9C%E8%99%9A%E6%8B%9F%E5%8C%96-linuxBridge-ovs-netns-vethPair/04-ovs%E6%A1%A5%E4%B8%8EVXLAN%E9%9A%A7%E9%81%93/ class=gdoc-nav__entry>04 Ovs桥与 Vxlan隧道</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BD%91%E7%BB%9C/05-%E7%BD%91%E7%BB%9C%E8%99%9A%E6%8B%9F%E5%8C%96-linuxBridge-ovs-netns-vethPair/05-%E5%AE%9E%E7%8E%B0Floating-IP/ class=gdoc-nav__entry>05 实现 Floating IP</a></span></label></li></ul></li><li><input type=checkbox class=gdoc-nav__toggle id=navtree-e4a7d866>
<label for=navtree-e4a7d866 class="flex justify-between align-center"><span class=flex>06 路由交换技术</span><svg class="gdoc-icon toggle gdoc_keyboard_arrow_left"><use xlink:href="#gdoc_keyboard_arrow_left"/></svg><svg class="gdoc-icon toggle gdoc_keyboard_arrow_down"><use xlink:href="#gdoc_keyboard_arrow_down"/></svg></label><ul class=gdoc-nav__list><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BD%91%E7%BB%9C/06-%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E6%8A%80%E6%9C%AF/1-%E4%BA%A4%E6%8D%A2%E6%9C%BA%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86%E8%AF%A6%E8%A7%A3/ class=gdoc-nav__entry>1 交换机工作原理详解</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BD%91%E7%BB%9C/06-%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E6%8A%80%E6%9C%AF/2-%E4%BA%A4%E6%8D%A2%E6%9C%BA%E9%85%8D%E7%BD%AEVLAN%E4%BA%92%E8%AE%BF/ class=gdoc-nav__entry>2 交换机配置 Vlan互访</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/%E7%BD%91%E7%BB%9C/06-%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E6%8A%80%E6%9C%AF/3-%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1%E7%89%B9%E6%80%A7%E8%AF%A6%E8%A7%A3/ class=gdoc-nav__entry>3 静态路由特性详解</a></span></label></li></ul></li></ul></li><li><input type=checkbox class=gdoc-nav__toggle id=navtree-d2d99c78>
<label for=navtree-d2d99c78 class="flex justify-between align-center"><span class=flex>Linux基础</span><svg class="gdoc-icon toggle gdoc_keyboard_arrow_left"><use xlink:href="#gdoc_keyboard_arrow_left"/></svg><svg class="gdoc-icon toggle gdoc_keyboard_arrow_down"><use xlink:href="#gdoc_keyboard_arrow_down"/></svg></label><ul class=gdoc-nav__list><li><input type=checkbox class=gdoc-nav__toggle id=navtree-c088099b>
<label for=navtree-c088099b class="flex justify-between align-center"><span class=flex>Ntp服务</span><svg class="gdoc-icon toggle gdoc_keyboard_arrow_left"><use xlink:href="#gdoc_keyboard_arrow_left"/></svg><svg class="gdoc-icon toggle gdoc_keyboard_arrow_down"><use xlink:href="#gdoc_keyboard_arrow_down"/></svg></label><ul class=gdoc-nav__list><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/Linux%E5%9F%BA%E7%A1%80/NTP%E6%9C%8D%E5%8A%A1/Chrony%E8%AE%BE%E7%BD%AE%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%9B%86%E7%BE%A4%E5%90%8C%E6%AD%A5%E6%97%B6%E9%97%B4/ class=gdoc-nav__entry>Chrony设置服务器集群同步时间</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/Linux%E5%9F%BA%E7%A1%80/NTP%E6%9C%8D%E5%8A%A1/ntp%E6%9C%8D%E5%8A%A1/ class=gdoc-nav__entry>Ntp服务</a></span></label></li></ul></li><li><input type=checkbox class=gdoc-nav__toggle id=navtree-add49447>
<label for=navtree-add49447 class="flex justify-between align-center"><span class=flex>Pxe</span><svg class="gdoc-icon toggle gdoc_keyboard_arrow_left"><use xlink:href="#gdoc_keyboard_arrow_left"/></svg><svg class="gdoc-icon toggle gdoc_keyboard_arrow_down"><use xlink:href="#gdoc_keyboard_arrow_down"/></svg></label><ul class=gdoc-nav__list><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/Linux%E5%9F%BA%E7%A1%80/PXE/dnsmasq%E8%AF%A6%E8%A7%A3/ class=gdoc-nav__entry>Dnsmasq详解</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/Linux%E5%9F%BA%E7%A1%80/PXE/pxe-dnsmasq/ class=gdoc-nav__entry>Pxe Dnsmasq</a></span></label></li></ul></li><li><input type=checkbox class=gdoc-nav__toggle id=navtree-1717e74d>
<label for=navtree-1717e74d class="flex justify-between align-center"><span class=flex>性能排查工具</span><svg class="gdoc-icon toggle gdoc_keyboard_arrow_left"><use xlink:href="#gdoc_keyboard_arrow_left"/></svg><svg class="gdoc-icon toggle gdoc_keyboard_arrow_down"><use xlink:href="#gdoc_keyboard_arrow_down"/></svg></label><ul class=gdoc-nav__list><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/Linux%E5%9F%BA%E7%A1%80/%E6%80%A7%E8%83%BD%E6%8E%92%E6%9F%A5%E5%B7%A5%E5%85%B7/11-vmstat%E5%86%85%E5%AD%98%E4%BF%A1%E6%81%AF/ class=gdoc-nav__entry>11 Vmstat内存信息</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/Linux%E5%9F%BA%E7%A1%80/%E6%80%A7%E8%83%BD%E6%8E%92%E6%9F%A5%E5%B7%A5%E5%85%B7/12-%E7%A3%81%E7%9B%98%E6%80%A7%E8%83%BD%E7%93%B6%E9%A2%88%E6%8E%92%E6%9F%A5/ class=gdoc-nav__entry>12 磁盘性能瓶颈排查</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/Linux%E5%9F%BA%E7%A1%80/%E6%80%A7%E8%83%BD%E6%8E%92%E6%9F%A5%E5%B7%A5%E5%85%B7/13-%E5%A6%82%E4%BD%95%E7%94%A89%E6%9D%A1%E5%91%BD%E4%BB%A4%E5%9C%A8%E4%B8%80%E5%88%86%E9%92%9F%E5%86%85%E6%A3%80%E6%9F%A5Linux%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%80%A7%E8%83%BD/ class=gdoc-nav__entry>13 如何用9条命令在一分钟内检查 Linux服务器性能？</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/Linux%E5%9F%BA%E7%A1%80/%E6%80%A7%E8%83%BD%E6%8E%92%E6%9F%A5%E5%B7%A5%E5%85%B7/14-fio-%E6%B5%8B%E8%AF%95%E7%A3%81%E7%9B%98%E7%9A%84iops/ class=gdoc-nav__entry>14 Fio 测试磁盘的iops</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/Linux%E5%9F%BA%E7%A1%80/%E6%80%A7%E8%83%BD%E6%8E%92%E6%9F%A5%E5%B7%A5%E5%85%B7/15-%E5%A6%82%E4%BD%95%E7%9B%91%E6%B5%8B-Linux-%E7%9A%84%E7%A3%81%E7%9B%98-I_O-%E6%80%A7%E8%83%BD/ class=gdoc-nav__entry>15 如何监测 Linux 的磁盘 I O 性能</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/Linux%E5%9F%BA%E7%A1%80/%E6%80%A7%E8%83%BD%E6%8E%92%E6%9F%A5%E5%B7%A5%E5%85%B7/%E5%88%86%E6%9E%90%E7%A3%81%E7%9B%98util%E7%89%B9%E5%88%AB%E9%AB%98/ class=gdoc-nav__entry>分析磁盘%Util特别高</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/Linux%E5%9F%BA%E7%A1%80/%E6%80%A7%E8%83%BD%E6%8E%92%E6%9F%A5%E5%B7%A5%E5%85%B7/%E7%BD%91%E7%BB%9C%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7iperf3/ class=gdoc-nav__entry>网络性能测试工具iperf3</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/Linux%E5%9F%BA%E7%A1%80/%E6%80%A7%E8%83%BD%E6%8E%92%E6%9F%A5%E5%B7%A5%E5%85%B7/%E7%BD%91%E7%BB%9C%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7netperf/ class=gdoc-nav__entry>网络性能测试工具netperf</a></span></label></li></ul></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/Linux%E5%9F%BA%E7%A1%80/03-awk/ class=gdoc-nav__entry>03 Awk</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/Linux%E5%9F%BA%E7%A1%80/debian%E8%BD%AF%E4%BB%B6%E6%BA%90source.list%E6%96%87%E4%BB%B6%E6%A0%BC%E5%BC%8F%E8%AF%B4%E6%98%8E/ class=gdoc-nav__entry>Debian软件源source.List文件格式说明</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/Linux%E5%9F%BA%E7%A1%80/ipmitool%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3/ class=gdoc-nav__entry>Ipmitool命令详解</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/Linux%E5%9F%BA%E7%A1%80/jumpserver%E4%BD%BF%E7%94%A8%E6%96%87%E6%A1%A3/ class=gdoc-nav__entry>Jumpserver使用文档</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/Linux%E5%9F%BA%E7%A1%80/linux%E4%B8%ADinode%E5%8C%85%E5%90%AB%E4%BB%80%E4%B9%88%E5%86%85%E5%AE%B9/ class=gdoc-nav__entry>Linux中inode包含什么内容</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/Linux%E5%9F%BA%E7%A1%80/Linux%E5%AE%89%E8%A3%85%E5%AD%97%E4%BD%93/ class=gdoc-nav__entry>Linux安装字体</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/Linux%E5%9F%BA%E7%A1%80/lvm%E6%93%8D%E4%BD%9C/ class=gdoc-nav__entry>Lvm操作</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/Linux%E5%9F%BA%E7%A1%80/Makefile%E5%85%A5%E9%97%A8/ class=gdoc-nav__entry>Makefile入门</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/Linux%E5%9F%BA%E7%A1%80/s3cmd/ class=gdoc-nav__entry>S3cmd</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/Linux%E5%9F%BA%E7%A1%80/ssh%E5%85%AC%E9%92%A5%E9%85%8D%E7%BD%AE/ class=gdoc-nav__entry>Ssh公钥配置</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/Linux%E5%9F%BA%E7%A1%80/ssh%E5%AE%A2%E6%88%B7%E7%AB%AF%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/ class=gdoc-nav__entry>Ssh客户端配置文件</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/Linux%E5%9F%BA%E7%A1%80/Supervisor%E4%BD%BF%E7%94%A8%E8%AF%A6%E8%A7%A3/ class=gdoc-nav__entry>Supervisor使用详解</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/Linux%E5%9F%BA%E7%A1%80/tcTraffic-Control%E5%91%BD%E4%BB%A4linux%E8%87%AA%E5%B8%A6%E9%AB%98%E7%BA%A7%E6%B5%81%E6%8E%A7/ class=gdoc-nav__entry>Tc( Traffic Control)命令—linux自带高级流控</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/Linux%E5%9F%BA%E7%A1%80/timedatectl%E5%91%BD%E4%BB%A4%E6%97%B6%E9%97%B4%E6%97%B6%E5%8C%BA%E6%93%8D%E4%BD%9C%E8%AF%A6%E8%A7%A3/ class=gdoc-nav__entry>Timedatectl命令时间时区操作详解</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/Linux%E5%9F%BA%E7%A1%80/tmux/ class=gdoc-nav__entry>Tmux</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/Linux%E5%9F%BA%E7%A1%80/ubuntu%E5%86%85%E6%A0%B8%E5%8D%87%E7%BA%A7%E4%B8%8Egrub2/ class=gdoc-nav__entry>Ubuntu内核升级与grub2</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/Linux%E5%9F%BA%E7%A1%80/vm.swappiness%E5%8F%82%E6%95%B0%E5%9C%A8%E5%86%85%E5%AD%98%E4%B8%8E%E4%BA%A4%E6%8D%A2%E5%88%86%E5%8C%BA%E4%B9%8B%E9%97%B4%E4%BC%98%E5%8C%96%E4%BD%9C%E7%94%A8/ class=gdoc-nav__entry>Vm.Swappiness参数在内存与交换分区之间优化作用</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/Linux%E5%9F%BA%E7%A1%80/%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%9F%A5%E7%9C%8B%E5%B7%A5%E5%85%B7hexdump%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3/ class=gdoc-nav__entry>二进制查看工具hexdump命令详解</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/Linux%E5%9F%BA%E7%A1%80/%E4%BD%BF%E7%94%A8axel%E5%92%8Caria2c%E5%BC%95%E7%88%86%E4%BD%A0%E7%9A%84%E4%B8%8B%E8%BD%BD/ class=gdoc-nav__entry>使用axel和aria2c引爆你的下载！</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/Linux%E5%9F%BA%E7%A1%80/%E6%89%87%E5%8C%BA-%E5%9D%97-%E6%AE%B5-page%E7%9A%84%E5%85%B3%E7%B3%BB/ class=gdoc-nav__entry>扇区 块 段 Page的关系</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/Linux%E5%9F%BA%E7%A1%80/%E8%AE%BE%E8%AE%A1shell%E8%84%9A%E6%9C%AC%E9%80%89%E9%A1%B9getopt/ class=gdoc-nav__entry>设计shell脚本选项getopt</a></span></label></li></ul></li><li><input type=checkbox class=gdoc-nav__toggle id=navtree-fb4e4a6e>
<label for=navtree-fb4e4a6e class="flex justify-between align-center"><span class=flex>Alpine</span><svg class="gdoc-icon toggle gdoc_keyboard_arrow_left"><use xlink:href="#gdoc_keyboard_arrow_left"/></svg><svg class="gdoc-icon toggle gdoc_keyboard_arrow_down"><use xlink:href="#gdoc_keyboard_arrow_down"/></svg></label><ul class=gdoc-nav__list><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/Alpine/01-Alpine%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/ class=gdoc-nav__entry>01 Alpine安装与使用</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/Alpine/02-Alpine%E5%8C%85%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7-apk/ class=gdoc-nav__entry>02 Alpine包管理工具 Apk</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/Alpine/03-Alpine%E6%9C%8D%E5%8A%A1%E7%AE%A1%E7%90%86/ class=gdoc-nav__entry>03 Alpine服务管理</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/Alpine/04-Alpine%E5%AE%89%E8%A3%85%E5%AD%97%E4%BD%93/ class=gdoc-nav__entry>04 Alpine安装字体</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/Alpine/05-Alpine%E5%88%B6%E4%BD%9CJDK8%E9%95%9C%E5%83%8F%E7%9A%84%E5%9D%91/ class=gdoc-nav__entry>05 Alpine制作 Jdk8镜像的坑</a></span></label></li></ul></li><li><input type=checkbox class=gdoc-nav__toggle id=navtree-f11db7e3>
<label for=navtree-f11db7e3 class="flex justify-between align-center"><span class=flex>Nginx</span><svg class="gdoc-icon toggle gdoc_keyboard_arrow_left"><use xlink:href="#gdoc_keyboard_arrow_left"/></svg><svg class="gdoc-icon toggle gdoc_keyboard_arrow_down"><use xlink:href="#gdoc_keyboard_arrow_down"/></svg></label><ul class=gdoc-nav__list><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/Nginx/00-ubuntu%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85nginx/ class=gdoc-nav__entry>00 Ubuntu编译安装nginx</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/Nginx/01-Nginx%E9%85%8D%E7%BD%AE/ class=gdoc-nav__entry>01 Nginx配置</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/Nginx/02-Nginx%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD%E4%B8%BE%E4%BE%8B%E8%A7%A3%E6%9E%90/ class=gdoc-nav__entry>02 Nginx常用功能举例解析</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/Nginx/03-%E4%BD%BF%E7%94%A8nginx%E5%81%9Ayum%E4%BB%A3%E7%90%86/ class=gdoc-nav__entry>03 使用nginx做yum代理</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/Nginx/04-nginx%E9%85%8D%E7%BD%AEWebSocket/ class=gdoc-nav__entry>04 Nginx配置 Web Socket</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/Nginx/05-nginx%E4%B8%AD%E7%9A%84resolver%E5%92%8Cdns%E8%A7%A3%E6%9E%90%E7%BC%93%E5%AD%98%E7%9A%84%E9%97%AE%E9%A2%98/ class=gdoc-nav__entry>05 Nginx中的resolver和dns解析缓存的问题</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/Nginx/06-client_header_buffer_size%E5%92%8Clarge_client_header_buffers%E5%AD%A6%E4%B9%A0414-Request-URI-too-large/ class=gdoc-nav__entry>06 Client Header Buffer Size和large Client Header Buffers学习(414 Request URI Too Large)</a></span></label></li></ul></li><li><input type=checkbox class=gdoc-nav__toggle id=navtree-36364493>
<label for=navtree-36364493 class="flex justify-between align-center"><span class=flex>Git</span><svg class="gdoc-icon toggle gdoc_keyboard_arrow_left"><use xlink:href="#gdoc_keyboard_arrow_left"/></svg><svg class="gdoc-icon toggle gdoc_keyboard_arrow_down"><use xlink:href="#gdoc_keyboard_arrow_down"/></svg></label><ul class=gdoc-nav__list><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/Git/01-object/ class=gdoc-nav__entry>01 Object</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/Git/02-branch/ class=gdoc-nav__entry>02 Branch</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/Git/03-Git%E5%91%BD%E4%BB%A4%E7%9A%84%E5%8A%A8%E7%94%BB%E5%B1%95%E7%A4%BA%E8%AE%A9%E6%88%91%E4%BB%AC%E5%AD%A6%E4%B9%A0Git%E4%BA%8B%E5%8D%8A%E5%8A%9F%E5%80%8D/ class=gdoc-nav__entry>03 Git命令的动画展示，让我们学习 Git事半功倍</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/Git/04-git%E5%B8%B8%E7%94%A8%E8%AE%BE%E7%BD%AE/ class=gdoc-nav__entry>04 Git常用设置</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/Git/05-git-reset-softhardmixed%E4%B9%8B%E5%8C%BA%E5%88%AB%E6%B7%B1%E8%A7%A3/ class=gdoc-nav__entry>05 Git Reset Soft,hard,mixed之区别深解</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/Git/06-git-stash%E8%AF%A6%E8%A7%A3/ class=gdoc-nav__entry>06 Git Stash详解</a></span></label></li><li><input type=checkbox class=hidden>
<label><span class=flex><a href=/Git/07-lazygit%E4%BD%BF%E7%94%A8%E7%AE%80%E4%BB%8B/ class=gdoc-nav__entry>07 Lazygit使用简介</a></span></label></li></ul></li></ul></section><section class=gdoc-nav--more></section></nav></aside><div class=gdoc-page><div class="gdoc-page__header flex flex-wrap
justify-between" itemprop=breadcrumb><div><svg class="gdoc-icon gdoc_path hidden-mobile"><use xlink:href="#gdoc_path"/></svg><ol class=breadcrumb itemscope itemtype=https://schema.org/BreadcrumbList><li itemprop=itemListElement itemscope itemtype=https://schema.org/ListItem><a itemscope itemtype=https://schema.org/WebPage itemprop=item itemid=/ href=/><span itemprop=name>Welcome to the ljzsdut's notes</span></a><meta itemprop=position content="1"></li><li>/</li><li itemprop=itemListElement itemscope itemtype=https://schema.org/ListItem><a itemscope itemtype=https://schema.org/WebPage itemprop=item itemid=/%E4%BA%91%E5%8E%9F%E7%94%9F/ href=/%E4%BA%91%E5%8E%9F%E7%94%9F/><span itemprop=name>云原生</span></a><meta itemprop=position content="2"></li><li>/</li><li itemprop=itemListElement itemscope itemtype=https://schema.org/ListItem><a itemscope itemtype=https://schema.org/WebPage itemprop=item itemid=/%E4%BA%91%E5%8E%9F%E7%94%9F/Prometheus/ href=/%E4%BA%91%E5%8E%9F%E7%94%9F/Prometheus/><span itemprop=name>Prometheus</span></a><meta itemprop=position content="3"></li><li>/</li><li itemprop=itemListElement itemscope itemtype=https://schema.org/ListItem><span itemprop=name>006 Altermanager配置文件详解</span><meta itemprop=position content="4"></li></ol></div><div><span class=editpage><svg class="gdoc-icon gdoc_code"><use xlink:href="#gdoc_code"/></svg><a href=https://github.com/ljzsdut/mynotes/edit/master/content/%e4%ba%91%e5%8e%9f%e7%94%9f/Prometheus/006-altermanager%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6%e8%af%a6%e8%a7%a3.md>Edit page</a></span></div></div><article class="gdoc-markdown gdoc-markdown__align--left"><h1>006 Altermanager配置文件详解</h1><div class="gdoc-toc gdoc-toc__level--3"><nav id=TableOfContents><ul><li><a href=#alertmanager简介>Alertmanager简介</a></li><li><a href=#alertmanager特性>Alertmanager特性</a><ul><li><a href=#分组>分组</a></li><li><a href=#抑制>抑制</a></li><li><a href=#静默>静默</a></li></ul></li><li><a href=#prometheus告警规则扩展>Prometheus告警规则【扩展】</a><ul><li><a href=#定义告警规则>定义告警规则</a></li><li><a href=#annotationslabel模板化>annotations&label模板化</a></li><li><a href=#查看告警状态>查看告警状态</a></li><li><a href=#实例定义主机监控告警>实例：定义主机监控告警</a></li></ul></li><li><a href=#alertmanager配置概述>Alertmanager配置概述</a></li><li><a href=#自定义altermanager告警模板>自定义altermanager告警模板</a></li><li><a href=#基于标签的告警路由>基于标签的告警路由</a><ul><li><a href=#路由匹配>路由匹配</a></li><li><a href=#告警分组>告警分组</a><ul><li><a href=#group-by><strong>Group By</strong></a></li><li><a href=#group-wait><strong>Group wait</strong></a></li><li><a href=#group-interval><strong>Group Interval</strong></a></li><li><a href=#repeat-interval><strong>Repeat Interval</strong></a></li></ul></li></ul></li><li><a href=#告警接收器receiver>告警接收器Receiver</a><ul><li><a href=#email>Email</a></li><li><a href=#企业微信>企业微信</a></li><li><a href=#钉钉机器人webhook>钉钉机器人(Webhook)</a></li><li><a href=#警报通知模板>警报通知模板</a></li><li><a href=#开源警报组件推荐>开源警报组件推荐</a></li></ul></li><li><a href=#告警通知屏蔽>告警通知屏蔽</a><ul><li><a href=#抑制机制inhibit_rules>抑制机制（inhibit_rules）</a></li><li><a href=#临时静默处理>临时静默处理</a></li></ul></li><li><a href=#使用recoding-rules优化性能>使用Recoding Rules优化性能</a><ul><li><a href=#定义recoding-rules>定义Recoding rules</a></li></ul></li><li><a href=#alertmanager配置文件完整示例>alertmanager配置文件完整示例</a><ul><li><a href=#示例1官方示例>示例1：官方示例</a></li><li><a href=#示例2案例配置>示例2：案例配置</a></li><li><a href=#示例3简单配置>示例3：简单配置</a></li><li><a href=#示例4rancher>示例4：rancher</a></li></ul></li><li><a href=#alertmanager集群高可用部署>alertmanager集群高可用部署</a></li><li><a href=#参考文档>参考文档：</a></li></ul></nav><hr></div><div class=gdoc-page__anchorwrap><h2 id=alertmanager简介>Alertmanager简介
<a data-clipboard-text=https://note.ljzsdut.com/%E4%BA%91%E5%8E%9F%E7%94%9F/Prometheus/006-altermanager%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%A6%E8%A7%A3/#alertmanager简介 class="gdoc-page__anchor clip flex align-center" title="Anchor to: Alertmanager简介" aria-label="Anchor to: Alertmanager简介" href=#alertmanager%e7%ae%80%e4%bb%8b><svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"/></svg></a></h2></div><p>警报一直是整个监控系统中的重要组成部分，Prometheus监控系统中，警报是由独立的2部分组成，<strong>数据采集</strong>（Prometheus）与<strong>警报</strong>（Alertmanager）是分离的2个组件。警报规则在 Prometheus 定义，警报规则触发以后，才会将信息转发到给独立的组件Alertmanager ，经过 Alertmanager 对警报的信息处理后，最终通过接收器发送给指定用户。</p><p><img src=https://cdn.jsdelivr.net/gh/ljzsdut/images@master/default/640-1596597778596.png alt=img></p><p>Prometheus Server端通过静态或者动态配置去拉取部署在k8s或云主机上的各种类别的监控指标数据，然后基于<code>PromQL</code> 对这些已经存储在本地存储<code>TSDB</code> 中的指标，定义阈值警报规则 <code>Rules</code> 。Prometheus会根据配置的参数周期性的对警报规则进行计算， 如果满足警报条件(告警规则评估结果为True)，生产一条警报信息，将其推送到 <strong>Alertmanager</strong> 组件。</p><p><strong>Alertmanager</strong> 收到警报信息之后，会对警告信息进行处理，进行 <strong>去重</strong>、<strong>分组</strong> <code>Group</code> 并将它们通过定义好的路由 <code>Routing</code> 规则路由到正确的接收器 <code>receiver</code>， 比如 <code>Email</code> <code>Slack</code> <code>钉钉、企业微信 Robot（webhook）</code> <code>企业微信</code>等，最终异常事件 <code>Warning</code>、<code>Error</code>通知给定义好的接收人，其中如钉钉是基于第三方通知来实现的，对于通知人定义是在钉钉的第三方组件中配置。此外，它还负责<strong>静默</strong>和<strong>抑制</strong>警报。</p><p><img src=https://cdn.jsdelivr.net/gh/ljzsdut/images@master/default/image-20210521103240431-1621564360625.png alt=image-20210521103240431></p><blockquote><p>【总结】</p><p>告警能力在Prometheus的架构中被划分成两个独立的部分。</p><p>通过在Prometheus中定义AlertRule（告警规则），Prometheus会周期性的对告警规则进行计算，如果满足告警触发条件就会向Alertmanager发送告警信息。</p></blockquote><div class=gdoc-page__anchorwrap><h2 id=alertmanager特性>Alertmanager特性
<a data-clipboard-text=https://note.ljzsdut.com/%E4%BA%91%E5%8E%9F%E7%94%9F/Prometheus/006-altermanager%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%A6%E8%A7%A3/#alertmanager特性 class="gdoc-page__anchor clip flex align-center" title="Anchor to: Alertmanager特性" aria-label="Anchor to: Alertmanager特性" href=#alertmanager%e7%89%b9%e6%80%a7><svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"/></svg></a></h2></div><p>在 <strong>Prometheus</strong> 中， 我们不仅仅可以对单条警报通过 <code>PromQL</code>定义规则，更多时候是对相关的多条警报进行分组后统一定义。下面开始把 <strong>Alertmanager</strong> 中的分组 <code>Grouping</code> 、抑制 <code>Inhibition</code>、静默 <code>Sliences</code>核心特性进行介绍，便于大家系统性的学习与理解。</p><p>Alertmanager除了提供基本的告警通知能力以外，还主要提供了如：分组、抑制以及静默等告警特性：</p><p><img src=https://cdn.jsdelivr.net/gh/ljzsdut/images@master/default/Introduction2-1596677241294.png alt=img></p><div class=gdoc-page__anchorwrap><h3 id=分组>分组
<a data-clipboard-text=https://note.ljzsdut.com/%E4%BA%91%E5%8E%9F%E7%94%9F/Prometheus/006-altermanager%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%A6%E8%A7%A3/#分组 class="gdoc-page__anchor clip flex align-center" title="Anchor to: 分组" aria-label="Anchor to: 分组" href=#%e5%88%86%e7%bb%84><svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"/></svg></a></h3></div><p>在Prometheus中，还可以通过Group（告警组）对一组相关的告警进行统一定义。</p><p><strong>分组机制可以将相似的告警信息合并成一个通知</strong>。在某些情况下，比如在系统因大面积故障而触发告警潮时，在这种情况下分组机制可以将这些被触发的告警合并为一个告警通知，避免一次性接受大量的告警通知，被大量的告警噪声淹没，进而导致关键信息的隐没，而无法对问题进行快速定位。</p><p>例如，当集群中有数百个正在运行的服务实例，并且为每一个实例设置了告警规则。假如此时发生了网络故障，可能导致大量的服务实例无法连接到数据库，结果就会有数百个告警被发送到Alertmanager。</p><p>而作为用户，可能只希望能够在一个通知中中就能查看哪些服务实例收到影响。这时可以按照服务所在集群或者告警名称对告警进行分组，而将这些告警聚合在一起成为一个通知。</p><p>告警分组，告警时间，以及告警的接受方式可以通过Alertmanager的配置文件进行配置。</p><div class=gdoc-page__anchorwrap><h3 id=抑制>抑制
<a data-clipboard-text=https://note.ljzsdut.com/%E4%BA%91%E5%8E%9F%E7%94%9F/Prometheus/006-altermanager%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%A6%E8%A7%A3/#抑制 class="gdoc-page__anchor clip flex align-center" title="Anchor to: 抑制" aria-label="Anchor to: 抑制" href=#%e6%8a%91%e5%88%b6><svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"/></svg></a></h3></div><p>抑制是指当某一告警发出后，可以停止重复发送由此告警引发的其它告警的机制。</p><p>当系统中某个组件或服务故障而触发告警通知后，那些依赖于该组件或服务的其它组件或服务可能也会因此而触发告警，抑制便是避免类似的级联告警的一种特性，从而让用户能将精力集中于真正的故障所在；</p><p>例如，当一个交换机发生故障后，该故障会触发告警。此时连接到这个交换机上的其他设备也会因为交换机故障而触发报警，而我们不希望收到这些设备发送的告警，此时就可以使用抑制解决。</p><p>抑制机制同样通过Alertmanager的配置文件进行设置。</p><div class=gdoc-page__anchorwrap><h3 id=静默>静默
<a data-clipboard-text=https://note.ljzsdut.com/%E4%BA%91%E5%8E%9F%E7%94%9F/Prometheus/006-altermanager%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%A6%E8%A7%A3/#静默 class="gdoc-page__anchor clip flex align-center" title="Anchor to: 静默" aria-label="Anchor to: 静默" href=#%e9%9d%99%e9%bb%98><svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"/></svg></a></h3></div><p>静默 （Silent） :是指在一个特定的时间窗口内，即便接收到告警通知（符合静默的配置），Alertmanager也不会真正向用户发送告警信息的行为；通常，在系统例行维护期间，需要激活告警系统的静默特性；</p><p>静默提供了一个简单的机制可以快速根据标签对告警进行静默处理。静默设置需要在Alertmanager的Web页面上进行设置。</p><div class=gdoc-page__anchorwrap><h2 id=prometheus告警规则扩展>Prometheus告警规则【扩展】
<a data-clipboard-text=https://note.ljzsdut.com/%E4%BA%91%E5%8E%9F%E7%94%9F/Prometheus/006-altermanager%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%A6%E8%A7%A3/#prometheus告警规则扩展 class="gdoc-page__anchor clip flex align-center" title="Anchor to: Prometheus告警规则【扩展】" aria-label="Anchor to: Prometheus告警规则【扩展】" href=#prometheus%e5%91%8a%e8%ad%a6%e8%a7%84%e5%88%99%e6%89%a9%e5%b1%95><svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"/></svg></a></h2></div><p>Prometheus中的告警规则允许你基于PromQL表达式定义告警触发条件，Prometheus对这些触发规则进行周期性计算，当满足触发条件后则会触发告警通知。默认情况下，用户可以通过Prometheus的Web界面查看这些告警规则以及告警的触发状态。当Promthues与Alertmanager关联之后，Promthues可以将告警发送到Alertmanager中，并通过Alertmanager可以对这些告警进行进一步的处理。</p><div class=gdoc-page__anchorwrap><h3 id=定义告警规则>定义告警规则
<a data-clipboard-text=https://note.ljzsdut.com/%E4%BA%91%E5%8E%9F%E7%94%9F/Prometheus/006-altermanager%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%A6%E8%A7%A3/#定义告警规则 class="gdoc-page__anchor clip flex align-center" title="Anchor to: 定义告警规则" aria-label="Anchor to: 定义告警规则" href=#%e5%ae%9a%e4%b9%89%e5%91%8a%e8%ad%a6%e8%a7%84%e5%88%99><svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"/></svg></a></h3></div><p>在Prometheus中一条告警规则主要由以下几部分组成：</p><ul><li>告警名称：用户需要为告警规则命名，当然对于命名而言，需要能够直接表达出该告警的主要内容</li><li>告警规则表达式：告警规则由PromQL进行定义，其实际意义是：当表达式（PromQL）查询结果为true时持续多长时间（During）后出发告警</li></ul><p>一条典型的告警规则如下所示：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>groups</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>k8stech.net </span><span class=w> </span><span class=c>#该rule分组的名称，每个分组中有多个rule</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>rules</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>alert</span><span class=p>:</span><span class=w> </span><span class=l>HighErrorRate</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>expr</span><span class=p>:</span><span class=w> </span><span class=l>job:request_latency_seconds:mean5m{job=&#34;myjob&#34;} &gt; 0.5</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>for</span><span class=p>:</span><span class=w> </span><span class=l>10m</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>labels</span><span class=p>:</span><span class=w> </span><span class=c>#为告警添加额外的标签</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>severity</span><span class=p>:</span><span class=w> </span><span class=l>page</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>annotations</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>summary</span><span class=p>:</span><span class=w> </span><span class=l>High request latency</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class=l>description info</span><span class=w>
</span></span></span></code></pre></div><p>在告警规则文件中，我们可以将一组相关的规则设置定义在一个group下。在每一个group中我们可以定义多个告警规则(rule)。**这个group是一个逻辑概念，便于管理功能相近的一组rule，同时为规则名称提供“名称空间”，但并不会对告警rule进行分组发送之类的作用，这点与Altermanager中route group的作用要有所不同。**一条告警规则主要由以下几部分组成：</p><ul><li>alert：告警规则的名称。 <strong>告警触发后，也会生成一个名称为alert的时间序列</strong>，该序列含有源时间序列所有的标签，这个所说的源时间序列，就是触发告警的时间序列（或者说target）。</li><li>expr：基于PromQL表达式告警触发条件（布尔表达式），用于计算是否有时间序列满足该条件。可以使用Record rule定义的指标。</li><li>for：评估等待时间，可选参数。用于表示只有当触发条件持续一段时间后才发送告警。新产生告警在等待期间的状态为pending。</li><li>labels：自定义标签，允许用户指定要附加到告警上的一组附加标签。 labels内容在告警产生时会一同作为参数发送到Alertmanager。</li><li>annotations：用于指定一组附加信息，比如用于描述告警详细信息的文字等，annotations的内容在告警产生时会一同作为参数发送到Alertmanager。</li></ul><blockquote><p>一个组内的每个告警规则必须有个名称，而且在该组内其名称必须唯一。</p></blockquote><p>为了能够让Prometheus能够启用定义的告警规则，我们需要在Prometheus全局配置文件中通过rule_files指定一组告警规则文件的访问路径，Prometheus启动后会自动扫描这些路径下规则文件中定义的内容，并且根据这些规则计算是否向外部发送通知：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>rule_files</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>[</span><span class=w> </span>- <span class=l>&lt;filepath_glob&gt; ... ]</span><span class=w>
</span></span></span></code></pre></div><p>默认情况下Prometheus会每分钟对这些告警规则进行计算，如果用户想定义自己的告警计算周期，则可以通过evaluation_interval来覆盖默认的计算周期：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>global</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[ evaluation_interval</span><span class=p>:</span><span class=w> </span><span class=l>&lt;duration&gt; | default = 1m ]</span><span class=w>
</span></span></span></code></pre></div><div class=gdoc-page__anchorwrap><h3 id=annotationslabel模板化>annotations&label模板化
<a data-clipboard-text=https://note.ljzsdut.com/%E4%BA%91%E5%8E%9F%E7%94%9F/Prometheus/006-altermanager%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%A6%E8%A7%A3/#annotationslabel模板化 class="gdoc-page__anchor clip flex align-center" title="Anchor to: annotations&label模板化" aria-label="Anchor to: annotations&label模板化" href=#annotationslabel%e6%a8%a1%e6%9d%bf%e5%8c%96><svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"/></svg></a></h3></div><p>一般来说，在告警规则文件中annotations中，summary用于描述告警的概要信息，description用于描述告警的详细信息。同时Alertmanager的UI也会根据这两个注解值，显示告警信息。为了让告警信息具有更好的可读性，Prometheus支持模板化label和annotations的中标签的值。</p><ul><li>通过<code>$labels.变量名</code>可以访问当前告警实例中指定标签的值。</li><li><code>$value</code>则可以获取当前PromQL表达式计算的样本值，即时间序列的值。</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># To insert a firing element&#39;s label values</span>
</span></span><span class=line><span class=cl><span class=o>{{</span> <span class=nv>$labels</span>.&lt;labelname&gt; <span class=o>}}</span>
</span></span><span class=line><span class=cl><span class=c1># To insert the numeric expression value of the firing element:</span>
</span></span><span class=line><span class=cl><span class=o>{{</span> <span class=nv>$value</span> <span class=o>}}</span>
</span></span></code></pre></div><p>例如，可以通过模板化优化summary以及description的内容的可读性：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>groups:
</span></span><span class=line><span class=cl>- name: example
</span></span><span class=line><span class=cl>  rules:
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1># Alert for any instance that is unreachable for &gt;5 minutes.</span>
</span></span><span class=line><span class=cl>  - alert: InstanceDown
</span></span><span class=line><span class=cl>    expr: <span class=nv>up</span> <span class=o>==</span> <span class=m>0</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span>: 5m
</span></span><span class=line><span class=cl>    labels:
</span></span><span class=line><span class=cl>      severity: page
</span></span><span class=line><span class=cl>    annotations:
</span></span><span class=line><span class=cl>      summary: <span class=s2>&#34;Instance {{ </span><span class=nv>$labels</span><span class=s2>.instance }} down&#34;</span>
</span></span><span class=line><span class=cl>      description: <span class=s2>&#34;{{ </span><span class=nv>$labels</span><span class=s2>.instance }} of job {{ </span><span class=nv>$labels</span><span class=s2>.job }} has been down for more than 5 minutes.&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1># Alert for any instance that has a median request latency &gt;1s.</span>
</span></span><span class=line><span class=cl>  - alert: APIHighRequestLatency
</span></span><span class=line><span class=cl>    expr: api_http_request_latencies_second<span class=o>{</span><span class=nv>quantile</span><span class=o>=</span><span class=s2>&#34;0.5&#34;</span><span class=o>}</span> &gt; <span class=m>1</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span>: 10m
</span></span><span class=line><span class=cl>    annotations:
</span></span><span class=line><span class=cl>      summary: <span class=s2>&#34;High request latency on {{ </span><span class=nv>$labels</span><span class=s2>.instance }}&#34;</span>
</span></span><span class=line><span class=cl>      description: <span class=s2>&#34;{{ </span><span class=nv>$labels</span><span class=s2>.instance }} has a median request latency above 1s (current value: {{ </span><span class=nv>$value</span><span class=s2> }}s)&#34;</span>
</span></span></code></pre></div><div class=gdoc-page__anchorwrap><h3 id=查看告警状态>查看告警状态
<a data-clipboard-text=https://note.ljzsdut.com/%E4%BA%91%E5%8E%9F%E7%94%9F/Prometheus/006-altermanager%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%A6%E8%A7%A3/#查看告警状态 class="gdoc-page__anchor clip flex align-center" title="Anchor to: 查看告警状态" aria-label="Anchor to: 查看告警状态" href=#%e6%9f%a5%e7%9c%8b%e5%91%8a%e8%ad%a6%e7%8a%b6%e6%80%81><svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"/></svg></a></h3></div><p>如下所示，用户可以通过Prometheus WEB界面中的Alerts菜单查看当前Prometheus下的所有告警规则，以及其当前所处的活动状态。</p><p><img src=https://cdn.jsdelivr.net/gh/ljzsdut/images@master/default/Alert-status-1596677590073.png alt=img></p><p>同时对于已经pending或者firing的告警，Prometheus也会将它们存储到时间序列ALERTS{}中。</p><p>可以通过表达式，查询告警实例：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ALERTS<span class=o>{</span><span class=nv>alertname</span><span class=o>=</span><span class=s2>&#34;&lt;alert name&gt;&#34;</span>, <span class=nv>alertstate</span><span class=o>=</span><span class=s2>&#34;pending|firing&#34;</span>, &lt;additional alert labels&gt;<span class=o>}</span>
</span></span></code></pre></div><p>样本值为1表示当前告警处于活动状态（pending或者firing），当告警从活动状态转换为非活动状态时，样本值则为0。</p><p><img src=https://cdn.jsdelivr.net/gh/ljzsdut/images@master/default/image-20210521152556608-1621581956837.png alt=image-20210521152556608></p><div class=gdoc-page__anchorwrap><h3 id=实例定义主机监控告警>实例：定义主机监控告警
<a data-clipboard-text=https://note.ljzsdut.com/%E4%BA%91%E5%8E%9F%E7%94%9F/Prometheus/006-altermanager%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%A6%E8%A7%A3/#实例定义主机监控告警 class="gdoc-page__anchor clip flex align-center" title="Anchor to: 实例：定义主机监控告警" aria-label="Anchor to: 实例：定义主机监控告警" href=#%e5%ae%9e%e4%be%8b%e5%ae%9a%e4%b9%89%e4%b8%bb%e6%9c%ba%e7%9b%91%e6%8e%a7%e5%91%8a%e8%ad%a6><svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"/></svg></a></h3></div><p>修改Prometheus配置文件prometheus.yml,添加以下配置：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>rule_files</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=l>/etc/prometheus/rules/*.rules</span><span class=w>
</span></span></span></code></pre></div><p>在目录/etc/prometheus/rules/下创建告警文件hoststats-alert.rules内容如下：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>groups</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>hostStatsAlert</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>rules</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>alert</span><span class=p>:</span><span class=w> </span><span class=l>hostCpuUsageAlert</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>expr</span><span class=p>:</span><span class=w> </span><span class=l>sum(avg without (cpu)(irate(node_cpu{mode!=&#39;idle&#39;}[5m]))) by (instance) &gt; 0.85</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>for</span><span class=p>:</span><span class=w> </span><span class=l>1m</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>labels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>severity</span><span class=p>:</span><span class=w> </span><span class=l>page</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>annotations</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>summary</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;Instance {{ $labels.instance }} CPU usgae high&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;{{ $labels.instance }} CPU usage above 85% (current value: {{ $value }})&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>alert</span><span class=p>:</span><span class=w> </span><span class=l>hostMemUsageAlert</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>expr</span><span class=p>:</span><span class=w> </span><span class=l>(node_memory_MemTotal - node_memory_MemAvailable)/node_memory_MemTotal &gt; 0.85</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>for</span><span class=p>:</span><span class=w> </span><span class=l>1m</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>labels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>severity</span><span class=p>:</span><span class=w> </span><span class=l>page</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>annotations</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>summary</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;Instance {{ $labels.instance }} MEM usgae high&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;{{ $labels.instance }} MEM usage above 85% (current value: {{ $value }})&#34;</span><span class=w>
</span></span></span></code></pre></div><p>重启Prometheus后访问Prometheus UI http://127.0.0.1:9090/rules可以查看当前以加载的规则文件。</p><p><img src=https://cdn.jsdelivr.net/gh/ljzsdut/images@master/default/Alert-rule-1596678496426.png alt=img></p><p>切换到Alerts标签http://127.0.0.1:9090/alerts可以查看当前告警的活动状态。</p><p><img src=https://cdn.jsdelivr.net/gh/ljzsdut/images@master/default/Alert-status-20200806094822904-1596678502985.png alt=img></p><p>此时，我们可以手动拉高系统的CPU使用率，验证Prometheus的告警流程，在主机上运行以下命令：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>cat /dev/zero&gt;/dev/null
</span></span></code></pre></div><p>运行命令后查看CPU使用率情况，如下图所示：</p><p><img src=https://cdn.jsdelivr.net/gh/ljzsdut/images@master/default/exec-test-action-alert-1596678523196.png alt=img></p><p>Prometheus首次检测到满足触发条件后，hostCpuUsageAlert显示有一条告警处于活动状态。由于告警规则中设置了1m的等待时间，当前告警状态为PENDING，如下图所示：</p><p><img src=https://cdn.jsdelivr.net/gh/ljzsdut/images@master/default/action-status-1-1596678538004.png alt=img></p><p>如果1分钟后告警条件持续满足，则会实际触发告警并且告警状态为FIRING，如下图所示：</p><p><img src=https://cdn.jsdelivr.net/gh/ljzsdut/images@master/default/action-status-2-1596678543222.png alt=img></p><div class=gdoc-page__anchorwrap><h2 id=alertmanager配置概述>Alertmanager配置概述
<a data-clipboard-text=https://note.ljzsdut.com/%E4%BA%91%E5%8E%9F%E7%94%9F/Prometheus/006-altermanager%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%A6%E8%A7%A3/#alertmanager配置概述 class="gdoc-page__anchor clip flex align-center" title="Anchor to: Alertmanager配置概述" aria-label="Anchor to: Alertmanager配置概述" href=#alertmanager%e9%85%8d%e7%bd%ae%e6%a6%82%e8%bf%b0><svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"/></svg></a></h2></div><p>在Alertmanager中通过路由(Route)来定义告警的处理方式。路由是一个<strong>基于标签匹配</strong>的树状匹配结构。根据接收到告警的标签匹配相应的处理方式。这里将详细介绍路由相关的内容。</p><p>Alertmanager主要负责对Prometheus产生的告警进行统一处理，因此在Alertmanager配置中一般会包含以下几个主要部分：</p><ul><li>全局配置（global）：用于定义一些全局的公共参数，如全局的SMTP配置，Slack配置等内容；</li></ul><blockquote><p>在 <strong>Alertmanager</strong> 配置文件中，只要全局设置配置了的选项，全部为公共设置，可以让其他设置继承，作为默认值，可以子参数中覆盖其设置。其中 <code>resolve_timeout</code> 用于设置处理超时时间，也是声明警报状态为解决的时间， 这个时间会直接影响到警报恢复的通知时间，需要自行结合实际生产场景来设置主机的恢复时间，默认是5分钟。在全局设置中可以设置smtp服务，同时也支持slack、victorops、pagerduty等，在这里只讲我们常用的Email，钉钉，企业微信， 同时也可以自己使用go语言开发的gubot进行二次开发，对接自定义webhook通知源。</p></blockquote><ul><li>模板（templates）：用于定义告警通知时的模板，如HTML模板，邮件模板等；</li></ul><blockquote><p>警报模板可以自定义通知的信息格式，以及其包含的对应警报指标数据，可以自定义Email、企业微信的模板，配置指定的存放位置，这里的模板是指的发送的通知源信息格式模板，比如Email，企业微信。这些模板可以在receiver中被引用。</p></blockquote><ul><li>告警路由（route）：根据标签匹配，确定当前告警应该如何处理；</li></ul><blockquote><p>警报路由模块描述了在收到 <strong>Prometheus</strong> 生成的警报后，将警报信息发送给接收器 <code>receiver</code> 指定的目标地址规则。<strong>Alertmanager</strong> 对传入的警报信息进行处理，根据所定义的规则与配置进行匹配。对于路由可以理解为树状结构， 设置的第一个route是跟节点，往下的就是包含的子节点，每个警报传进来以后，会从配置的跟节点路由进入路由树，按照深度优先从左向右遍历匹配，当匹配的节点后停止，进行警报处理。</p></blockquote><ul><li>接收人（receivers）：接收人是一个抽象的概念，它可以是一个邮箱也可以是微信，Slack或者Webhook等，接收人一般配合告警路由使用；</li><li>抑制规则（inhibit_rules）：合理设置抑制规则可以减少垃圾告警的产生</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>global</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[ smtp_from</span><span class=p>:</span><span class=w> </span><span class=l>&lt;tmpl_string&gt; ]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[ smtp_smarthost</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; ]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[ smtp_auth_username</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; ]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[ smtp_auth_password</span><span class=p>:</span><span class=w> </span><span class=l>&lt;secret&gt; ]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[ smtp_auth_secret</span><span class=p>:</span><span class=w> </span><span class=l>&lt;secret&gt; ]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[ smtp_require_tls</span><span class=p>:</span><span class=w> </span><span class=l>&lt;bool&gt; | default = true ]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=l>......</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Files from which custom notification template definitions are read.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># The last component may use a wildcard matcher, e.g. &#39;templates/*.tmpl&#39;.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>templates</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>[</span><span class=w> </span>- <span class=l>&lt;filepath&gt; ... ]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># The root node of the routing tree.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>route</span><span class=p>:</span><span class=w> </span><span class=l>&lt;route&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># A list of notification receivers.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=l>&lt;receiver&gt; ...</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># A list of inhibition rules.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>inhibit_rules</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>[</span><span class=w> </span>- <span class=l>&lt;inhibit_rule&gt; ... ]</span><span class=w>
</span></span></span></code></pre></div><p>例如：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>global:
</span></span><span class=line><span class=cl>  resolve_timeout: 5m
</span></span><span class=line><span class=cl>  <span class=c1># smtp配置</span>
</span></span><span class=line><span class=cl>  smtp_from: <span class=s2>&#34;prom-alert@example.com&#34;</span>
</span></span><span class=line><span class=cl>  smtp_smarthost: <span class=s1>&#39;email-smtp.us-west-2.amazonaws.com:465&#39;</span>
</span></span><span class=line><span class=cl>  smtp_auth_username: <span class=s2>&#34;user&#34;</span>
</span></span><span class=line><span class=cl>  smtp_auth_password: <span class=s2>&#34;pass&#34;</span>
</span></span><span class=line><span class=cl>  smtp_require_tls: <span class=nb>true</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>templates:
</span></span><span class=line><span class=cl>  - <span class=s1>&#39;/data/alertmanager/templates/*.tmpl&#39;</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>route:
</span></span><span class=line><span class=cl>  receiver: test1
</span></span><span class=line><span class=cl>  group_wait: 30s
</span></span><span class=line><span class=cl>  group_interval: 5m
</span></span><span class=line><span class=cl>  repeat_interval: 4h
</span></span><span class=line><span class=cl>  group_by: <span class=o>[</span>alertname<span class=o>]</span>
</span></span><span class=line><span class=cl>  routes:
</span></span><span class=line><span class=cl>  <span class=c1># ads webhook</span>
</span></span><span class=line><span class=cl>  - receiver: test1
</span></span><span class=line><span class=cl>    group_wait: 10s
</span></span><span class=line><span class=cl>    match:
</span></span><span class=line><span class=cl>      team: ads
</span></span><span class=line><span class=cl>  <span class=c1># ops webhook</span>
</span></span><span class=line><span class=cl>  - receiver: test2
</span></span><span class=line><span class=cl>    group_wait: 10s
</span></span><span class=line><span class=cl>    match:
</span></span><span class=line><span class=cl>      team: operations
</span></span><span class=line><span class=cl>      
</span></span><span class=line><span class=cl>receivers:
</span></span><span class=line><span class=cl>- name: test1
</span></span><span class=line><span class=cl>  email_configs:
</span></span><span class=line><span class=cl>  - to: <span class=s1>&#39;9935226@qq.com&#39;</span>
</span></span><span class=line><span class=cl>    headers: <span class=o>{</span> Subject: <span class=s2>&#34;[ads] 报警邮件&#34;</span><span class=o>}</span> <span class=c1># 接收邮件的标题</span>
</span></span><span class=line><span class=cl>  webhook_configs:
</span></span><span class=line><span class=cl>  - url: http://localhost:8060/dingtalk/ads/send
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>- name: test2
</span></span><span class=line><span class=cl>  email_configs:
</span></span><span class=line><span class=cl>  - to: <span class=s1>&#39;9935226@qq.com,9935226@example.com&#39;</span>
</span></span><span class=line><span class=cl>    send_resolved: <span class=nb>true</span>
</span></span><span class=line><span class=cl>    headers: <span class=o>{</span> Subject: <span class=s2>&#34;[ops] 报警邮件&#34;</span><span class=o>}</span> <span class=c1># 接收邮件的标题</span>
</span></span><span class=line><span class=cl>  webhook_configs:
</span></span><span class=line><span class=cl>  - url: http://localhost:8060/dingtalk/ops/send
</span></span><span class=line><span class=cl>  <span class=c1># wx config</span>
</span></span><span class=line><span class=cl>  wechat_configs:
</span></span><span class=line><span class=cl>  - corp_id: <span class=s1>&#39;wwxxxxxxxxxxxxxx&#39;</span>
</span></span><span class=line><span class=cl>    api_url: <span class=s1>&#39;https://qyapi.weixin.qq.com/cgi-bin/&#39;</span>
</span></span><span class=line><span class=cl>    send_resolved: <span class=nb>true</span>
</span></span><span class=line><span class=cl>    to_party: <span class=s1>&#39;2&#39;</span>
</span></span><span class=line><span class=cl>    agent_id: <span class=s1>&#39;1000002&#39;</span>
</span></span><span class=line><span class=cl>    api_secret: <span class=s1>&#39;1FvHxuGbbG35FYsuW0YyI4czWY/.2&#39;</span>
</span></span></code></pre></div><p>在全局配置中需要注意的是resolve_timeout，该参数定义了<strong>当Alertmanager持续多长时间未接收到告警后标记告警状态为resolved（已解决</strong>）。该参数的定义可能会影响到告警恢复通知的接收时间，读者可根据自己的实际场景进行定义，其默认值为5分钟。在接下来的部分，我们将以一些实际的例子解释Alertmanager的其它配置内容。</p><div class=gdoc-page__anchorwrap><h2 id=自定义altermanager告警模板>自定义altermanager告警模板
<a data-clipboard-text=https://note.ljzsdut.com/%E4%BA%91%E5%8E%9F%E7%94%9F/Prometheus/006-altermanager%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%A6%E8%A7%A3/#自定义altermanager告警模板 class="gdoc-page__anchor clip flex align-center" title="Anchor to: 自定义altermanager告警模板" aria-label="Anchor to: 自定义altermanager告警模板" href=#%e8%87%aa%e5%ae%9a%e4%b9%89altermanager%e5%91%8a%e8%ad%a6%e6%a8%a1%e6%9d%bf><svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"/></svg></a></h2></div><p>默认情况下Alertmanager使用了系统自带的默认通知模板，模板源码可以从<code>https://github.com/prometheus/alertmanager/blob/master/template/default.tmpl</code>获得。Alertmanager的通知模板基于Go的模板系统。Alertmanager也支持用户定义和使用自己的模板，一般来说有两种方式可以选择。</p><p>每一种reciver都有自己的模板，而且有自己的默认模板，也可以为每种reciver自定义模板，但是各种reciver的模板定义方式不太一样。例如<strong>钉钉会在webhook-server中定义模板</strong>；slack可以直接在reciver定时时定义模板。下面以slack作为示例演示：</p><p>第一种，基于模板字符串。用户可以直接在Alertmanager的配置文件中使用模板字符串，例如:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>receivers:
</span></span><span class=line><span class=cl>- name: <span class=s1>&#39;slack-notifications&#39;</span>
</span></span><span class=line><span class=cl>  slack_configs:
</span></span><span class=line><span class=cl>  - channel: <span class=s1>&#39;#alerts&#39;</span>
</span></span><span class=line><span class=cl>    text: <span class=s1>&#39;https://internal.myorg.net/wiki/alerts/{{ .GroupLabels.app }}/{{ .GroupLabels.alertname }}&#39;</span>
</span></span></code></pre></div><p>第二种方式，自定义可复用的模板文件。例如，可以创建自定义模板文件custom-template.tmpl，如下所示：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>{{</span> define <span class=s2>&#34;slack.myorg.text&#34;</span> <span class=o>}}</span>https://internal.myorg.net/wiki/alerts/<span class=o>{{</span> .GroupLabels.app <span class=o>}}</span>/<span class=o>{{</span> .GroupLabels.alertname <span class=o>}}{{</span> end<span class=o>}}</span>
</span></span></code></pre></div><p>通过在Alertmanager的全局设置中定义templates配置来指定自定义模板的访问路径:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Files from which custom notification template definitions are read.</span>
</span></span><span class=line><span class=cl><span class=c1># The last component may use a wildcard matcher, e.g. &#39;templates/*.tmpl&#39;.</span>
</span></span><span class=line><span class=cl>templates:
</span></span><span class=line><span class=cl>  <span class=o>[</span> - &lt;filepath&gt; ... <span class=o>]</span>
</span></span><span class=line><span class=cl>receivers:
</span></span><span class=line><span class=cl>- name: <span class=s1>&#39;slack-notifications&#39;</span>
</span></span><span class=line><span class=cl>  slack_configs:
</span></span><span class=line><span class=cl>  - channel: <span class=s1>&#39;#alerts&#39;</span>
</span></span><span class=line><span class=cl>    text: <span class=s1>&#39;{{ template &#34;slack.myorg.text&#34; . }}&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>templates:
</span></span><span class=line><span class=cl>- <span class=s1>&#39;/etc/alertmanager/templates/myorg.tmpl&#39;</span>
</span></span></code></pre></div><div class=gdoc-page__anchorwrap><h2 id=基于标签的告警路由>基于标签的告警路由
<a data-clipboard-text=https://note.ljzsdut.com/%E4%BA%91%E5%8E%9F%E7%94%9F/Prometheus/006-altermanager%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%A6%E8%A7%A3/#基于标签的告警路由 class="gdoc-page__anchor clip flex align-center" title="Anchor to: 基于标签的告警路由" aria-label="Anchor to: 基于标签的告警路由" href=#%e5%9f%ba%e4%ba%8e%e6%a0%87%e7%ad%be%e7%9a%84%e5%91%8a%e8%ad%a6%e8%b7%af%e7%94%b1><svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"/></svg></a></h2></div><p>在Alertmanager的配置中会定义一个基于标签匹配规则的告警路由树，以确定在接收到告警后Alertmanager需要如何对其进行处理：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>route</span><span class=p>:</span><span class=w> </span><span class=l>&lt;route&gt;</span><span class=w>
</span></span></span></code></pre></div><p>其中route中则主要定义了告警的路由匹配规则，以及Alertmanager需要将匹配到的告警发送给哪一个receiver，一个最简单的route定义如下所示：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>route:
</span></span><span class=line><span class=cl>  group_by: <span class=o>[</span><span class=s1>&#39;alertname&#39;</span><span class=o>]</span>
</span></span><span class=line><span class=cl>  receiver: <span class=s1>&#39;web.hook&#39;</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>receivers:
</span></span><span class=line><span class=cl>- name: <span class=s1>&#39;web.hook&#39;</span>
</span></span><span class=line><span class=cl>  webhook_configs:
</span></span><span class=line><span class=cl>  - url: <span class=s1>&#39;http://127.0.0.1:5001/&#39;</span>
</span></span></code></pre></div><p>如上所示：在Alertmanager配置文件中，我们只定义了一个路由，那就意味着所有由Prometheus产生的告警在发送到Alertmanager之后都会通过名为web.hook的receiver接收。这里的web.hook定义为一个webhook地址。当然实际场景下，告警处理可不是这么简单的一件事情，对于不同级别的告警，我们可能会不完全不同的处理方式，因此在route中，我们还可以定义更多的子Route，这些Route通过标签匹配告警的处理方式，route的完整定义如下：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>[ receiver</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; ]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[ group_by</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;[&#39;</span><span class=w> </span><span class=l>&lt;labelname&gt;, ... &#39;]&#39; ]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[ continue</span><span class=p>:</span><span class=w> </span><span class=l>&lt;boolean&gt; | default = false ]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>match</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[ &lt;labelname&gt;</span><span class=p>:</span><span class=w> </span><span class=l>&lt;labelvalue&gt;, ... ]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>match_re</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[ &lt;labelname&gt;</span><span class=p>:</span><span class=w> </span><span class=l>&lt;regex&gt;, ... ]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[ group_wait</span><span class=p>:</span><span class=w> </span><span class=l>&lt;duration&gt; | default = 30s ]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[ group_interval</span><span class=p>:</span><span class=w> </span><span class=l>&lt;duration&gt; | default = 5m ]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[ repeat_interval</span><span class=p>:</span><span class=w> </span><span class=l>&lt;duration&gt; | default = 4h ]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>routes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>[</span><span class=w> </span>- <span class=l>&lt;route&gt; ... ]</span><span class=w>
</span></span></span></code></pre></div><div class=gdoc-page__anchorwrap><h3 id=路由匹配>路由匹配
<a data-clipboard-text=https://note.ljzsdut.com/%E4%BA%91%E5%8E%9F%E7%94%9F/Prometheus/006-altermanager%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%A6%E8%A7%A3/#路由匹配 class="gdoc-page__anchor clip flex align-center" title="Anchor to: 路由匹配" aria-label="Anchor to: 路由匹配" href=#%e8%b7%af%e7%94%b1%e5%8c%b9%e9%85%8d><svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"/></svg></a></h3></div><p>每一个告警都会从配置文件中顶级的route进入路由树，需要注意的是<strong>顶级的route必须匹配所有告警(即不能有任何的匹配设置match和match_re)</strong>，每一个路由都可以定义自己的接收人以及匹配规则。<strong>子路由的配置可以继承自父路由</strong>。</p><p><strong>路由匹配原则：</strong></p><p>默认情况下，告警进入到顶级route后会遍历所有的子节点，直到找到<strong>最深的匹配route</strong>，并将告警发送到该route定义的receiver中。但如果route中设置continue的值为false，那么告警在匹配到第一个子节点之后就直接停止。如果continue为true，报警则会继续进行后续子节点的匹配。如果当前告警匹配不到任何的子节点，那该告警将会基于当前路由节点的接收器配置方式进行处理。</p><p>其中告警的匹配有两种方式可以选择：</p><ul><li>第一种方式基于字符串完全匹配验证，通过设置<code>match</code>规则判断当前告警中是否存在标签labelname并且其值等于labelvalue。</li><li>第二种方式则基于正则表达式，通过设置<code>match_re</code>验证当前告警标签的值是否满足正则表达式的内容。</li></ul><p>如果警报已经成功发送通知, 如果想设置重复发送告警通知之前要等待时间，则可以通过repeat_interval参数进行设置。</p><div class=gdoc-page__anchorwrap><h3 id=告警分组>告警分组
<a data-clipboard-text=https://note.ljzsdut.com/%E4%BA%91%E5%8E%9F%E7%94%9F/Prometheus/006-altermanager%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%A6%E8%A7%A3/#告警分组 class="gdoc-page__anchor clip flex align-center" title="Anchor to: 告警分组" aria-label="Anchor to: 告警分组" href=#%e5%91%8a%e8%ad%a6%e5%88%86%e7%bb%84><svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"/></svg></a></h3></div><p>Alertmanager可以对<strong>告警通知</strong>进行分组，<strong>将多条告警合并为一个通知</strong>。默认情况下，所有的告警都组织在一起，而一旦指定分组标签，则altermanager就按这些标签进行分组。这里我们可以使用group_by来定义分组规则。基于告警中包含的标签，如果满足group_by中定义标签名称，那么这些告警将会合并为一个通知发送给接收器。例如<code>group_by: [alertname]</code>可以将alertname相同、但是instance标签不同的的多个告警信息合并到一个通知中。</p><p>有的时候为了能够一次性收集和发送更多的相关信息时，可以通过group_wait参数设置等待时间，如果在等待时间内当前group接收到了新的告警，这些告警将会合并为一个通知向receiver发送。而group_interval配置，则用于定义相同的Group之间发送告警通知的时间间隔。</p><p><strong>分组主要处理流程：</strong></p><p>经过路由匹配之后，每一条告警都到达了最终匹配的router那里，在发送前，会对这些即将发送的告警进行分组。（<em><strong>隐含：先路由，后分组</strong></em>，结论可以启用alertmanager的debug级别日志查看分析）</p><p>也就是说一个alert到达根路由后，先不考虑根路由和各个子路由的group参数，而是先根据路由树定位该alert最终匹配的子路由，然后根据匹配的子路由中的group参数进行分组，分组只考虑匹配子路由中的group参数，而不考虑其父路由的group参数。除非该匹配的子路由没有group参数，需要从其父路由中继承。</p><ol><li>接收到Alert，根据labels和路由树判断最终属于哪个Route（可存在多个Route，一个Route有多个Group，一个Group有多个Alert）</li><li>在最终定位的route下，将Alert根据该route中的group配置(如果该route配置中没有group，是可以继承自父route)分配到Group中，没有已经存在的Group则新建Group</li><li>新的Group等待group_wait指定的时间（等待时可能收到同一Group的Alert），根据resolve_timeout判断Alert是否解决，然后发送通知</li><li>已有的Group等待group_interval指定的时间，判断Alert是否解决，当上次发送通知到现在的间隔大于repeat_interval或者Group有更新时会发送通知</li></ol><blockquote><p>举例说明：什么情况下会新建分组？各个参数的含义？</p><p>alertmanager的分组功能的配置：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>route</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>receiver</span><span class=p>:</span><span class=w> </span><span class=l>admin-receiver</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>group_by</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&#34;instance&#34;</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>group_wait</span><span class=p>:</span><span class=w> </span><span class=l>30s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>group_interval</span><span class=p>:</span><span class=w> </span><span class=l>5m</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>repeat_interval</span><span class=p>:</span><span class=w> </span><span class=l>4h</span><span class=w>
</span></span></span></code></pre></div><div class=gdoc-page__anchorwrap><h4 id=group-by><strong>Group By</strong>
<a data-clipboard-text=https://note.ljzsdut.com/%E4%BA%91%E5%8E%9F%E7%94%9F/Prometheus/006-altermanager%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%A6%E8%A7%A3/#group-by class="gdoc-page__anchor clip flex align-center" title="Anchor to: Group By" aria-label="Anchor to: Group By" href=#group-by><svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"/></svg></a></h4></div><p>上面我们设置了<code>group_by ["instance"]</code>，那么，当AlertManager接收到如下告警时</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span><span class=err>alertname=</span><span class=nt>&#34;NodeCPU&#34;</span><span class=p>,</span><span class=err>instance=</span><span class=nt>&#34;node01&#34;</span><span class=p>,</span><span class=err>job=</span><span class=nt>&#34;node-exporter&#34;</span><span class=p>,</span><span class=err>serverity=</span><span class=nt>&#34;high&#34;</span><span class=p>,</span><span class=err>...</span><span class=p>}</span>  <span class=err>time,</span> <span class=err>annotation</span>
</span></span></code></pre></div><p>便会创建一个Group：<code>{instance="node01"}</code>，然后把该条告警加入到这个Group中。接着，如果再接收到一条告警</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span><span class=err>alertname=</span><span class=nt>&#34;NodeMemory&#34;</span><span class=p>,</span><span class=err>instance=</span><span class=nt>&#34;node01&#34;</span><span class=p>,</span><span class=err>job=</span><span class=nt>&#34;node-exporter&#34;</span><span class=p>,</span><span class=err>serverity=</span><span class=nt>&#34;high&#34;</span><span class=p>,</span><span class=err>...</span><span class=p>}</span> <span class=err>time,</span> <span class=err>annotation</span>
</span></span></code></pre></div><p>也会加入到这个Group中 。</p><p>如果接收到另一个告警</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span><span class=err>alertname=</span><span class=nt>&#34;NodeCPU&#34;</span><span class=p>,</span><span class=err>instance=</span><span class=nt>&#34;node02&#34;</span><span class=p>,</span><span class=err>job=</span><span class=nt>&#34;node-exporter&#34;</span><span class=p>,</span><span class=err>serverity=</span><span class=nt>&#34;high&#34;</span><span class=p>,</span><span class=err>...</span><span class=p>}</span>  <span class=err>time,</span> <span class=err>annotation</span>
</span></span></code></pre></div><p>那么便会创建Group <code>{instance="node02"}</code>，然后把这条告警放在这个Group中。（<strong>注意：只有当一个新的告警到达，且它不属于任何已经存在的分组时，才会创建新的分组</strong>）</p><p>而如果接到了一个告警，它没有<code>instance=xxx</code>这个Label，那么就会创建一个Group <code>{}</code>，把这个告警加入到这个Group中。</p><blockquote><p>未设置Group By</p></blockquote><p>上面我们讨论了设置了Group By后，alertmanager如何对告警进行分组。如果我们没有设置Group By，或设置为<code>group_by: []</code>，那么alertmanager便不会对告警进行分组，所有的告警规则都组织在一起。（下面的猜测可能是错误的：也有可能是对每一个告警中的标签创建一个分组，比如说收到一个告警只有标签<code>instance="node01"</code>，那就创建一个分组<code>{instance="node01"}</code>，收到一个另一个告警有标签<code>instance="node01"</code>和<code>alertname="NodeCPU"</code>，就创建一个分组<code>{instance="node01",alertname="NodeCPU"}</code>）。</p></blockquote><blockquote><div class=gdoc-page__anchorwrap><h4 id=group-wait><strong>Group wait</strong>
<a data-clipboard-text=https://note.ljzsdut.com/%E4%BA%91%E5%8E%9F%E7%94%9F/Prometheus/006-altermanager%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%A6%E8%A7%A3/#group-wait class="gdoc-page__anchor clip flex align-center" title="Anchor to: Group wait" aria-label="Anchor to: Group wait" href=#group-wait><svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"/></svg></a></h4></div><p>上面我们提到当设置了Group By后，alertManager会对告警进行分组。当一条告警到达时，如果它不属于任何一个已存在的分组，alertManager会创建一个新的分组，然后将该告警加入到这个分组中。此时，alertManager并不会立即把这个告警发给Receiver，而是会等待<code>group_wait</code>的时间，如果在这个时间里有属于这个分组的其它告警到达，就会将其加入到该组中。直到<code>group_wait</code>时间后，alertManager会把这一组告警一次性发给Receiver。</p><p>注意：是创建一个分组后，才会等待<code>group_wait</code>的时间，等待其他属于这个分组的告警加入。当一个分组里面的告警都已经被“解决”（Resolved）后，这些告警与分组都会删掉，如果再来一个告警，则会重新创建分组。</p><div class=gdoc-page__anchorwrap><h4 id=group-interval><strong>Group Interval</strong>
<a data-clipboard-text=https://note.ljzsdut.com/%E4%BA%91%E5%8E%9F%E7%94%9F/Prometheus/006-altermanager%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%A6%E8%A7%A3/#group-interval class="gdoc-page__anchor clip flex align-center" title="Anchor to: Group Interval" aria-label="Anchor to: Group Interval" href=#group-interval><svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"/></svg></a></h4></div><p>上面提到一个新的Group创建后，要等待<code>group_wait</code>的时间才会发通知给Receiver。当发送了通知以后，它会等待<code>group_interval</code>的时间，在这段时间内到达该Group的告警，会在<code>group_interval</code>后，会作为一个通知发送给Receiver（这个通知中会包含该分组内所有的告警）。</p><p>假设<code>group_interval</code>为5分钟，某个分组最后一次发送通知的时间为T，当<code>[T, T+5m]</code>的时间内该分组没有告警到达，而<code>T+6m</code>时该分组内有一个告警到达，那么这个告警会立即被发送给Receiver，而不会等到<code>T+10m</code>才发送。然后把<code>T+6m</code>作为最后一次发送通知的时间。</p><div class=gdoc-page__anchorwrap><h4 id=repeat-interval><strong>Repeat Interval</strong>
<a data-clipboard-text=https://note.ljzsdut.com/%E4%BA%91%E5%8E%9F%E7%94%9F/Prometheus/006-altermanager%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%A6%E8%A7%A3/#repeat-interval class="gdoc-page__anchor clip flex align-center" title="Anchor to: Repeat Interval" aria-label="Anchor to: Repeat Interval" href=#repeat-interval><svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"/></svg></a></h4></div><p>当alertManager为某个分组发送了一个通知后，如果该分组里面的告警依然存在（即没有被“解决”）且在<code>repeat_interval</code>的时间内没有接收到新的告警，那么在等待<code>repeat_interval</code>时间后，alertManager才会为该分组重新发送一个通知。</p><p>比如说，<code>repeat_interval</code>为4小时，T时刻alertManager为某个分组发送了最后一个通知，这个通知包含了多个告警。在<code>[T, T+4h]</code>的时间里，该分组没有接收到新的告警，那么在<code>T+4h</code>时alertmanager才会为该分组重新发送一个通知。</p></blockquote><p>例如，当使用Prometheus监控多个集群以及部署在集群中的应用和数据库服务，并且定义以下的告警处理路由规则来对集群中的异常进行通知。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>route</span><span class=p>:</span><span class=w> </span><span class=c>#prometheus的告警先是到达alertmanager的根路由(route)，alertmanager的根路路由不能包含任何匹配项，因为根路由是所有告警的入口点。另外,根路由需要匹配一个接收器(receiver),用来处理那些没有匹配到任何子路由的告警（如果没有配置子路由，则全部由根路由发送告警）</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>receiver</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;default-receiver&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>group_wait</span><span class=p>:</span><span class=w> </span><span class=l>30s </span><span class=w> </span><span class=c>#当一个新的告警组被创建时，需要等待’group_wait’后才发送初始通知。这样可以确保在发送等待前能收集更多具有相同标签的告警，最后合并为一个通知发送</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>group_interval</span><span class=p>:</span><span class=w> </span><span class=l>5m</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>repeat_interval</span><span class=p>:</span><span class=w> </span><span class=l>4h</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>group_by</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>cluster, alertname] </span><span class=w> </span><span class=c>#用于分组聚合，对告警通知按标签(label)进行分组，将具有相同标签(所有告警都会有一个默认标签alertname)的告警通知聚合在一个组，然后作为一个通知发送。如果想完全禁用聚合，可以设置为&#34;group_by:[]&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>routes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>receiver</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;database-pager&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>group_wait</span><span class=p>:</span><span class=w> </span><span class=l>10s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>match_re</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>service</span><span class=p>:</span><span class=w> </span><span class=l>mysql|cassandra</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>receiver</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;frontend-pager&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>group_by</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>product, environment] </span><span class=w> </span><span class=c>#子路由中，使用product, environment标签分组，分组与父route中的cluster, alertname标签无关。</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>match</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>team</span><span class=p>:</span><span class=w> </span><span class=l>frontend</span><span class=w>
</span></span></span></code></pre></div><p>上例中，Prometheus发送过来的所有告警信息会先到达<strong>跟路由</strong>，然后根据Alertmanager的配置文件的<strong>路由树</strong>判断是否可以匹配到某个<strong>子路由</strong>（此时，不考虑根路由中的<code>group_by: [cluster, alertname]</code>分组配置 ）。</p><p>如果告警时来源于数据库服务如MySQL或者Cassandra，此时则需要将告警发送给相应的数据库管理员(database-pager)。如何实现？这里定义了一个单独子路由，如果告警中包含service标签，并且service标签值为MySQL或者Cassandra，则向database-pager发送告警通知，由于这里没有定义group_by等属性，这些属性的配置信息将从上级路由继承，database-pager这个子路由节点的分组参数为<code>group_by: [cluster, alertname]</code>，即将会接收到的告警按照cluster和alertname进行分组的告警通知。</p><p>而某些告警规则来源可能来源于开发团队的定义，这些告警中通过添加标签team来标示这些告警的创建者。在Alertmanager配置文件的告警路由下，定义单独子路由用于处理这一类的告警通知，如果匹配到告警中包含标签team，并且team的值为frontend，Alertmanager将会按照标签product和environment对告警进行分组（无视父路由节点中的<code>group_by: [cluster, alertname]</code>配置）。此时如果应用出现异常，开发团队就能清楚的知道哪一个环境(environment)中的哪一个应用程序出现了问题，可以快速对应用进行问题定位。</p><p>默认情况下所有<strong>没有匹配到子路由</strong>的告警都会发送给集群管理员default-receiver，然后按照<code>group_by: [cluster, alertname]</code>进行分组并发送告警。</p><blockquote><p>对这种匹配验证操作灰常考究个人的逻辑思维能力，这不是人干的事情呀~因此，Prometheus发布了一个 <a class=gdoc-markdown__link href=https://prometheus.io/webtools/alerting/routing-tree-editor/>Routing tree editor</a>， 用于检测Alertmanager的配置文件结构配置信息，然后路由调试。</p><p>使用方法很简单，就是把 <code>alertmanager.yml</code> 的配置信息复制到这个站点，然后点击 <code>Draw Routing Tree</code> 按钮生成路由结构树， 然后在 <code>Match Label Set</code> 前面输入以 <code>{&lt;label name> = "&lt;value>"}</code> 格式的警报标签，然后点击 <code>Match Label Set</code> 按钮会显示发送状态图。</p><img src=https://cdn.jsdelivr.net/gh/ljzsdut/images@master/default/image-20200806112001144-1596684007288.png alt=image-20200806112001144 style=zoom:80%></blockquote><div class=gdoc-page__anchorwrap><h2 id=告警接收器receiver>告警接收器Receiver
<a data-clipboard-text=https://note.ljzsdut.com/%E4%BA%91%E5%8E%9F%E7%94%9F/Prometheus/006-altermanager%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%A6%E8%A7%A3/#告警接收器receiver class="gdoc-page__anchor clip flex align-center" title="Anchor to: 告警接收器Receiver" aria-label="Anchor to: 告警接收器Receiver" href=#%e5%91%8a%e8%ad%a6%e6%8e%a5%e6%94%b6%e5%99%a8receiver><svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"/></svg></a></h2></div><p>在Alertmanager中，路由负责对告警信息进行Receiver匹配，并将向告警接收器发送通知。告警接收器可以通过以下形式进行配置：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=l>&lt;receiver&gt; ...</span><span class=w>
</span></span></span></code></pre></div><p><strong>每一个receiver具有一个全局唯一的名称，并且对应一个或者多个通知方式</strong>，包括email、微信、Slack、钉钉等。：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>email_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>[</span><span class=w> </span>- <span class=l>&lt;email_config&gt;, ... ]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>hipchat_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>[</span><span class=w> </span>- <span class=l>&lt;hipchat_config&gt;, ... ]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>pagerduty_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>[</span><span class=w> </span>- <span class=l>&lt;pagerduty_config&gt;, ... ]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>pushover_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>[</span><span class=w> </span>- <span class=l>&lt;pushover_config&gt;, ... ]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>slack_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>[</span><span class=w> </span>- <span class=l>&lt;slack_config&gt;, ... ]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>opsgenie_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>[</span><span class=w> </span>- <span class=l>&lt;opsgenie_config&gt;, ... ]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>webhook_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>[</span><span class=w> </span>- <span class=l>&lt;webhook_config&gt;, ... ]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>victorops_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>[</span><span class=w> </span>- <span class=l>&lt;victorops_config&gt;, ... ]</span><span class=w>
</span></span></span></code></pre></div><p>目前官方内置的第三方通知集成包括：邮件、 即时通讯软件（如Slack、Hipchat）、移动应用消息推送(如Pushover)和自动化运维工具（例如：Pagerduty、Opsgenie、Victorops）。Alertmanager的通知方式中还可以支持Webhook，通过这种方式开发者可以实现更多个性化的扩展支持。</p><div class=gdoc-page__anchorwrap><h3 id=email>Email
<a data-clipboard-text=https://note.ljzsdut.com/%E4%BA%91%E5%8E%9F%E7%94%9F/Prometheus/006-altermanager%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%A6%E8%A7%A3/#email class="gdoc-page__anchor clip flex align-center" title="Anchor to: Email" aria-label="Anchor to: Email" href=#email><svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"/></svg></a></h3></div><p>Alertmanager默认支持配置Email，也是最普通的警报通知方式，在Alertmanager组件中内置了SMTP协议。直接可以把前面的alertmanager.yml中的SMTP部分截取出来，然后进行调整与配置。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>global</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>resolve_timeout</span><span class=p>:</span><span class=w> </span><span class=l>5m</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># smtp配置</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>smtp_from</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;9935226@qq.com&#34;</span><span class=w> </span><span class=c># 发送邮件主题</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>smtp_smarthost</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;smtp.qq.com:465&#39;</span><span class=w> </span><span class=c># 邮箱服务器的SMTP主机配置</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>smtp_auth_username</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;9935226@qq.com&#34;</span><span class=w> </span><span class=c># 登录用户名</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>smtp_auth_password</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;auth_pass&#34;</span><span class=w> </span><span class=c># 此处的auth password是邮箱的第三方登录授权密码，而非用户密码，尽量用QQ来测试。</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>smtp_require_tls</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=w> </span><span class=c># 有些邮箱需要开启此配置，这里使用的是163邮箱，仅做测试，不需要开启此功能。</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>route</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>receiver</span><span class=p>:</span><span class=w> </span><span class=l>ops</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>group_wait</span><span class=p>:</span><span class=w> </span><span class=l>30s</span><span class=w> </span><span class=c># 在组内等待所配置的时间，如果同组内，30秒内出现相同报警，在一个组内出现。</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>group_interval</span><span class=p>:</span><span class=w> </span><span class=l>5m</span><span class=w> </span><span class=c># 如果组内内容不变化，合并为一条警报信息，5m后发送。</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>repeat_interval</span><span class=p>:</span><span class=w> </span><span class=l>24h</span><span class=w> </span><span class=c># 发送报警间隔，如果指定时间内没有修复，则重新发送报警。</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>group_by</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>alertname] </span><span class=w> </span><span class=c># 报警分组</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>routes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>match</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>team</span><span class=p>:</span><span class=w> </span><span class=l>operations</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>group_by</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>env,dc]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>receiver</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;ops&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>receiver</span><span class=p>:</span><span class=w> </span><span class=l>ops</span><span class=w> </span><span class=c># 路由和标签，根据match来指定发送目标，如果 rule的lable 包含 alertname， 使用 ops 来发送</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>group_wait</span><span class=p>:</span><span class=w> </span><span class=l>10s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>match</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>team</span><span class=p>:</span><span class=w> </span><span class=l>operations</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># 接收器指定发送人以及发送渠道</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># ops分组的定义</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>ops</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>email_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>to</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;9935226@qq.com,xxxxx@qq.com&#39;</span><span class=w> </span><span class=c># 如果想发送多个人就以 &#39;,&#39;做分割，写多个邮件人即可。</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>send_resolved</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>headers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>from</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;警报中心&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>subject</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;[operations] 报警邮件&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>to</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;小煜狼皇&#34;</span><span class=w>
</span></span></span></code></pre></div><p>上面，发件箱相关的信息在global段中配置，也可以在reciver中配置:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>email</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>email_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>send_resolved</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>to</span><span class=p>:</span><span class=w> </span><span class=m>9935226</span>@<span class=l>qq.com</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>from</span><span class=p>:</span><span class=w> </span><span class=m>9935226</span>@<span class=l>qq.com</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>hello</span><span class=p>:</span><span class=w> </span><span class=l>localhost</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>smarthost</span><span class=p>:</span><span class=w> </span><span class=l>smtp.qq.com:587</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>auth_username</span><span class=p>:</span><span class=w> </span><span class=m>9935226</span>@<span class=l>qq.com</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>auth_password</span><span class=p>:</span><span class=w> </span><span class=l>&lt;secret&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>headers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>From</span><span class=p>:</span><span class=w> </span><span class=m>9935226</span>@<span class=l>qq.com</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>Subject</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;{{ template &#34;rancher.title&#34; . }}&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>To</span><span class=p>:</span><span class=w> </span><span class=m>9935226</span>@<span class=l>qq.com</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>html</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;{{ template &#34;email.text&#34; . }}&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>require_tls</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span></code></pre></div><p>配置完成后，直接重启Alertmanager组件，使配置生效，然后使用前面node-down触发一次警报来看下发送结果。</p><p>收到的警报信息：</p><p><img src=https://cdn.jsdelivr.net/gh/ljzsdut/images@master/default/640-20200806120511583-1596686711852.png alt=img></p><p>当警报接触以后收到的恢复信息。</p><p><img src=https://cdn.jsdelivr.net/gh/ljzsdut/images@master/default/640-20200806120524800-1596686724891.png alt=img></p><div class=gdoc-page__anchorwrap><h3 id=企业微信>企业微信
<a data-clipboard-text=https://note.ljzsdut.com/%E4%BA%91%E5%8E%9F%E7%94%9F/Prometheus/006-altermanager%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%A6%E8%A7%A3/#企业微信 class="gdoc-page__anchor clip flex align-center" title="Anchor to: 企业微信" aria-label="Anchor to: 企业微信" href=#%e4%bc%81%e4%b8%9a%e5%be%ae%e4%bf%a1><svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"/></svg></a></h3></div><p>首先你要具有企业微信管理员的权限，如果没有可以自己注册一个，进行测试，我这里有自行注册的企业微信</p><p>第一步登录进入以后，在应用管理中新建应用。</p><p><img src=https://cdn.jsdelivr.net/gh/ljzsdut/images@master/default/640-20200806120538552-1596686738645.png alt=企业微信应用></p><p>第二步，创建应用，信息填写如下，上传应用logo随意。</p><p><img src=https://cdn.jsdelivr.net/gh/ljzsdut/images@master/default/640-20200806120614409-1596686774492.png alt=企业微信应用信息></p><p>创建成功以后如下图。</p><p><img src=https://cdn.jsdelivr.net/gh/ljzsdut/images@master/default/640-20200806120627691-1596686787771.png alt=微信应用信息></p><p>这时候需要把 <code>AgentId</code> 和 <code>Secret</code> 记录下来，对于你的这种Secret信息，最好管理好，我的用过就会删除，所以不用担心安全隐患。</p><div class=table-wrap><table><thead><tr><th style=text-align:center>ID</th><th style=text-align:center>key</th></tr></thead><tbody><tr><td style=text-align:center><code>AgentId</code></td><td style=text-align:center><code>1000004</code></td></tr><tr><td style=text-align:center><code>Secret</code></td><td style=text-align:center><code>F-fzpgsabmfiFt7_4QRQwWEl8eyx7evO12sRYe_Q5vA</code></td></tr></tbody></table></div><p>第三步，现在我们来用新建的企业微信应用在Alertmanager配置，可以配置全局，也可以对单独需要发送的接收器，因为警报需要分级，所以需要单独处理，在这里使用的的单独的配置，需要知道 <strong>企业ID</strong> ，以及 <strong>部门ID</strong> 。</p><p><strong>企业ID</strong> 通过企业信息获取</p><p><img src=https://cdn.jsdelivr.net/gh/ljzsdut/images@master/default/640-20200806120652684-1596686812778.png alt=企业ID></p><p><strong>部门ID</strong> 通过通讯录获取</p><p><img src=https://cdn.jsdelivr.net/gh/ljzsdut/images@master/default/640-20200806120742132-1596686862219.png alt=部门ID></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># 企业微信配置</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>wechat_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>corp_id</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;wwxxxxx&#39;</span><span class=w> </span><span class=c># 企业ID是唯一标识</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>api_url</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;https://qyapi.weixin.qq.com/cgi-bin/&#39;</span><span class=w> </span><span class=c># 企业微信api接口，统一定义</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>send_resolved</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w> </span><span class=c># 设置发送警报恢复信息</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>to_party</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;2&#39;</span><span class=w> </span><span class=c># 部门id，比如我的叫警报组，因此显示的是2，如果你DB组，就可能会是3，WEB组就是4，依次类推，另外需要接收警报的相关人员必须在这个部门里。</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>agent_id</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;1000004&#39;</span><span class=w> </span><span class=c># 新建应用的agent_id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>api_secret</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;F-fzpgsabmfiFt7_4QRQwWEl8eyx7evO12sRYe_Q5vA&#39;</span><span class=w> </span><span class=c># 新建应用的Secret</span><span class=w>
</span></span></span></code></pre></div><p>这时候我们重启Alertmanager，然后使用之前的方式来触发模拟警报，看看发送是不是已经没有问题了，这时我们的企业微信中、Email都可以收到警报了，这里的警报已经被我用模块处理过了。可读性会更高。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>cat wechat.tmpl
</span></span><span class=line><span class=cl><span class=c1>## wechat模板</span>
</span></span><span class=line><span class=cl><span class=o>{{</span> define <span class=s2>&#34;wechat.default.message&#34;</span> <span class=o>}}</span>
</span></span><span class=line><span class=cl><span class=o>{{</span> <span class=k>if</span> gt <span class=o>(</span>len .Alerts.Firing<span class=o>)</span> <span class=m>0</span> -<span class=o>}}</span>
</span></span><span class=line><span class=cl>Alerts Firing:
</span></span><span class=line><span class=cl><span class=o>{{</span> range .Alerts <span class=o>}}</span>
</span></span><span class=line><span class=cl>警报级别：<span class=o>{{</span> .Labels.status <span class=o>}}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>警报类型：<span class=o>{{</span> .Labels.alertname <span class=o>}}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>故障主机: <span class=o>{{</span> .Labels.instance <span class=o>}}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>警报主题: <span class=o>{{</span> .Annotations.summary <span class=o>}}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>警报详情: <span class=o>{{</span> .Annotations.description <span class=o>}}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>⏱ : <span class=o>{{</span> <span class=o>(</span>.StartsAt.Add 28800e9<span class=o>)</span>.Format <span class=s2>&#34;2006-01-02 15:04:05&#34;</span> <span class=o>}}</span>
</span></span><span class=line><span class=cl><span class=o>{{</span>- end <span class=o>}}</span>
</span></span><span class=line><span class=cl><span class=o>{{</span>- end <span class=o>}}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>{{</span> <span class=k>if</span> gt <span class=o>(</span>len .Alerts.Resolved<span class=o>)</span> <span class=m>0</span> -<span class=o>}}</span>
</span></span><span class=line><span class=cl>Alerts Resolved:
</span></span><span class=line><span class=cl><span class=o>{{</span> range .Alerts <span class=o>}}</span>
</span></span><span class=line><span class=cl>警报级别：<span class=o>{{</span> .Labels.status <span class=o>}}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>警报类型：<span class=o>{{</span> .Labels.alertname <span class=o>}}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>故障主机: <span class=o>{{</span> .Labels.instance <span class=o>}}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>警报主题: <span class=o>{{</span> .Annotations.summary <span class=o>}}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>警报详情: <span class=o>{{</span> .Annotations.description <span class=o>}}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>⏱ : <span class=o>{{</span> <span class=o>(</span>.StartsAt.Add 28800e9<span class=o>)</span>.Format <span class=s2>&#34;2006-01-02 15:04:05&#34;</span> <span class=o>}}</span>
</span></span><span class=line><span class=cl>⏲ : <span class=o>{{</span> <span class=o>(</span>.EndsAt.Add 28800e9<span class=o>)</span>.Format <span class=s2>&#34;2006-01-02 15:04:05&#34;</span> <span class=o>}}</span>
</span></span><span class=line><span class=cl><span class=o>{{</span>- end <span class=o>}}</span>
</span></span><span class=line><span class=cl><span class=o>{{</span>- end <span class=o>}}</span>
</span></span><span class=line><span class=cl><span class=o>{{</span>- end <span class=o>}}</span>
</span></span></code></pre></div><p>Firing警报：</p><p><img src=https://cdn.jsdelivr.net/gh/ljzsdut/images@master/default/640-1596686951263.jpeg alt=企业微信警报信息></p><p>下面是Resolve的警报：</p><p><img src=https://cdn.jsdelivr.net/gh/ljzsdut/images@master/default/640-20200806120928564-1596686968665.jpeg alt=企业恢复信息></p><div class=gdoc-page__anchorwrap><h3 id=钉钉机器人webhook>钉钉机器人(Webhook)
<a data-clipboard-text=https://note.ljzsdut.com/%E4%BA%91%E5%8E%9F%E7%94%9F/Prometheus/006-altermanager%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%A6%E8%A7%A3/#钉钉机器人webhook class="gdoc-page__anchor clip flex align-center" title="Anchor to: 钉钉机器人(Webhook)" aria-label="Anchor to: 钉钉机器人(Webhook)" href=#%e9%92%89%e9%92%89%e6%9c%ba%e5%99%a8%e4%ba%bawebhook><svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"/></svg></a></h3></div><p>对于钉钉大家都已经很熟悉了，大部分企业都已经启用钉钉办公了，同时其推出的免费的webhook机器人也很受大家的欢迎。我们这里讲一下借助第三方开源组件如何对钉钉集成警报功能。</p><p>首先需要在钉钉创建机器人，然后在白名单中添加关键字信息与ip限制等安全设置，这个只要你有群，你就可以在群里面建，非常简单，这里就不做演示了</p><p>先把Prometheus-webhook-Dingtalk组件装好。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>mkdir -p /etc/prometheus-webhook-dingtalk/template/
</span></span><span class=line><span class=cl><span class=nb>cd</span> /etc/prometheus-webhook-dingtalk/
</span></span><span class=line><span class=cl>wget https://github.com/timonwong/prometheus-webhook-dingtalk/releases/download/v1.4.0/prometheus-webhook-dingtalk-1.4.0.linux-amd64.tar.gz
</span></span><span class=line><span class=cl>tar xf prometheus-webhook-dingtalk-1.4.0.linux-amd64.tar.gz
</span></span><span class=line><span class=cl>mv prometheus-webhook-dingtalk-1.4.0.linux-amd64/* /etc/prometheus-webhook-dingtalk/
</span></span><span class=line><span class=cl>mv prometheus-webhook-dingtalk /bin/
</span></span><span class=line><span class=cl>cat <span class=s>&lt;&lt;EOF&gt; /lib/systemd/system/prometheus-webhook-dingtalk.service 
</span></span></span><span class=line><span class=cl><span class=s>[Unit]
</span></span></span><span class=line><span class=cl><span class=s>Description=prometheus-webhook-dingding
</span></span></span><span class=line><span class=cl><span class=s>Documentation=https://prometheus.io/
</span></span></span><span class=line><span class=cl><span class=s>After=network.target
</span></span></span><span class=line><span class=cl><span class=s>
</span></span></span><span class=line><span class=cl><span class=s>[Service]
</span></span></span><span class=line><span class=cl><span class=s>Type=simple
</span></span></span><span class=line><span class=cl><span class=s>User=prometheus
</span></span></span><span class=line><span class=cl><span class=s>ExecStart=/bin/prometheus-webhook-dingtalk --web.listen-address=&#34;:8070&#34; --web.enable-ui --config.file=&#34;/etc/prometheus-webhook-dingtalk/config.yml&#34;
</span></span></span><span class=line><span class=cl><span class=s>Restart=on-failure
</span></span></span><span class=line><span class=cl><span class=s>
</span></span></span><span class=line><span class=cl><span class=s>[Install]
</span></span></span><span class=line><span class=cl><span class=s>WantedBy=multi-user.target
</span></span></span><span class=line><span class=cl><span class=s>EOF</span>
</span></span><span class=line><span class=cl><span class=c1>## 启动服务</span>
</span></span><span class=line><span class=cl>systemctl <span class=nb>enable</span> prometheus-webhook-dingtalk.service
</span></span><span class=line><span class=cl>systemctl start prometheus-webhook-dingtalk.service
</span></span></code></pre></div><p>配置文件</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1>## Request timeout</span>
</span></span><span class=line><span class=cl><span class=c1># timeout: 5s</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>## Customizable templates path</span>
</span></span><span class=line><span class=cl><span class=c1>## Customizable templates path</span>
</span></span><span class=line><span class=cl>templates:
</span></span><span class=line><span class=cl>  <span class=c1># - contrib/templates/legacy/template.tmpl</span>
</span></span><span class=line><span class=cl>  <span class=c1># 自定义模板路径</span>
</span></span><span class=line><span class=cl>  - /etc/prometheus-webhook-dingtalk/template/default.tmpl
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>## 你还可以使用&#39; default_message &#39;覆盖默认模板</span>
</span></span><span class=line><span class=cl><span class=c1>## 下面的示例使用v0.3.0中的“legacy”模板</span>
</span></span><span class=line><span class=cl><span class=c1># default_message:</span>
</span></span><span class=line><span class=cl><span class=c1>#   title: &#39;{{ template &#34;legacy.title&#34; . }}&#39;</span>
</span></span><span class=line><span class=cl><span class=c1>#   text: &#39;{{ template &#34;legacy.content&#34; . }}&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>## Targets, previously was known as &#34;profiles&#34;</span>
</span></span><span class=line><span class=cl><span class=c1># 定义的webhook，钉钉创建的webhook token</span>
</span></span><span class=line><span class=cl>targets:
</span></span><span class=line><span class=cl><span class=c1># 如果有多个分组就可以在这里定义多个接口</span>
</span></span><span class=line><span class=cl>  ops:
</span></span><span class=line><span class=cl>    url: https://oapi.dingtalk.com/robot/send?access_token<span class=o>=</span>a4feed2322222222222222222222222
</span></span><span class=line><span class=cl>  web:
</span></span><span class=line><span class=cl>    url: https://oapi.dingtalk.com/robot/send?access_token<span class=o>=</span>a4feed2325c1333333333333333333333
</span></span></code></pre></div><p>定义模板：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> /etc/prometheus-webhook-dingtalk/template
</span></span><span class=line><span class=cl>cat default.tmpl
</span></span><span class=line><span class=cl><span class=o>{{</span> define <span class=s2>&#34;__subject&#34;</span> <span class=o>}}[{{</span> .Status <span class=p>|</span> toUpper <span class=o>}}{{</span> <span class=k>if</span> eq .Status <span class=s2>&#34;firing&#34;</span> <span class=o>}}</span>:<span class=o>{{</span> .Alerts.Firing <span class=p>|</span> len <span class=o>}}{{</span> end <span class=o>}}]</span> <span class=o>{{</span> .GroupLabels.SortedPairs.Values <span class=p>|</span> join <span class=s2>&#34; &#34;</span> <span class=o>}}</span> <span class=o>{{</span> <span class=k>if</span> gt <span class=o>(</span>len .CommonLabels<span class=o>)</span> <span class=o>(</span>len .GroupLabels<span class=o>)</span> <span class=o>}}({{</span> with .CommonLabels.Remove .GroupLabels.Names <span class=o>}}{{</span> .Values <span class=p>|</span> join <span class=s2>&#34; &#34;</span> <span class=o>}}{{</span> end <span class=o>}}){{</span> end <span class=o>}}{{</span> end <span class=o>}}</span>
</span></span><span class=line><span class=cl><span class=o>{{</span> define <span class=s2>&#34;__alertmanagerURL&#34;</span> <span class=o>}}{{</span> .ExternalURL <span class=o>}}</span>/#/alerts?receiver<span class=o>={{</span> .Receiver <span class=o>}}{{</span> end <span class=o>}}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>{{</span> define <span class=s2>&#34;__text_alert_list&#34;</span> <span class=o>}}{{</span> range . <span class=o>}}</span>
</span></span><span class=line><span class=cl>**Labels**
</span></span><span class=line><span class=cl><span class=o>{{</span> range .Labels.SortedPairs <span class=o>}}</span>&gt; - <span class=o>{{</span> .Name <span class=o>}}</span>: <span class=o>{{</span> .Value <span class=p>|</span> markdown <span class=p>|</span> html <span class=o>}}</span>
</span></span><span class=line><span class=cl><span class=o>{{</span> end <span class=o>}}</span>
</span></span><span class=line><span class=cl>**Annotations**
</span></span><span class=line><span class=cl><span class=o>{{</span> range .Annotations.SortedPairs <span class=o>}}</span>&gt; - <span class=o>{{</span> .Name <span class=o>}}</span>: <span class=o>{{</span> .Value <span class=p>|</span> markdown <span class=p>|</span> html <span class=o>}}</span>
</span></span><span class=line><span class=cl><span class=o>{{</span> end <span class=o>}}</span>
</span></span><span class=line><span class=cl>**Source:** <span class=o>[{{</span> .GeneratorURL <span class=o>}}]({{</span> .GeneratorURL <span class=o>}})</span>
</span></span><span class=line><span class=cl><span class=o>{{</span> end <span class=o>}}{{</span> end <span class=o>}}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>{{</span>/* Firing */<span class=o>}}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>{{</span> define <span class=s2>&#34;default.__text_alert_list&#34;</span> <span class=o>}}{{</span> range . <span class=o>}}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>**Trigger Time:** <span class=o>{{</span> dateInZone <span class=s2>&#34;2006.01.02 15:04:05&#34;</span> <span class=o>(</span>.StartsAt<span class=o>)</span> <span class=s2>&#34;Asia/Shanghai&#34;</span> <span class=o>}}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>**Summary:** <span class=o>{{</span> .Annotations.summary <span class=o>}}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>**Description:** <span class=o>{{</span> .Annotations.description <span class=o>}}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>**Graph:** <span class=o>[</span>📈 <span class=o>]({{</span> .GeneratorURL <span class=o>}})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>**Details:**
</span></span><span class=line><span class=cl><span class=o>{{</span> range .Labels.SortedPairs <span class=o>}}{{</span> <span class=k>if</span> and <span class=o>(</span>ne <span class=o>(</span>.Name<span class=o>)</span> <span class=s2>&#34;severity&#34;</span><span class=o>)</span> <span class=o>(</span>ne <span class=o>(</span>.Name<span class=o>)</span> <span class=s2>&#34;summary&#34;</span><span class=o>)</span> <span class=o>}}</span>&gt; - <span class=o>{{</span> .Name <span class=o>}}</span>: <span class=o>{{</span> .Value <span class=p>|</span> markdown <span class=p>|</span> html <span class=o>}}</span>
</span></span><span class=line><span class=cl><span class=o>{{</span> end <span class=o>}}{{</span> end <span class=o>}}</span>
</span></span><span class=line><span class=cl><span class=o>{{</span> end <span class=o>}}{{</span> end <span class=o>}}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>{{</span>/* Resolved */<span class=o>}}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>{{</span> define <span class=s2>&#34;default.__text_resolved_list&#34;</span> <span class=o>}}{{</span> range . <span class=o>}}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>**Trigger Time:** <span class=o>{{</span> dateInZone <span class=s2>&#34;2006.01.02 15:04:05&#34;</span> <span class=o>(</span>.StartsAt<span class=o>)</span> <span class=s2>&#34;Asia/Shanghai&#34;</span> <span class=o>}}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>**Resolved Time:** <span class=o>{{</span> dateInZone <span class=s2>&#34;2006.01.02 15:04:05&#34;</span> <span class=o>(</span>.EndsAt<span class=o>)</span> <span class=s2>&#34;Asia/Shanghai&#34;</span> <span class=o>}}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>**Summary:** <span class=o>{{</span> .Annotations.summary <span class=o>}}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>**Graph:** <span class=o>[</span>📈 <span class=o>]({{</span> .GeneratorURL <span class=o>}})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>**Details:**
</span></span><span class=line><span class=cl><span class=o>{{</span> range .Labels.SortedPairs <span class=o>}}{{</span> <span class=k>if</span> and <span class=o>(</span>ne <span class=o>(</span>.Name<span class=o>)</span> <span class=s2>&#34;severity&#34;</span><span class=o>)</span> <span class=o>(</span>ne <span class=o>(</span>.Name<span class=o>)</span> <span class=s2>&#34;summary&#34;</span><span class=o>)</span> <span class=o>}}</span>&gt; - <span class=o>{{</span> .Name <span class=o>}}</span>: <span class=o>{{</span> .Value <span class=p>|</span> markdown <span class=p>|</span> html <span class=o>}}</span>
</span></span><span class=line><span class=cl><span class=o>{{</span> end <span class=o>}}{{</span> end <span class=o>}}</span>
</span></span><span class=line><span class=cl><span class=o>{{</span> end <span class=o>}}{{</span> end <span class=o>}}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>{{</span>/* Default */<span class=o>}}</span>
</span></span><span class=line><span class=cl><span class=o>{{</span> define <span class=s2>&#34;default.title&#34;</span> <span class=o>}}{{</span> template <span class=s2>&#34;__subject&#34;</span> . <span class=o>}}{{</span> end <span class=o>}}</span>
</span></span><span class=line><span class=cl><span class=o>{{</span> define <span class=s2>&#34;default.content&#34;</span> <span class=o>}}</span><span class=c1>#### \[{{ .Status | toUpper }}{{ if eq .Status &#34;firing&#34; }}:{{ .Alerts.Firing | len }}{{ end }}\] **[{{ index .GroupLabels &#34;alertname&#34; }}]({{ template &#34;__alertmanagerURL&#34; . }})**</span>
</span></span><span class=line><span class=cl><span class=o>{{</span> <span class=k>if</span> gt <span class=o>(</span>len .Alerts.Firing<span class=o>)</span> <span class=m>0</span> -<span class=o>}}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>!<span class=o>[</span>Firing-img<span class=o>](</span>https://is3-ssl.mzstatic.com/image/thumb/Purple20/v4/e0/23/cf/e023cf56-0623-0cdf-afce-97ae90eabfda/mzl.uplmrpgi.png/320x0w.jpg<span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>**Alerts Firing**
</span></span><span class=line><span class=cl><span class=o>{{</span> template <span class=s2>&#34;default.__text_alert_list&#34;</span> .Alerts.Firing <span class=o>}}</span>
</span></span><span class=line><span class=cl><span class=o>{{</span>- end <span class=o>}}</span>
</span></span><span class=line><span class=cl><span class=o>{{</span> <span class=k>if</span> gt <span class=o>(</span>len .Alerts.Resolved<span class=o>)</span> <span class=m>0</span> -<span class=o>}}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>!<span class=o>[</span>Resolved-img<span class=o>](</span>https://is3-ssl.mzstatic.com/image/thumb/Purple18/v4/41/72/99/4172990a-f666-badf-9726-6204a320c16e/mzl.dypdixoy.png/320x0w.png<span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>**Alerts Resolved**
</span></span><span class=line><span class=cl><span class=o>{{</span> template <span class=s2>&#34;default.__text_resolved_list&#34;</span> .Alerts.Resolved <span class=o>}}</span>
</span></span><span class=line><span class=cl><span class=o>{{</span>- end <span class=o>}}</span>
</span></span><span class=line><span class=cl><span class=o>{{</span>- end <span class=o>}}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>{{</span>/* Legacy */<span class=o>}}</span>
</span></span><span class=line><span class=cl><span class=o>{{</span> define <span class=s2>&#34;legacy.title&#34;</span> <span class=o>}}{{</span> template <span class=s2>&#34;__subject&#34;</span> . <span class=o>}}{{</span> end <span class=o>}}</span>
</span></span><span class=line><span class=cl><span class=o>{{</span> define <span class=s2>&#34;legacy.content&#34;</span> <span class=o>}}</span><span class=c1>#### \[{{ .Status | toUpper }}{{ if eq .Status &#34;firing&#34; }}:{{ .Alerts.Firing | len }}{{ end }}\] **[{{ index .GroupLabels &#34;alertname&#34; }}]({{ template &#34;__alertmanagerURL&#34; . }})**</span>
</span></span><span class=line><span class=cl><span class=o>{{</span> template <span class=s2>&#34;__text_alert_list&#34;</span> .Alerts.Firing <span class=o>}}</span>
</span></span><span class=line><span class=cl><span class=o>{{</span>- end <span class=o>}}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>{{</span>/* Following names <span class=k>for</span> compatibility */<span class=o>}}</span>
</span></span><span class=line><span class=cl><span class=o>{{</span> define <span class=s2>&#34;ding.link.title&#34;</span> <span class=o>}}{{</span> template <span class=s2>&#34;default.title&#34;</span> . <span class=o>}}{{</span> end <span class=o>}}</span>
</span></span><span class=line><span class=cl><span class=o>{{</span> define <span class=s2>&#34;ding.link.content&#34;</span> <span class=o>}}{{</span> template <span class=s2>&#34;default.content&#34;</span> . <span class=o>}}{{</span> end <span class=o>}}</span>
</span></span></code></pre></div><p>在Alertmanager中配置警报</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># 接收器指定发送人以及发送渠道</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># ops分组的定义</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>ops</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>email_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>to</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;9935226@qq.com,10000@qq.com&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>send_resolved</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>headers</span><span class=p>:</span><span class=w> </span>{<span class=w> </span><span class=nt>Subject</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;[operations] 报警邮件&#34;</span>}<span class=w> </span><span class=c># 接收邮件的标题</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># 钉钉配置</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>webhook_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>url</span><span class=p>:</span><span class=w> </span><span class=l>http://localhost:8070/dingtalk/ops/send</span><span class=w> </span><span class=c># 这里是在钉钉开源组件中的接口，如果单独定义的receiver需要对应你的分组与钉钉机器人的webhook token</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># 企业微信配置</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>wechat_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>corp_id</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;ww5421dksajhdasjkhj&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>api_url</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;https://qyapi.weixin.qq.com/cgi-bin/&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>send_resolved</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>to_party</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;2&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>agent_id</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;1000002&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>api_secret</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;Tm1kkEE3RGqVhv5hO-khdakjsdkjsahjkdksahjkdsahkj&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># web</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>web</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>email_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>to</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;9935226@qq.com&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>send_resolved</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>headers</span><span class=p>:</span><span class=w> </span>{<span class=w> </span><span class=nt>Subject</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;[web] 报警邮件&#34;</span>}<span class=w> </span><span class=c># 接收邮件的标题</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>webhook_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>url</span><span class=p>:</span><span class=w> </span><span class=l>http://localhost:8070/dingtalk/web/send</span><span class=w>
</span></span></span></code></pre></div><p>继续使用上面的触发模拟警报，此时会同时让三个警报都接受到警报信息，我们这里只是为了调试，往往一个警报通知就可以满足需求了，对于重要业务还是需要使用电话以及短信提醒。</p><p>钉钉Firing警报：</p><p><img src=https://cdn.jsdelivr.net/gh/ljzsdut/images@master/default/640-20200806121116330-1596687076413.png alt=钉钉警报信息></p><p>钉钉Resolve警报：</p><p><img src=https://cdn.jsdelivr.net/gh/ljzsdut/images@master/default/640-20200806121124745-1596687084841.png alt=钉钉恢复信息></p><div class=gdoc-page__anchorwrap><h3 id=警报通知模板>警报通知模板
<a data-clipboard-text=https://note.ljzsdut.com/%E4%BA%91%E5%8E%9F%E7%94%9F/Prometheus/006-altermanager%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%A6%E8%A7%A3/#警报通知模板 class="gdoc-page__anchor clip flex align-center" title="Anchor to: 警报通知模板" aria-label="Anchor to: 警报通知模板" href=#%e8%ad%a6%e6%8a%a5%e9%80%9a%e7%9f%a5%e6%a8%a1%e6%9d%bf><svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"/></svg></a></h3></div><p>Prometheus 创建警报转发给 Alertmanager，Alertmanager会根据不同的 Label 向不同的 Receiver 发送警报通知，如Email、钉钉、企业微信、飞书、短信等等。<em><strong>所有Receiver都一个接收模板</strong></em>，然后通过模板格式化以后发送警报信息给 Receiver。Alertmanager 自带的模板是基于 Go 语言的 template 模板，用户可以根据自己的需求去定义自己需要的模板，上面我给出的模板已经足够大家的基础使用了。</p><p>下面介绍下通常自定义模板中会需要用到的一些参数说明</p><div class=table-wrap><table><thead><tr><th style=text-align:center>名称</th><th style=text-align:center>数据类型</th><th style=text-align:center>描述</th></tr></thead><tbody><tr><td style=text-align:center><code>Receiver</code></td><td style=text-align:center>string</td><td style=text-align:center>接受警报通知的接收器名称</td></tr><tr><td style=text-align:center><code>Status</code></td><td style=text-align:center>string</td><td style=text-align:center>警报状态，例如：Firing或Resolved的通知</td></tr><tr><td style=text-align:center><code>Alert</code></td><td style=text-align:center>Alert</td><td style=text-align:center>警报通知的真实内容，警报中的所有列表</td></tr><tr><td style=text-align:center><code>GroupLables</code></td><td style=text-align:center>KV</td><td style=text-align:center>包含警报通知的组标签</td></tr><tr><td style=text-align:center><code>CommandLabels</code></td><td style=text-align:center>KV</td><td style=text-align:center>所有警报的公共标签，包含GroupLabels的所有标签</td></tr><tr><td style=text-align:center><code>CommandAnnotations</code></td><td style=text-align:center>KV</td><td style=text-align:center>注释，比如自定义的一些字符串</td></tr><tr><td style=text-align:center><code>ExternalURL</code></td><td style=text-align:center>string</td><td style=text-align:center>警报信息中的Alertmanager地址</td></tr></tbody></table></div><p>上面说的KV类型是一组使用不标示标签与注释的Key/Value字符串对，可以在Alertmanager中的默认模板中看到其定义。default.tmpl</p><p>其中邮件中所显示的 <code>View In AlertManager</code> ，Receiver 与 ExternalURL的定义其实就是模板中的 <strong>.ExternalURL</strong> 与 <strong>.Receiver</strong> 。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>{{</span> define <span class=s2>&#34;__alertmanager&#34;</span> <span class=o>}}</span>AlertManager<span class=o>{{</span> end <span class=o>}}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>{{</span> define <span class=s2>&#34;__alertmanagerURL&#34;</span> <span class=o>}}{{</span> .ExternalURL <span class=o>}}</span>/#/alerts?receiver<span class=o>={{</span> .Receiver <span class=p>|</span> urlquery <span class=o>}}{{</span> end <span class=o>}}</span>
</span></span><span class=line><span class=cl>...
</span></span></code></pre></div><p>在收到的邮箱警报中可以看到 <code>View In AlertManager</code> 的链接地址是：<code>http://192.168.1.220:19093/#/alerts?receiver=ops</code> 。</p><p>对于Alert的类型，警报列表的字段还包含了如下参数与定义、描述</p><div class=table-wrap><table><thead><tr><th style=text-align:center>名称</th><th style=text-align:center>数据类型</th><th style=text-align:center>描述</th></tr></thead><tbody><tr><td style=text-align:center><code>Status</code></td><td style=text-align:center>string</td><td style=text-align:center>定义警报状态是已经解决或处于触发状态</td></tr><tr><td style=text-align:center><code>Label</code></td><td style=text-align:center>KV</td><td style=text-align:center>包含警报中的标签</td></tr><tr><td style=text-align:center><code>Annotations</code></td><td style=text-align:center>KV</td><td style=text-align:center>警报的一组注释</td></tr><tr><td style=text-align:center><code>StartsAt</code></td><td style=text-align:center>time.Time</td><td style=text-align:center>警报触发时间</td></tr><tr><td style=text-align:center><code>EndsAt</code></td><td style=text-align:center>time.Time</td><td style=text-align:center>警报结束时间，只在警报结束的时间时设置</td></tr><tr><td style=text-align:center><code>GeneratorURL</code></td><td style=text-align:center>string</td><td style=text-align:center>警报规则的连接URL，也就是Prometheus中的Rules查询地址</td></tr></tbody></table></div><p>对于警报中的通知模板首先要熟悉go语言的template语法以及HTML简单的基础知识，然后把上面相关的元数据的一些信息了解清楚，就可以自己调整模板了，如果你实在懒的改，我调整好的模板可以直接拿去用，把对应的指标、标签名字改一下就可以用了。</p><p>以下是我自己修改了一下的模板警报格式，大家可以看看，这个是通过官方的 default.tmpl 修改的。</p><p><img src=https://cdn.jsdelivr.net/gh/ljzsdut/images@master/default/640-20200806121458023-1596687298107.png alt=Email模板警报信息></p><div class=gdoc-page__anchorwrap><h3 id=开源警报组件推荐>开源警报组件推荐
<a data-clipboard-text=https://note.ljzsdut.com/%E4%BA%91%E5%8E%9F%E7%94%9F/Prometheus/006-altermanager%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%A6%E8%A7%A3/#开源警报组件推荐 class="gdoc-page__anchor clip flex align-center" title="Anchor to: 开源警报组件推荐" aria-label="Anchor to: 开源警报组件推荐" href=#%e5%bc%80%e6%ba%90%e8%ad%a6%e6%8a%a5%e7%bb%84%e4%bb%b6%e6%8e%a8%e8%8d%90><svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"/></svg></a></h3></div><ul><li>Prometheus-Webhook-Dingtalk</li></ul><p>一个开源的第三方警报插件，针对钉钉机器人 <code>webhook</code> 做集成，Go语言编写，现在迭代的已经很不错了，可能有一些功能还是有些限制，比如针对 <code>Markdown</code> @某个人无法实现，原因是因钉钉自身API没有支持这个功能。</p><ul><li>Alertmanager-wechatrobot-webhook</li></ul><p>这个开源组件是将<code>Alertmanger</code> <code>Webhook</code> 消息转换为可以接收消息的企业微信机器人，也是go语言编写，<code>Alertmanager</code> 默认已经集成企业微信配置，如果有特殊需求，需要使用企业微信机器人的可以看看这个。</p><ul><li>PrometheusAlert全家桶</li></ul><p>如果有对短信、电话警报等其他需求的同学，推荐这个开源警报组件，Go语言编写，Web框架是 <code>Beego</code> ，支持将收到的这些消息发送到钉钉，微信，飞书，腾讯短信，腾讯电话，阿里云短信，阿里云电话，华为短信，容联云电话等，这里就不细讲了。</p><p><img src="https://mmbiz.qpic.cn/mmbiz_png/hBBhGOkMVjj9T8HpMuPn41LMIlicfNRG2ED1oPqf3MA3l1HYwCR7bicXnE7c79BIJXLE39w4oUz4bAJgYZDZPYAA/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1" alt=img></p><div class=gdoc-page__anchorwrap><h2 id=告警通知屏蔽>告警通知屏蔽
<a data-clipboard-text=https://note.ljzsdut.com/%E4%BA%91%E5%8E%9F%E7%94%9F/Prometheus/006-altermanager%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%A6%E8%A7%A3/#告警通知屏蔽 class="gdoc-page__anchor clip flex align-center" title="Anchor to: 告警通知屏蔽" aria-label="Anchor to: 告警通知屏蔽" href=#%e5%91%8a%e8%ad%a6%e9%80%9a%e7%9f%a5%e5%b1%8f%e8%94%bd><svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"/></svg></a></h2></div><p>Alertmanager提供了方式可以帮助用户控制告警通知的行为，包括<strong>预先定义的抑制机制</strong>和<strong>临时定义的静默规则</strong>。</p><div class=gdoc-page__anchorwrap><h3 id=抑制机制inhibit_rules>抑制机制（inhibit_rules）
<a data-clipboard-text=https://note.ljzsdut.com/%E4%BA%91%E5%8E%9F%E7%94%9F/Prometheus/006-altermanager%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%A6%E8%A7%A3/#抑制机制inhibit_rules class="gdoc-page__anchor clip flex align-center" title="Anchor to: 抑制机制（inhibit_rules）" aria-label="Anchor to: 抑制机制（inhibit_rules）" href=#%e6%8a%91%e5%88%b6%e6%9c%ba%e5%88%b6inhibit_rules><svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"/></svg></a></h3></div><p>Alertmanager的抑制机制可以避免当某种问题告警产生之后用户接收到大量由此问题导致的一系列的其它告警通知。</p><p>例如，当集群不可用时，用户可能只希望接收到一条告警，告诉他这时候集群出现了问题，而不是大量的如集群中的应用异常、中间件服务异常的告警通知。</p><p>再例如，IDC托管机柜中，若每一个机柜接入层仅仅是单台交换机，那么该机柜接入交换机故障会造成机柜中服务器非 <code>up</code> 状态警报。再有服务器上部署的应用服务不可访问也会触发警报。这时候，可以通过在Alertmanager配置忽略由于交换机故障而造成的此机柜中的所有服务器及其应用不可达而产生的警报。</p><p>在Alertmanager配置文件中，使用inhibit_rules定义一组告警的抑制规则：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>inhibit_rules</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>[</span><span class=w> </span>- <span class=l>&lt;inhibit_rule&gt; ... ]</span><span class=w>
</span></span></span></code></pre></div><p>每一条抑制规则的具体配置如下：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>target_match</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[ &lt;labelname&gt;</span><span class=p>:</span><span class=w> </span><span class=l>&lt;labelvalue&gt;, ... ]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>target_match_re</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[ &lt;labelname&gt;</span><span class=p>:</span><span class=w> </span><span class=l>&lt;regex&gt;, ... ]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>source_match</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[ &lt;labelname&gt;</span><span class=p>:</span><span class=w> </span><span class=l>&lt;labelvalue&gt;, ... ]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>source_match_re</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[ &lt;labelname&gt;</span><span class=p>:</span><span class=w> </span><span class=l>&lt;regex&gt;, ... ]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[ equal</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;[&#39;</span><span class=w> </span><span class=l>&lt;labelname&gt;, ... &#39;]&#39; ]</span><span class=w>
</span></span></span></code></pre></div><p>如果已经发送的告警通知匹配到source_matchtarget_match和source_match_re规则，当有新的告警规则如果满足target_match或者target_match_re定义的匹配规则，并且已发送的告警与新产生的告警中equal定义的标签<strong>完全相同</strong>，则启动抑制机制，新的告警不会发送。</p><blockquote><p>source_match匹配到的告警会抑制target_match匹配到的告警。</p></blockquote><p>例如，定义如下抑制规则：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 同一个主机上的服务，如果是因为nodedown导致的critical告警，则会被抑制。</span>
</span></span><span class=line><span class=cl>- source_match:
</span></span><span class=line><span class=cl>    alertname: NodeDown
</span></span><span class=line><span class=cl>    severity: critical
</span></span><span class=line><span class=cl>  target_match:
</span></span><span class=line><span class=cl>    severity: critical
</span></span><span class=line><span class=cl>  equal:
</span></span><span class=line><span class=cl>    - node
</span></span></code></pre></div><p>例如当集群中的某一个主机节点异常宕机导致告警NodeDown被触发，同时在告警规则中定义了告警级别severity=critical。由于主机异常宕机，该主机上部署的所有服务、中间件会不可用并触发报警。根据抑制规则的定义，如果有新的告警级别为severity=critical，并且告警中标签node的值与NodeDown告警的相同，则说明新的告警是由NodeDown导致的，则启动抑制机制停止向接收器发送通知。</p><p>例如：在多k8s监控的场景中，对于同一个k8s集群(cluster)中的同一个服务(service)的相同告警(alertname)，如果critical级别的告警已经触发了，warning级别的报警就会抑制。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>    </span><span class=nt>inhibit_rules</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>source_match</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>severity</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;critical&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>target_match</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>severity</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;warning&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>equal</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s1>&#39;alertname&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;cluster&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;service&#39;</span><span class=p>]</span><span class=w>
</span></span></span></code></pre></div><div class=gdoc-page__anchorwrap><h3 id=临时静默处理>临时静默处理
<a data-clipboard-text=https://note.ljzsdut.com/%E4%BA%91%E5%8E%9F%E7%94%9F/Prometheus/006-altermanager%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%A6%E8%A7%A3/#临时静默处理 class="gdoc-page__anchor clip flex align-center" title="Anchor to: 临时静默处理" aria-label="Anchor to: 临时静默处理" href=#%e4%b8%b4%e6%97%b6%e9%9d%99%e9%bb%98%e5%a4%84%e7%90%86><svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"/></svg></a></h3></div><p>除了基于抑制机制可以控制告警通知的行为以外，用户或者管理员还可以直接通过Alertmanager的UI临时屏蔽特定的告警通知（例如维护期间，可以静默告警。将告警静默后，就不会发送邮件等告警通知了）。</p><p><code>Silences</code> 提供了一个简单的机制，根据标签快速对警报进行静默处理；对传进来的警报进行匹配检查，如果接收到的警报符合静默的配置，Alertmanager则不会向receiver发送警报通知。</p><p>静默操作不能在Alertmanager配置文件中配置，静默是需要在WEB UI界面中设置临时屏蔽指定，或使用amtool命令行进行配置。</p><p>进入Alertmanager UI，点击”New Silence”显示如下内容：</p><p><img src=https://cdn.jsdelivr.net/gh/ljzsdut/images@master/default/silent-1-1596680167418.png alt=img></p><p>用户可以通过该UI定义新的静默规则的开始时间以及持续时间，通过Matchers部分可以设置多条匹配规则(字符串匹配或者正则匹配)。填写当前静默规则的创建者以及创建原因后，点击”Create”按钮即可。</p><p>通过”Preview Alerts”可以查看预览当前匹配规则匹配到的告警信息。静默规则创建成功后，Alertmanager会开始加载该规则并且设置状态为Pending,当规则生效后则进行到Active状态。</p><p><img src=https://images.k8stech.net/prom-alert/silent-2.png alt=img></p><p>当静默规则生效以后，从Alertmanager的Alerts页面下用户将不会看到该规则匹配到的告警信息。</p><p><img src=https://images.k8stech.net/prom-alert/silent-3.png alt=img></p><p>对于已经生效的规则，用户可以通过手动点击”Expire“按钮使当前规则过期。</p><p>此外，临时静默也可以通过命令行进行配置：</p><p><img src=https://cdn.jsdelivr.net/gh/ljzsdut/images@master/default/image-20200630152545648-1595809285747.png alt=image-20200630152545648></p><div class=gdoc-page__anchorwrap><h2 id=使用recoding-rules优化性能>使用Recoding Rules优化性能
<a data-clipboard-text=https://note.ljzsdut.com/%E4%BA%91%E5%8E%9F%E7%94%9F/Prometheus/006-altermanager%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%A6%E8%A7%A3/#使用recoding-rules优化性能 class="gdoc-page__anchor clip flex align-center" title="Anchor to: 使用Recoding Rules优化性能" aria-label="Anchor to: 使用Recoding Rules优化性能" href=#%e4%bd%bf%e7%94%a8recoding-rules%e4%bc%98%e5%8c%96%e6%80%a7%e8%83%bd><svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"/></svg></a></h2></div><p>通过PromQL可以实时对Prometheus中采集到的样本数据进行查询，聚合以及其它各种运算操作。而在某些PromQL较为复杂且计算量较大时，直接使用PromQL可能会导致Prometheus响应超时的情况。这时需要一种能够类似于后台批处理的机制能够在后台完成这些复杂运算的计算，对于使用者而言只需要查询这些运算结果即可。Prometheus通过Recoding Rule规则支持这种后台计算的方式，可以实现对复杂查询的性能优化，提高查询效率。</p><div class=gdoc-page__anchorwrap><h3 id=定义recoding-rules>定义Recoding rules
<a data-clipboard-text=https://note.ljzsdut.com/%E4%BA%91%E5%8E%9F%E7%94%9F/Prometheus/006-altermanager%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%A6%E8%A7%A3/#定义recoding-rules class="gdoc-page__anchor clip flex align-center" title="Anchor to: 定义Recoding rules" aria-label="Anchor to: 定义Recoding rules" href=#%e5%ae%9a%e4%b9%89recoding-rules><svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"/></svg></a></h3></div><p>在Prometheus配置文件中，通过rule_files定义recoding rule规则文件的访问路径。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>rule_files</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>[</span><span class=w> </span>- <span class=l>&lt;filepath_glob&gt; ... ]</span><span class=w>
</span></span></span></code></pre></div><p>每一个规则文件通过以下格式进行定义：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>groups</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>[</span><span class=w> </span>- <span class=l>&lt;rule_group&gt; ]</span><span class=w>
</span></span></span></code></pre></div><p>一个简单的规则文件可能是这个样子的：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>groups</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>example</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>rules</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>record</span><span class=p>:</span><span class=w> </span><span class=l>job:http_inprogress_requests:sum</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>expr</span><span class=p>:</span><span class=w> </span><span class=l>sum(http_inprogress_requests) by (job)</span><span class=w>
</span></span></span></code></pre></div><p>rule_group的具体配置项如下所示：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># The name of the group. Must be unique within a file.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># How often rules in the group are evaluated.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[ interval</span><span class=p>:</span><span class=w> </span><span class=l>&lt;duration&gt; | default = global.evaluation_interval ]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>rules</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>[</span><span class=w> </span>- <span class=l>&lt;rule&gt; ... ]</span><span class=w>
</span></span></span></code></pre></div><p>与告警规则一致，一个group下可以包含多条规则rule。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># The name of the time series to output to. Must be a valid metric name.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>record</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># The PromQL expression to evaluate. Every evaluation cycle this is</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># evaluated at the current time, and the result recorded as a new set of</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># time series with the metric name as given by &#39;record&#39;.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>expr</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Labels to add or overwrite before storing the result.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>labels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[ &lt;labelname&gt;</span><span class=p>:</span><span class=w> </span><span class=l>&lt;labelvalue&gt; ]</span><span class=w>
</span></span></span></code></pre></div><p>根据规则中的定义，Prometheus会在后台完成expr中定义的PromQL表达式计算，并且<strong>将计算结果保存到新的时间序列record中</strong>。同时还可以通过labels为这些样本添加额外的标签。</p><p>这些规则文件的计算频率与告警规则计算频率一致，都通过global.evaluation_interval定义:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>global</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[ evaluation_interval</span><span class=p>:</span><span class=w> </span><span class=l>&lt;duration&gt; | default = 1m ]</span><span class=w>
</span></span></span></code></pre></div><div class=gdoc-page__anchorwrap><h2 id=alertmanager配置文件完整示例>alertmanager配置文件完整示例
<a data-clipboard-text=https://note.ljzsdut.com/%E4%BA%91%E5%8E%9F%E7%94%9F/Prometheus/006-altermanager%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%A6%E8%A7%A3/#alertmanager配置文件完整示例 class="gdoc-page__anchor clip flex align-center" title="Anchor to: alertmanager配置文件完整示例" aria-label="Anchor to: alertmanager配置文件完整示例" href=#alertmanager%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6%e5%ae%8c%e6%95%b4%e7%a4%ba%e4%be%8b><svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"/></svg></a></h2></div><div class=gdoc-page__anchorwrap><h3 id=示例1官方示例>示例1：官方示例
<a data-clipboard-text=https://note.ljzsdut.com/%E4%BA%91%E5%8E%9F%E7%94%9F/Prometheus/006-altermanager%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%A6%E8%A7%A3/#示例1官方示例 class="gdoc-page__anchor clip flex align-center" title="Anchor to: 示例1：官方示例" aria-label="Anchor to: 示例1：官方示例" href=#%e7%a4%ba%e4%be%8b1%e5%ae%98%e6%96%b9%e7%a4%ba%e4%be%8b><svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"/></svg></a></h3></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>global</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># The smarthost and SMTP sender used for mail notifications.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>smtp_smarthost</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;localhost:25&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>smtp_from</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;alertmanager@example.org&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>smtp_auth_username</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;alertmanager@example.org&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>smtp_auth_password</span><span class=p>:</span><span class=w> </span><span class=l>xxx</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>smtp_require_tls</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=w>  </span><span class=c>#默认为true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c>#根路由必须没有任何匹配器，因为它是所有警报的入口点。 它需要配置一个接收器，以便将与任何子路由都不匹配的警报发送给某人。</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c>#默认路由</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>route</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>receiver</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;team-X-mails&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># The labels by which incoming alerts are grouped together. For example,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># multiple alerts coming in for cluster=A and alertname=LatencyHigh would</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># be batched into a single group.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># 分组标签</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>group_by</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s1>&#39;alertname&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;cluster&#39;</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># When a new group of alerts is created by an incoming alert, wait at</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># least &#39;group_wait&#39; to send the initial notification.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># This way ensures that you get multiple alerts for the same group that start</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># firing shortly after another are batched together on the first</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># notification.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>group_wait</span><span class=p>:</span><span class=w> </span><span class=l>30s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># When the first notification was sent, wait &#39;group_interval&#39; to send a batch</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># of new alerts that started firing for that group.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>group_interval</span><span class=p>:</span><span class=w> </span><span class=l>5m</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># If an alert has successfully been sent, wait &#39;repeat_interval&#39; to</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># resend them.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>repeat_interval</span><span class=p>:</span><span class=w> </span><span class=l>3h</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># All the above attributes are inherited by all child routes and can</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># overwritten on each.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># The child route trees.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>routes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># This routes performs a regular expression match on alert labels to</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># catch alerts that are related to a list of services.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>match_re</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>service</span><span class=p>:</span><span class=w> </span><span class=l>^(foo1|foo2|baz)$</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>receiver</span><span class=p>:</span><span class=w> </span><span class=l>team-X-mails</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># The service has a sub-route for critical alerts, any alerts</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># that do not match, i.e. severity != critical, fall-back to the</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># parent node and are sent to &#39;team-X-mails&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>routes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>match</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>severity</span><span class=p>:</span><span class=w> </span><span class=l>critical</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receiver</span><span class=p>:</span><span class=w> </span><span class=l>team-X-pager</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>match</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>service</span><span class=p>:</span><span class=w> </span><span class=l>files</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>receiver</span><span class=p>:</span><span class=w> </span><span class=l>team-Y-mails</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>routes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>match</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>severity</span><span class=p>:</span><span class=w> </span><span class=l>critical</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receiver</span><span class=p>:</span><span class=w> </span><span class=l>team-Y-pager</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># This route handles all alerts coming from a database service. If there&#39;s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># no team to handle it, it defaults to the DB team.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>match</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>service</span><span class=p>:</span><span class=w> </span><span class=l>database</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>receiver</span><span class=p>:</span><span class=w> </span><span class=l>team-DB-pager</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># Also group alerts by affected database.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>group_by</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>alertname, cluster, database]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>routes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>match</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>owner</span><span class=p>:</span><span class=w> </span><span class=l>team-X</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receiver</span><span class=p>:</span><span class=w> </span><span class=l>team-X-pager</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>match</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>owner</span><span class=p>:</span><span class=w> </span><span class=l>team-Y</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receiver</span><span class=p>:</span><span class=w> </span><span class=l>team-Y-pager</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Inhibition rules allow to mute a set of alerts given that another alert is</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># firing.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># We use this to mute any warning-level notifications if the same alert is</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># already critical.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>inhibit_rules</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>source_match</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>severity</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;critical&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>target_match</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>severity</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;warning&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Apply inhibition if the alertname is the same.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># 必须在源警报和目标警报中具有相等值的标签才能使抑制生效。</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># CAUTION: </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c>#   If all label names listed in `equal` are missing </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c>#   from both the source and target alerts,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c>#   the inhibition rule will apply!</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>equal</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s1>&#39;alertname&#39;</span><span class=p>]</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;team-X-mails&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>email_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>to</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;team-X+alerts@example.org, team-Y+alerts@example.org&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;team-X-pager&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>email_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>to</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;team-X+alerts-critical@example.org&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>pagerduty_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>routing_key</span><span class=p>:</span><span class=w> </span><span class=l>&lt;team-X-key&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;team-Y-mails&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>email_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>to</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;team-Y+alerts@example.org&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;team-Y-pager&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>pagerduty_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>routing_key</span><span class=p>:</span><span class=w> </span><span class=l>&lt;team-Y-key&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;team-DB-pager&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>pagerduty_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>routing_key</span><span class=p>:</span><span class=w> </span><span class=l>&lt;team-DB-key&gt;</span><span class=w>
</span></span></span></code></pre></div><div class=gdoc-page__anchorwrap><h3 id=示例2案例配置>示例2：案例配置
<a data-clipboard-text=https://note.ljzsdut.com/%E4%BA%91%E5%8E%9F%E7%94%9F/Prometheus/006-altermanager%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%A6%E8%A7%A3/#示例2案例配置 class="gdoc-page__anchor clip flex align-center" title="Anchor to: 示例2：案例配置" aria-label="Anchor to: 示例2：案例配置" href=#%e7%a4%ba%e4%be%8b2%e6%a1%88%e4%be%8b%e9%85%8d%e7%bd%ae><svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"/></svg></a></h3></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c>## Alertmanager 配置文件</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>global</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>resolve_timeout</span><span class=p>:</span><span class=w> </span><span class=l>5m</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># smtp配置</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>smtp_from</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;prom-alert@example.com&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>smtp_smarthost</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;email-smtp.us-west-2.amazonaws.com:465&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>smtp_auth_username</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;user&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>smtp_auth_password</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;pass&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>smtp_require_tls</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># email、企业微信的模板配置存放位置，钉钉的模板会单独讲如果配置。</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>templates</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=s1>&#39;/data/alertmanager/templates/*.tmpl&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># 路由分组</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>route</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>receiver</span><span class=p>:</span><span class=w> </span><span class=l>ops </span><span class=w> </span><span class=c>#默认的receiver，没有被路由匹配到的告警使用该receiver</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>group_wait</span><span class=p>:</span><span class=w> </span><span class=l>30s</span><span class=w> </span><span class=c># 在组内等待所配置的时间，如果同组内，30秒内出现相同报警，在一个组内出现。</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>group_interval</span><span class=p>:</span><span class=w> </span><span class=l>5m</span><span class=w> </span><span class=c># 如果组内内容不变化，合并为一条警报信息，5m后发送。</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>repeat_interval</span><span class=p>:</span><span class=w> </span><span class=l>24h</span><span class=w> </span><span class=c># 发送报警间隔，如果指定时间内没有修复，则重新发送报警。</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>group_by</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>alertname] </span><span class=w> </span><span class=c># 报警分组</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>routes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># ops</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>match</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>team</span><span class=p>:</span><span class=w> </span><span class=l>operations</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>receiver</span><span class=p>:</span><span class=w> </span><span class=l>ops</span><span class=w> </span><span class=c># 路由和标签，根据match来指定发送目标，如果 rule的lable包含&#34;team=operations&#34;， 使用ops来发送</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>group_wait</span><span class=p>:</span><span class=w> </span><span class=l>10s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>group_by</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>env,dc]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># db</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>receiver</span><span class=p>:</span><span class=w> </span><span class=l>db</span><span class=w> </span><span class=c># 路由和标签，根据match来指定发送目标，如果 rule的lable包含&#34;team=db&#34;， 使用&#34;db&#34;来发送</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>group_wait</span><span class=p>:</span><span class=w> </span><span class=l>10s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>match</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>team</span><span class=p>:</span><span class=w> </span><span class=l>db</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>match_re</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>service</span><span class=p>:</span><span class=w> </span><span class=l>nginx|apache</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>receiver: &#39;web&#39;  # 分组继承父极路由，即 group_by</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>alertname]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>match_re</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>service</span><span class=p>:</span><span class=w> </span><span class=l>hbase|spark</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>receiver</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;hadoop&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>match_re</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>serice</span><span class=p>:</span><span class=w> </span><span class=l>mysql|mongodb</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>receiver</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;db&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>receiver</span><span class=p>:</span><span class=w> </span><span class=l>ops</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>group_wait</span><span class=p>:</span><span class=w> </span><span class=l>10s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>match</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>status</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;High&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># 接收器 :指定发送人以及发送渠道</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># ops分组的定义，使用了多种通知工具：email、钉钉、wcaht</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>ops</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># email</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>email_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>to</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;9935226@qq.com,10000@qq.com&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>send_resolved</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>headers</span><span class=p>:</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>subject</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;[operations] 报警邮件&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>from</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;警报中心&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>to</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;小煜狼皇&#34;</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># 钉钉配置</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>webhook_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>url</span><span class=p>:</span><span class=w> </span><span class=l>http://localhost:8070/dingtalk/ops/send</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># 企业微信配置</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>wechat_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>corp_id</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;ww5421dksajhdasjkhj&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>api_url</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;https://qyapi.weixin.qq.com/cgi-bin/&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>send_resolved</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>to_party</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;2&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>agent_id</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;1000002&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>api_secret</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;Tm1kkEE3RGqVhv5hO-khdakjsdkjsahjkdksahjkdsahkj&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># web</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>web</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>email_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>to</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;9935226@qq.com&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>send_resolved</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>headers</span><span class=p>:</span><span class=w> </span>{<span class=w> </span><span class=nt>Subject</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;[web] 报警邮件&#34;</span>}<span class=w> </span><span class=c># 接收邮件的标题</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>webhook_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>url</span><span class=p>:</span><span class=w> </span><span class=l>http://localhost:8070/dingtalk/web/send</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>url</span><span class=p>:</span><span class=w> </span><span class=l>http://localhost:8070/dingtalk/ops/send</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># db</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>db</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>email_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>to</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;9935226@qq.com&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>send_resolved</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>headers</span><span class=p>:</span><span class=w> </span>{<span class=w> </span><span class=nt>Subject</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;[db] 报警邮件&#34;</span>}<span class=w> </span><span class=c># 接收邮件的标题</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>webhook_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>url</span><span class=p>:</span><span class=w> </span><span class=l>http://localhost:8070/dingtalk/db/send</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>url</span><span class=p>:</span><span class=w> </span><span class=l>http://localhost:8070/dingtalk/ops/send</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># hadoop</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>hadoop</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>email_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>to</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;9935226@qq.com&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>send_resolved</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>headers</span><span class=p>:</span><span class=w> </span>{<span class=w> </span><span class=nt>Subject</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;[hadoop] 报警邮件&#34;</span>}<span class=w> </span><span class=c># 接收邮件的标题</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>webhook_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>url</span><span class=p>:</span><span class=w> </span><span class=l>http://localhost:8070/dingtalk/hadoop/send</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>url</span><span class=p>:</span><span class=w> </span><span class=l>http://localhost:8070/dingtalk/ops/send</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># 抑制器配置</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>inhibit_rules</span><span class=p>:</span><span class=w> </span><span class=c># 抑制规则</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>source_match: # 源标签警报触发时抑制含有目标标签的警报，在当前警报匹配 status</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;High&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>status</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;High&#39;</span><span class=w>  </span><span class=c># 此处的抑制匹配一定在最上面的route中配置不然，会提示找不key。</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>target_match</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>status: &#39;Warning&#39; # 目标标签值正则匹配，可以是正则表达式如</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;.*MySQL.*&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>equal</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s1>&#39;alertname&#39;</span><span class=p>,</span><span class=s1>&#39;operations&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;instance&#39;</span><span class=p>]</span><span class=w> </span><span class=c># 确保这个配置下的标签内容相同才会抑制，也就是说警报中必须有这三个标签值才会被抑制。</span><span class=w>
</span></span></span></code></pre></div><div class=gdoc-page__anchorwrap><h3 id=示例3简单配置>示例3：简单配置
<a data-clipboard-text=https://note.ljzsdut.com/%E4%BA%91%E5%8E%9F%E7%94%9F/Prometheus/006-altermanager%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%A6%E8%A7%A3/#示例3简单配置 class="gdoc-page__anchor clip flex align-center" title="Anchor to: 示例3：简单配置" aria-label="Anchor to: 示例3：简单配置" href=#%e7%a4%ba%e4%be%8b3%e7%ae%80%e5%8d%95%e9%85%8d%e7%bd%ae><svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"/></svg></a></h3></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>global</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>resolve_timeout</span><span class=p>:</span><span class=w> </span><span class=l>5m</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>route</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>receiver</span><span class=p>:</span><span class=w> </span><span class=l>webhook</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>group_wait</span><span class=p>:</span><span class=w> </span><span class=l>30s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>group_interval</span><span class=p>:</span><span class=w> </span><span class=l>5m</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>repeat_interval</span><span class=p>:</span><span class=w> </span><span class=l>4h</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>group_by</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>alertname]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>routes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>receiver</span><span class=p>:</span><span class=w> </span><span class=l>webhook</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>group_wait</span><span class=p>:</span><span class=w> </span><span class=l>10s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>match</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>team</span><span class=p>:</span><span class=w> </span><span class=l>node</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>webhook</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>webhook_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>url</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;http://apollo/hooks/dingtalk/&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>send_resolved</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>url</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;http://apollo/hooks/prome/&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>send_resolved</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span></code></pre></div><div class=gdoc-page__anchorwrap><h3 id=示例4rancher>示例4：rancher
<a data-clipboard-text=https://note.ljzsdut.com/%E4%BA%91%E5%8E%9F%E7%94%9F/Prometheus/006-altermanager%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%A6%E8%A7%A3/#示例4rancher class="gdoc-page__anchor clip flex align-center" title="Anchor to: 示例4：rancher" aria-label="Anchor to: 示例4：rancher" href=#%e7%a4%ba%e4%be%8b4rancher><svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"/></svg></a></h3></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>global</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>resolve_timeout</span><span class=p>:</span><span class=w> </span><span class=l>5m</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>http_config</span><span class=p>:</span><span class=w> </span>{}<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>smtp_hello</span><span class=p>:</span><span class=w> </span><span class=l>localhost</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>slack_api_url</span><span class=p>:</span><span class=w> </span><span class=l>&lt;secret&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>pagerduty_url</span><span class=p>:</span><span class=w> </span><span class=l>https://events.pagerduty.com/v2/enqueue</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>hipchat_api_url</span><span class=p>:</span><span class=w> </span><span class=l>https://api.hipchat.com/</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>opsgenie_api_url</span><span class=p>:</span><span class=w> </span><span class=l>https://api.opsgenie.com/</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>wechat_api_url</span><span class=p>:</span><span class=w> </span><span class=l>https://qyapi.weixin.qq.com/cgi-bin/</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>victorops_api_url</span><span class=p>:</span><span class=w> </span><span class=l>https://alert.victorops.com/integrations/generic/20131114/alert/</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>route</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>receiver</span><span class=p>:</span><span class=w> </span><span class=l>rancherlabs</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>routes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>receiver</span><span class=p>:</span><span class=w> </span><span class=l>c-4cvw9:etcd-alert</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>group_by</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>group_id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>match</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>group_id</span><span class=p>:</span><span class=w> </span><span class=l>c-4cvw9:etcd-alert</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>continue</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>routes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>group_by</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>rule_id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>component_name</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>match</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>rule_id</span><span class=p>:</span><span class=w> </span><span class=l>c-4cvw9:etcd-alert_etcd-system-service</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>continue</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>group_wait</span><span class=p>:</span><span class=w> </span><span class=l>10m</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>group_interval</span><span class=p>:</span><span class=w> </span><span class=l>3m</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>repeat_interval</span><span class=p>:</span><span class=w> </span><span class=l>1h</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>group_by</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>rule_id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>match</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>rule_id</span><span class=p>:</span><span class=w> </span><span class=l>c-4cvw9:etcd-alert_no-leader</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>continue</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>group_by</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>rule_id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>match</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>rule_id</span><span class=p>:</span><span class=w> </span><span class=l>c-4cvw9:etcd-alert_db-over-size</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>continue</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>group_by</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>rule_id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>match</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>rule_id</span><span class=p>:</span><span class=w> </span><span class=l>c-4cvw9:etcd-alert_high-number-of-leader-changes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>continue</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>group_wait</span><span class=p>:</span><span class=w> </span><span class=l>3m</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>group_interval</span><span class=p>:</span><span class=w> </span><span class=l>3m</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>repeat_interval</span><span class=p>:</span><span class=w> </span><span class=l>1h</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>receiver</span><span class=p>:</span><span class=w> </span><span class=l>c-4cvw9:kube-components-alert</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>group_by</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>group_id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>match</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>group_id</span><span class=p>:</span><span class=w> </span><span class=l>c-4cvw9:kube-components-alert</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>continue</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>routes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>group_by</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>rule_id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>component_name</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>match</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>rule_id</span><span class=p>:</span><span class=w> </span><span class=l>c-4cvw9:kube-components-alert_controllermanager-system-service</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>continue</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>group_by</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>rule_id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>component_name</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>match</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>rule_id</span><span class=p>:</span><span class=w> </span><span class=l>c-4cvw9:kube-components-alert_scheduler-system-service</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>continue</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>group_wait</span><span class=p>:</span><span class=w> </span><span class=l>3m</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>group_interval</span><span class=p>:</span><span class=w> </span><span class=l>3m</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>repeat_interval</span><span class=p>:</span><span class=w> </span><span class=l>1h</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>receiver</span><span class=p>:</span><span class=w> </span><span class=l>c-4cvw9:node-alert</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>group_by</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>group_id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>match</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>group_id</span><span class=p>:</span><span class=w> </span><span class=l>c-4cvw9:node-alert</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>continue</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>routes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>group_by</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>rule_id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>match</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>rule_id</span><span class=p>:</span><span class=w> </span><span class=l>c-4cvw9:node-alert_high-cpu-load</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>continue</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>group_by</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>rule_id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>match</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>rule_id</span><span class=p>:</span><span class=w> </span><span class=l>c-4cvw9:node-alert_node-disk-running-full</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>continue</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>group_by</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>rule_id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>match</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>rule_id</span><span class=p>:</span><span class=w> </span><span class=l>c-4cvw9:node-alert_high-memmory</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>continue</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>group_wait</span><span class=p>:</span><span class=w> </span><span class=l>3m</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>group_interval</span><span class=p>:</span><span class=w> </span><span class=l>3m</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>repeat_interval</span><span class=p>:</span><span class=w> </span><span class=l>1h</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>group_wait</span><span class=p>:</span><span class=w> </span><span class=l>1m</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>group_interval</span><span class=p>:</span><span class=w> </span><span class=l>10s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>repeat_interval</span><span class=p>:</span><span class=w> </span><span class=l>1h</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>receivers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>rancherlabs</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>slack_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>send_resolved</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>http_config</span><span class=p>:</span><span class=w> </span>{}<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>api_url</span><span class=p>:</span><span class=w> </span><span class=l>&lt;secret&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>channel</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;#alert&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>username</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;{{ template &#34;slack.default.username&#34; . }}&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>color</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;{{ if eq .Status &#34;firing&#34; }}danger{{ else }}good{{ end }}&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>title</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;{{ template &#34;slack.default.title&#34; . }}&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>pretext</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;{{ template &#34;slack.default.pretext&#34; . }}&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>text</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;{{ template &#34;slack.default.text&#34; . }}&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>footer</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;{{ template &#34;slack.default.footer&#34; . }}&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>fallback</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;{{ template &#34;slack.default.fallback&#34; . }}&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>callback_id</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;{{ template &#34;slack.default.callbackid&#34; . }}&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>icon_emoji</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;{{ template &#34;slack.default.iconemoji&#34; . }}&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>icon_url</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;{{ template &#34;slack.default.iconurl&#34; . }}&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>c-4cvw9:etcd-alert</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>email_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>send_resolved</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>to</span><span class=p>:</span><span class=w> </span><span class=m>9935226</span>@<span class=l>qq.com</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>from</span><span class=p>:</span><span class=w> </span><span class=m>9935226</span>@<span class=l>qq.com</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>hello</span><span class=p>:</span><span class=w> </span><span class=l>localhost</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>smarthost</span><span class=p>:</span><span class=w> </span><span class=l>smtp.qq.com:587</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>auth_username</span><span class=p>:</span><span class=w> </span><span class=m>9935226</span>@<span class=l>qq.com</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>auth_password</span><span class=p>:</span><span class=w> </span><span class=l>&lt;secret&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>headers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>From</span><span class=p>:</span><span class=w> </span><span class=m>9935226</span>@<span class=l>qq.com</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>Subject</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;{{ template &#34;rancher.title&#34; . }}&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>To</span><span class=p>:</span><span class=w> </span><span class=m>9935226</span>@<span class=l>qq.com</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>html</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;{{ template &#34;email.text&#34; . }}&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>require_tls</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>c-4cvw9:kube-components-alert</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>webhook_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>send_resolved</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>http_config</span><span class=p>:</span><span class=w> </span>{}<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>url</span><span class=p>:</span><span class=w> </span><span class=l>http://webhook-dingtalk.cattle-prometheus:8060/dingtalk/webhook1/send</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>c-4cvw9:node-alert</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>webhook_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>send_resolved</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>http_config</span><span class=p>:</span><span class=w> </span>{}<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>url</span><span class=p>:</span><span class=w> </span><span class=l>http://webhook-dingtalk.cattle-prometheus:8060/dingtalk/webhook1/send</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>templates</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=l>/etc/alertmanager/config/notification.tmpl</span><span class=w>
</span></span></span></code></pre></div><div class=gdoc-page__anchorwrap><h2 id=alertmanager集群高可用部署>alertmanager集群高可用部署
<a data-clipboard-text=https://note.ljzsdut.com/%E4%BA%91%E5%8E%9F%E7%94%9F/Prometheus/006-altermanager%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%A6%E8%A7%A3/#alertmanager集群高可用部署 class="gdoc-page__anchor clip flex align-center" title="Anchor to: alertmanager集群高可用部署" aria-label="Anchor to: alertmanager集群高可用部署" href=#alertmanager%e9%9b%86%e7%be%a4%e9%ab%98%e5%8f%af%e7%94%a8%e9%83%a8%e7%bd%b2><svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"/></svg></a></h2></div><p><a class=gdoc-markdown__link href=https://github.com/prometheus/alertmanager#high-availability>集群高可用</a></p><p>参考前面章节二进制部署部分。</p><div class=gdoc-page__anchorwrap><h2 id=参考文档>参考文档：
<a data-clipboard-text=https://note.ljzsdut.com/%E4%BA%91%E5%8E%9F%E7%94%9F/Prometheus/006-altermanager%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%A6%E8%A7%A3/#参考文档 class="gdoc-page__anchor clip flex align-center" title="Anchor to: 参考文档：" aria-label="Anchor to: 参考文档：" href=#%e5%8f%82%e8%80%83%e6%96%87%e6%a1%a3><svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"/></svg></a></h2></div><p><a class=gdoc-markdown__link href=https://www.kancloud.cn/pshizhsysu/prometheus/1803808>https://www.kancloud.cn/pshizhsysu/prometheus/1803808</a></p></article><div class="gdoc-page__footer flex flex-wrap justify-between"></div></div></main><footer class=gdoc-footer><nav class="container flex"><div><section class="flex flex-wrap align-center"><span class="gdoc-footer__item gdoc-footer__item--row">Built with <a href=https://gohugo.io/ class=gdoc-footer__link>Hugo</a> and<svg class="gdoc-icon gdoc_heart"><use xlink:href="#gdoc_heart"/></svg></span>
<span class="gdoc-footer__item gdoc-footer__item--row"><a href=https://blog.example.com/legal class=gdoc-footer__link>Legal Notice</a></span>
<span class="gdoc-footer__item gdoc-footer__item--row"><a href=/privacy class=gdoc-footer__link>Privacy Policy</a></span></section><section class="flex flex-wrap align-center"><span class=gdoc-footer__item>Content licensed under
<a href=https://creativecommons.org/licenses/by-sa/4.0/ class="gdoc-footer__link no-wrap">CC BY-SA 4.0</a></span></section></div><div class="flex flex-25 justify-end"><span class="gdoc-footer__item text-right"><a class="gdoc-footer__link fake-link" href=# aria-label="Back to top"><svg class="gdoc-icon gdoc_keyboard_arrow_up"><use xlink:href="#gdoc_keyboard_arrow_up"/></svg><span class=hidden-mobile>Back to top</span></a></span></div></nav></footer></div><script defer src=/js/search-1c4cfb2d.bundle.min.js></script></body></html>